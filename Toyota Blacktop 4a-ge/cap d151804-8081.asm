

;
; ЙННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН»
; є	This file is generated by The Interactive Disassembler (IDA)	    є
; є	Copyright (c) 2006 by DataRescue sa/nv,	<ida@datarescue.com>	    є
; є			 Licensed to: Freeware version			    є
; ИНННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННј
;
; File Name   :	C:\Documents and Settings\Sparkie\Desktop\Toyota PCM hacking\Toyota Blacktop 4a-ge\cap d151804-8081.bin
; Format      :	Binary file
; Base Address:	0000h Range: C000h - 10000h Loaded length: 4000h

; ; Processor:	      D8X
; ; Target assembler: Table Driven Assembler (TASM) by Speech Technology Inc.

; ННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН

; Segment type:	Pure data
		;.segment FSR
DDRA:		.block 1		; DATA XREF: __RESET+7r __RESET+167r
					; Port A i/o config
DDRB:		.block 1		; DATA XREF: __RESET+Fr __RESET+16Ar
					; Port B i/o config
WDC:		.block 1		; watch	dog timer
TIMER3:		.block 1		; Timer	LSB (bit0~bit2)
TIMER:		.block 1		; DATA XREF: IV6sub1+BBr IV6sub1+BFr ...
					; Timer	MSB (bit11~bit18)
TIMERL:		.block 1		; Timer	LSB (bit3~bit10)
SIDR_SODR:	.block 1		; DATA XREF: __RESET+3Ar __RESET+109w	...
					; Serial Input/Output Data Register
SMRC_SIR:	.block 1		; DATA XREF: __RESET+32r __RESET+158r	...
					; Serial Master	Register Control
CPR0:		.block 1		; DATA XREF: IV6sub1+C4w IV6sub1+F5w ...
					; Timer	comparison #0 MSB
CPR0L:		.block 1		; Timer	comparison #0 LSB
CPR1:		.block 1		; Timer	comparison #1 MSB
CPR1L:		.block 1		; Timer	comparison #1 LSB
CPR2:		.block 1		; Timer	comparison #2 MSB
CPR2L:		.block 1		; Timer	comparison #2 LSB
CPR3:		.block 1		; Timer	comparison #3 MSB
CPR3L:		.block 1		; Timer	comparison #3 LSB
ASR0P:		.block 1		; DATA XREF: __RESET+14r __RESET+170r
					; ASR0 pos edge	counter	value MSB
ASR0PL:		.block 1		; DATA XREF: __RESET+20r __RESET+16Dr
					; ASR0 pos edge	counter	value LSB
ASR0N:		.block 1		; DATA XREF: __RESET+1Dr
					; ASR0 neg edge	counter	value MSB
ASR0NL:		.block 1		; DATA XREF: __RESET+1Ar __RESET+176r
					; ASR0 neg edge	counter	value LSB
ASR1P:		.block 1		; DATA XREF: __RESET+29r __RESET+173r
					; ASR1 pos edge	counter	value MSB
ASR1PL:		.block 1		; ASR1 pos edge	counter	value LSB
ASR1N:		.block 1		; DATA XREF: sub_E92E:loc_E940w
					; ASR1 neg edge	counter	value MSB
ASR1NL:		.block 1		; ASR1 neg edge	counter	value LSB
ASR2:		.block 1		; DATA XREF: IV6sub1:loc_F37Br
					; ASR2 edge counter value MSB
ASR2L:		.block 1		; ASR2 edge counter value LSB
ASR3:		.block 1		; DATA XREF: IV4:loc_FA20r
					; ASR3 edge counter value MSB
ASR3L:		.block 1		; ASR3 edge counter value LSB
unk_1C:		.block 1
SMRC2:		.block 1		; DATA XREF: __RESET+17r __RESET+179r
					; SMRC2
SIDR2_SODR2:	.block 1		; SIDR2/SODR2?
OMODE:		.block 1		; DATA XREF: __RESETr
					; Mode control Register
PORTA:		.block 1		; DATA XREF: __RESET+4r __RESET+30Ar ...
					; Port A Data Register
PORTAL:		.block 1		; DATA XREF: __RESET+Aw __RESET+13Fw ...
					; Port A Latch
PORTB:		.block 1		; DATA XREF: __RESET+Cr __RESET+F7r ...
					; Port B Data Register
PBCS:		.block 1		; DATA XREF: __RESET+12w __RESET+17Cw
					; Port B Control Register
TAIT:		.block 1		; DATA XREF: __RESET+26r __RESET+15Er	...
					; Timer	ASR Control
LDOUT:		.block 1		; DATA XREF: IV6sub1+F2r
					; DoInjector2+Br ...
					; Latch	DOUT
DOUT:		.block 1		; DATA XREF: __RESET+2Cr __RESET+223r	...
					; DOUT Data Register
DOM:		.block 1		; DATA XREF: __RESET+2Fr __RESET+1D7Dw ...
					; DOUT Control Register
PORTC:		.block 1		; DATA XREF: ROM:E0D3r	__RESET+1DBBr ...
					; Port C Data Register
PORTD_ASRIN:	.block 1		; DATA XREF: __RESET+23r __RESET+18Br	...
					; Port D Data Register / ASR Input Data
RAMST:		.block 1		; DATA XREF: __RESET:loc_CA80r
					; __RESET:loc_CA94r ...
					; Built-in RAM status
SSD:		.block 1		; DATA XREF: __RESET+35r __RESET+38r ...
					; Serial Status	Data Register
IRQL:		.block 1		; DATA XREF: __RESET+40w __RESET+143w	...
					; Interrupt Request Flag MSB
IRQLL:		.block 1		; DATA XREF: __RESET+141w
					; __RESET:loc_CA8Ar ...
					; Interrupt Request Flag LSB
IMASK:		.block 1		; DATA XREF: __RESET+42w __RESET+148w	...
; end of 'FSR'                          ; Interrupt Request Mask MSB

; ННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН

; Segment type:	Regular
		;.segment seg001
		.org 2Fh
IMASKL:		.block 1		; DATA XREF: __RESET+F3r
					; Interrupt Request Mask LSB
unk_30:		.block 1
		.block 1
unk_32:		.block 1
		.block 1
unk_34:		.block 1		; DATA XREF: IV4+1Dr
unk_35:		.block 1
		.block 1
		.block 1
CPR4:		.block 1		; Timer	comparison #0 MSB
CPR4L:		.block 1		; Timer	comparison #0 LSB
CPR5:		.block 1		; Timer	comparison #1 MSB
CPR5L:		.block 1		; Timer	comparison #1 LSB
CPR6:		.block 1		; Timer	comparison #2 MSB
CPR6L:		.block 1		; Timer	comparison #2 LSB
CPR7:		.block 1		; Timer	comparison #3 MSB
CPR7L:		.block 1		; Timer	comparison #3 LSB
; end of 'seg001'

; ННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН

; Segment type:	Pure data
		;.segment RAM
		.org 40h
flags_40:	.block 1		; DATA XREF: sub_CAC1+26r
					; __RESET:loc_CBC3r ...
					; b0 - lilRPM not running flag,	b1 - deltaNE based not running flag
flags_41:	.block 1		; DATA XREF: __RESET+7Er __RESET+1A15r ...
					; b1 set under 1200RPM
flags_42:	.block 1		; DATA XREF: __RESET+D8r
					; __RESET:loc_CA0Dr ...
					; b2 set during	init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
flags_43:	.block 1		; DATA XREF: __RESET+68Er __RESET+6ADr ...
flags_44:	.block 1		; DATA XREF: __RESET+420r __RESET+7A4r ...
flags_45:	.block 1		; DATA XREF: NegDspecialr
					; filtDiffRPM+13r ...
flags_46:	.block 1		; DATA XREF: __RESET+ABEr sub_D41C+10r ...
flags_47:	.block 1		; DATA XREF: sub_D0C6:loc_D0CCr
					; sub_D0C6:loc_D102r ...
flags_48:	.block 1		; DATA XREF: __RESET+529r
					; __RESET:loc_E31Cr ...
					; bit 0	set under 1200 RPM
flags_49:	.block 1		; DATA XREF: __RESET+127r __RESET+2E9r ...
					; no bits set or cleared overtly
flags_4A:	.block 1		; DATA XREF: __RESET+12Ar
					; __RESET+11DDr ...
flags_4B:	.block 1		; DATA XREF: __RESET+742r
					; __RESET:loc_D056r ...
flags_4C:	.block 1		; DATA XREF: sub_CAC1+Bw __RESET+345r	...
					; bit3 - PIM bad
flags_4D:	.block 1		; DATA XREF: sub_CAC1+Dw __RESET+745r	...
flags_4E:	.block 1		; DATA XREF: __RESET+12Fr __RESET+133w ...
flags_4F:	.block 1		; DATA XREF: __RESET+380w
					; __RESET:loc_CC8Br ...
motorPhaseNE:	.block 1		; DATA XREF: ROM:F211r	ROM:loc_F252w ...
					; writ in IVe
motorPhase:	.block 1		; DATA XREF: tweak106+11w sub_F295+10w ...
					; writ in IV6 (4ms periodic)
PIM:		.block 1		; DATA XREF: __RESET+120r
					; __RESET:loc_D691r ...
					; adc vector 0,	probably PIM (map signal)
unk_53:		.block 1
unk_54:		.block 1		; DATA XREF: __RESET+122w __RESET+358r ...
unk_55:		.block 1
word_56:	.block 2		; DATA XREF: __RESET+894r __RESET+8B6r ...
					; word_E9/(byte_130*2)
VTA:		.block 2		; DATA XREF: sub_D41C+BBr
					; __RESET+1388r ...
					; writ in adc vec 1, probably VTA (TPS)
unk_5A:		.block 1		; DATA XREF: sub_DE86+5r ROM:FCA9w ...
					; VTA flags I bet
THW:		.block 2		; DATA XREF: other2D_THWr other2D_5Br	...
					; set in adc vec 3, not	of bits	read from adc, probably	THW
THA:		.block 1		; DATA XREF: __RESET+5E8r
					; __RESET+1B47r ...
					; adc vector 2,	negation of bits, probably THA
OX:		.block 1		; DATA XREF: sub_D129+10r ROM:E011r ...
					; adc vector 5 multiplied by 4 (ie voltage is 1.25*count/256), probably	OX (oxygen sensor)
BVolts:		.block 1		; DATA XREF: __RESET+8F0r
					; __RESET+116Fr ...
					; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
RPM:		.block 2		; DATA XREF: TwoD_RPMr
					; __RESET:loc_CB4Dw ...
					; probably standard toyota format: 50's and fractions of 50
lilRPM:		.block 1		; DATA XREF: TwoD_lilRPMr __RESET+250w ...
					; 0 to 6400 rpm	as fraction, 25	RPM per	bit
byte_63:	.block 1		; DATA XREF: filtDiffRPM+19w
					; __RESET+3E7r	...
					; difference in	RPM between immedate and word_14C, 6.25	RPM / bit
temp_64:	.block 1		; DATA XREF: ThreeDtable+3w
					; ThreeDtable+1Ar ...
unk_65:		.block 1		; DATA XREF: __RESET+94Dr
					; __RESET:loc_D252r ...
temp_66:	.block 1		; DATA XREF: ThreeDtable+14w
					; ThreeDtable+16r ...
temp_67:	.block 1		; DATA XREF: ThreeDtable+27w
					; sub_DE61+22w	...
unk_68:		.block 1		; DATA XREF: ROM:DD7Aw
					; sub_DE61:loc_DE80w ...
		.block 1
unk_6A:		.block 1		; DATA XREF: IV6sub1+35Aw IV6sub1+36Br
		.block 1
		.block 1
unk_6D:		.block 1		; DATA XREF: __RESET+CEr ROM:loc_E4F4r ...
unk_6E:		.block 1		; DATA XREF: sub_D129:loc_D137r
					; sub_D129:loc_D153w
unk_6F:		.block 1		; DATA XREF: __RESET+869w __RESET+98Cw ...
unk_70:		.block 1		; DATA XREF: __RESET+7AAw sub_D0C6+45r ...
		.block 1
unk_72:		.block 1		; DATA XREF: __RESET+4DBw
					; __RESET:loc_CDE7r ...
word_73:	.block 2		; DATA XREF: __RESET+245w __RESET+A2Cr ...
unk_75:		.block 1		; DATA XREF: __RESET+8D7r
					; __RESET:loc_D280r
unk_76:		.block 1		; DATA XREF: sub_EDE4:loc_F12Er
					; sub_EDE4:loc_F145w ...
unk_77:		.block 1		; DATA XREF: IVc:loc_F905r sub_F929+Aw
					; stores timer of an adc request
unk_78:		.block 1		; DATA XREF: ROM:E115w	IV9+1Er ...
unk_79:		.block 1		; DATA XREF: ROM:E1D6r	ROM:loc_E1E9w ...
unk_7A:		.block 1		; DATA XREF: __RESET+7Cw ROM:loc_E1CBr ...
unk_7B:		.block 1		; DATA XREF: __RESET:loc_CD70r
					; __RESET:loc_CD90w ...
		.block 1
unk_7D:		.block 1
		.block 1
		.block 1
word_80:	.block 2		; DATA XREF: ROM:DFB8r	ROM:DFBEr ...
word_82:	.block 2		; DATA XREF: ROM:E001r	IVEendsub+6Dr
word_84:	.block 2		; DATA XREF: ROM:DFE9r	ROM:E057r ...
word_86:	.block 2		; DATA XREF: __RESET+93Br __RESET+963r ...
unk_88:		.block 1
		.block 1
		.block 1
		.block 1
unk_8C:		.block 1
unk_8D:		.block 1
		.block 1
unk_8F:		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
word_94:	.block 2		; DATA XREF: __RESET:loc_CAAFr
					; ROM:ADCvec1_16r ...
word_96:	.block 2		; DATA XREF: sub_CAC1:loc_CAEDw
					; __RESET+1182r ...
word_98:	.block 2		; DATA XREF: __RESET+D6r __RESET+1370r ...
word_9A:	.block 2		; DATA XREF: __RESET+E0r sub_CAC1+34w	...
word_9C:	.block 2		; DATA XREF: __RESET+199r sub_CAC1w ...
		.block 1
		.block 1
count_A0:	.block 1		; DATA XREF: __RESET+74w sub_F295+7r ...
count_A1:	.block 1		; DATA XREF: __RESET+2ECw __RESET+2F6r
count_A2:	.block 1
count_A3:	.block 1		; DATA XREF: __RESET+1F15r
					; __RESET+1F1Aw
count_A4:	.block 1		; DATA XREF: __RESET+61w __RESET+2D8r	...
count_A5:	.block 1		; DATA XREF: __RESET+11D6w
					; __RESET:loc_DADAr
count_A6:	.block 1		; DATA XREF: __RESET+150w IV1+22r
count_A7:	.block 1		; DATA XREF: sub_EDE4+50w sub_EDE4+5Er
count_A8:	.block 1		; DATA XREF: sub_F84A+2Ar
					; sub_F84A:loc_F88Ew ...
count_A9:	.block 1		; DATA XREF: __RESET+750w __RESET+757w ...
count_AA:	.block 1		; DATA XREF: __RESET+B2w
					; __RESET:loc_CFF9r ...
count_AB:	.block 1		; DATA XREF: IV6-8Dr IV6-88w
count_AC:	.block 1		; DATA XREF: __RESET+182w ROM:E10Er
count_AD:	.block 1		; DATA XREF: __RESET+190w ROM:E124r
count_AE:	.block 1		; DATA XREF: IV9+24w IV9+38w ...
count_AF:	.block 1		; DATA XREF: __RESET:loc_DF38w	IV9+33r
count_B0:	.block 1		; DATA XREF: __RESET+76w ROM:IVe1r ...
count_B1:	.block 1		; DATA XREF: __RESET+CD2r
					; __RESET:loc_D5DCw
count_B2:	.block 1		; DATA XREF: __RESET+78w
					; __RESET:loc_CB1Dr ...
count_B3:	.block 1		; DATA XREF: IV4+24r IV4+3Ew
count_B4:	.block 1		; DATA XREF: __RESET+5B8w
					; __RESET:loc_CEBCr
count_B5:	.block 1		; DATA XREF: IV6sub1+37Aw IV6sub1+3A8w ...
count_B6:	.block 1		; DATA XREF: IV6sub1+355r IV6sub1+361r ...
count_B7:	.block 1		; DATA XREF: __RESET+2C4w __RESET+2FBr ...
count_B8:	.block 1		; DATA XREF: __RESET+9F1w
					; __RESET:loc_D2FFr
count_B9:	.block 1		; DATA XREF: __RESET+50Cw
					; __RESET:loc_CE30r ...
count_BA:	.block 1
count_BB:	.block 1
count_BC:	.block 1		; DATA XREF: sub_EDE4+93w sub_EE84+61w ...
count_BD:	.block 1		; DATA XREF: __RESET+72w __RESET+766r	...
count_BE:	.block 1		; DATA XREF: __RESET:loc_E3D5w
					; __RESET:loc_E40Fr
count_BF:	.block 1		; DATA XREF: __RESET:loc_E913w
					; ROM:EB79r ...
count_C0:	.block 1		; DATA XREF: __RESET+1FD5w
					; __RESET:loc_E9D3r
count_C1:	.block 1		; DATA XREF: ROM:EB8Cw	ROM:loc_EC74w ...
count_C2:	.block 1		; DATA XREF: __RESET:loc_CC5Ew
					; __RESET:loc_CC62r
count_C3:	.block 1
count_C4:	.block 1
count_C5:	.block 1		; DATA XREF: ROM:EB57w	ROM:loc_EB8Aw ...
count_C6:	.block 1		; DATA XREF: __RESET+7Aw sub_EDE4+29w	...
count_C7:	.block 1		; DATA XREF: ROM:FB5Dw	ROM:FB62r ...
count_C8:	.block 1		; DATA XREF: ROM:FB7Bw	ROM:FBEDr ...
count_C9:	.block 1		; DATA XREF: __RESET+1AE0r
					; __RESET+1AF1w ...
count_CA:	.block 1		; DATA XREF: __RESET:loc_CC1Br
					; __RESET:loc_CC25w
count_CB:	.block 1		; DATA XREF: __RESET+5A0r
					; __RESET:loc_CEB3w
count_CC:	.block 1		; DATA XREF: __RESET:loc_D19Bw
					; __RESET:loc_D1ACw ...
count_CD:	.block 1		; DATA XREF: __RESET:loc_E62Fw
					; __RESET:loc_E63Ar ...
count_CE:	.block 1
count_CF:	.block 1
count_D0:	.block 1		; DATA XREF: __RESET+1649w
					; __RESET:loc_DF4Dr ...
count_D1:	.block 1		; DATA XREF: __RESET+1633w
					; ROM:loc_E119r
count_D2:	.block 1		; DATA XREF: ROM:loc_DFC7w
					; ROM:loc_DFC9r
count_D3:	.block 1		; DATA XREF: sub_F7C6+3w sub_F7C6+7r
count_D4:	.block 1		; DATA XREF: ROM:E0D6r	ROM:loc_E0E2w
count_D5:	.block 1
count_D6:	.block 1		; DATA XREF: sub_F84A+7Ar sub_F84A+90w
count_D7:	.block 1		; DATA XREF: sub_F84A+9Br sub_F84A+B1w
count_D8:	.block 1		; DATA XREF: __RESET:loc_E949w
					; __RESET+206Cr
count_D9:	.block 1		; DATA XREF: __RESET+2C6w __RESET+CF6r ...
count_DA:	.block 1		; DATA XREF: __RESET+1C85w
					; __RESET+1C95r
count_DB:	.block 1		; DATA XREF: __RESET+1C90w
					; __RESET+1C9Ar
count_DC:	.block 1		; DATA XREF: __RESET+1C8Ew
					; __RESET:loc_E5ADw ...
count_DD:	.block 1		; DATA XREF: ROM:loc_ECC4w
					; ROM:loc_ECC6r ...
count_DE:	.block 1		; DATA XREF: __RESET:loc_CD55w
					; __RESET:loc_CD67r
count_DF:	.block 1		; DATA XREF: ROM:loc_E0A8w
					; ROM:loc_E0AAr
count_E0:	.block 1		; DATA XREF: ROM:loc_E01Bw
					; ROM:loc_E01Dr
count_E1:	.block 1		; DATA XREF: ROM:E030r	ROM:E066w
unk_E2:		.block 1		; DATA XREF: IV6sub1+77w
byte_E3:	.block 1		; DATA XREF: IV4+34r IV4+3Aw
					; when gap between ASR3	events is larger than 1ms
byte_E4:	.block 1		; DATA XREF: sub_F9DE+5r
byte_E5:	.block 1		; DATA XREF: __RESET:loc_CC27r
					; __RESET+340r	...
					; average of e3, e4
word_E6:	.block 2		; DATA XREF: IV4:loc_FA2Cr
					; IV4:loc_FA3Bw
					; last ASR3 time
unk_E8:		.block 1		; DATA XREF: IVc:loc_F910w
					; SIN0sub:SIN0sub2r
word_E9:	.block 2		; DATA XREF: sub_D41C:loc_D423r
					; ROM:loc_DD92w ...
count_EB:	.block 1		; DATA XREF: __RESET+86Fw __RESET+8DBw ...
unk_EC:		.block 1		; DATA XREF: IV6sub1:loc_F668r
					; IV6sub1+300w	...
unk_ED:		.block 1		; DATA XREF: IVEendsub+47r
					; IVEendsub+4Cw ...
unk_EE:		.block 1		; DATA XREF: IV6sub1:loc_F6A0r
					; IV6sub1+338w	...
unk_EF:		.block 1		; DATA XREF: __RESET+1F35w
					; __RESET+1F45r ...
unk_F0:		.block 1		; DATA XREF: __RESET+1F37w
					; __RESET:loc_E85Br
unk_F1:		.block 1		; DATA XREF: __RESET+1F39w
					; __RESET:loc_E86Fr
		.block 1
		.block 1
unk_F4:		.block 1		; DATA XREF: __RESET+69r __RESET+6Dw
unk_F5:		.block 1		; DATA XREF: __RESET+8Fw __RESET+867w	...
word_F6:	.block 2		; DATA XREF: sub_DB29+18r
					; __RESET+137Br ...
unk_F8:		.block 1		; DATA XREF: ROM:E02Er	ROM:loc_E048w ...
unk_F9:		.block 1		; DATA XREF: __RESET+86Dw ROM:E00Ar ...
unk_FA:		.block 1		; DATA XREF: sub_E06A+12w
unk_FB:		.block 1		; DATA XREF: IV6-A5w IV6-A3r
unk_FC:		.block 1		; DATA XREF: IVc+58r IVc+5Dw ...
unk_FD:		.block 1		; DATA XREF: IVc+65r IVc+6Aw ...
unk_FE:		.block 1		; DATA XREF: __RESET:loc_D642r
					; __RESET:loc_D646w ...
		.block 1
unk_100:	.block 1		; DATA XREF: IVc+3Br IVc+41w ...
		.block 1
unk_102:	.block 1		; DATA XREF: IVc+49r IVc+4Fw ...
		.block 1
		.block 1
		.block 1
word_106:	.block 2		; DATA XREF: sub_EDE4+3DBr IV6sub1+41r
					; time for 60 deg crank	rotation
word_108:	.block 2		; DATA XREF: chkRevLimit+3r
					; sub_EDE4+3EAr ...
					; time for 60 deg crank	rotation
word_10A:	.block 2		; DATA XREF: IV6sub1+47r
					; time for 60 deg crank	rotation
sixDeltaNE:	.block 2		; DATA XREF: CalcRPMr
					; __RESET:loc_D323r ...
					; time for 180 deg crank rotation
unk_10E:	.block 1		; DATA XREF: __RESET+233w ROM:F27Aw ...
unk_10F:	.block 1		; DATA XREF: IV6sub1+182r ROM:F5ADw
unk_110:	.block 1		; DATA XREF: __RESET+22Ew ROM:F275w ...
byte_111:	.block 1		; DATA XREF: ROM:F213w	ROM:F25Br
					; last unk_50
unk_112:	.block 1		; DATA XREF: __RESET+104w __RESET+11Dw ...
					; last ADC conversion vector
unk_113:	.block 1		; DATA XREF: sub_D129+6r sub_E7CC+7r ...
					; msN: adc vector 7 | lsN: adc vector 6
NEtime:		.block 2		; DATA XREF: IV6sub1+11w IV6sub1+B5r ...
					; an asr2 time
LastNEtime:	.block 2		; DATA XREF: IV6sub1+33r
					; IV6sub1:loc_F3AAw
					; last asr2 time for calculating average (even ne count?)
unk_118:	.block 1		; DATA XREF: sub_D0C6:loc_D0E5r
					; __RESET:loc_DBF6w ...
unk_119:	.block 1		; DATA XREF: __RESET+DB1r __RESET+DDAr ...
		.block 1
		.block 1
word_11C:	.block 2		; DATA XREF: __RESET+ADw sub_DB29+3Ar	...
word_11E:	.block 2		; DATA XREF: sub_DB29+37w sub_DB74+3r	...
word_120:	.block 2		; DATA XREF: ROM:DCF7w	ROM:DD18r ...
unk_122:	.block 1		; DATA XREF: ROM:DD09w	sub_FDC0+29r
unk_123:	.block 1		; DATA XREF: sub_DB29+1r sub_DB29+45r	...
unk_124:	.block 1
unk_125:	.block 1		; DATA XREF: ROM:DCEEw	ROM:DCFAr ...
unk_126:	.block 1		; DATA XREF: __RESET+6E8r sub_D41C+C1r ...
unk_127:	.block 1		; DATA XREF: ROM:DCEAw	sub_DF00+Cr
unk_128:	.block 1		; DATA XREF: ROM:DD15w	sub_EDE4+3Er ...
unk_129:	.block 1		; DATA XREF: ROM:DD0Cr	ROM:loc_DD6Br ...
		.block 1
unk_12B:	.block 1		; DATA XREF: ROM:FD75w	ROM:FD8Cr ...
word_12C:	.block 2		; DATA XREF: __RESET:loc_CF66r
					; __RESET+673r	...
word_12E:	.block 2		; DATA XREF: ROM:loc_DDCFw
					; sub_EDE4+1A3r ...
byte_130:	.block 1		; DATA XREF: ROM:DCF1r	ROM:calcPW_4r ...
unk_131:	.block 1		; DATA XREF: ROM:DCC0w	ROM:calcPW_2r
unk_132:	.block 1		; DATA XREF: __RESET+12CCw
					; __RESET+1304r ...
word_133:	.block 2		; DATA XREF: __RESET+1214w
					; sub_DB74:loc_DB8Cr
word_135:	.block 2		; DATA XREF: __RESET+1221w sub_DB74+Ar
word_137:	.block 2		; DATA XREF: sub_DB29:loc_DB3Ew
					; sub_DB29:loc_DB4Dr
word_139:	.block 2		; DATA XREF: sub_DB29:loc_DB54w
word_13B:	.block 2		; DATA XREF: sub_D2AE+39w ROM:D89Ar ...
word_13D:	.block 2		; DATA XREF: ROM:D866r	__RESET+136Aw ...
unk_13F:	.block 1		; DATA XREF: sub_D2AE:loc_D2E0w
		.block 1
unk_141:	.block 1		; DATA XREF: ROM:FEFCr	ROM:FF02r ...
					; crazy	filtered adc vector 9
unk_142:	.block 1		; DATA XREF: ROM:FEFFr	ROM:FF0Aw
					; adc vector 9
Pulsewidth:	.block 1		; DATA XREF: __RESET+44Br __RESET+489r ...
		.block 1
word_145:	.block 2		; DATA XREF: __RESET+87w __RESET+1BC7r ...
					; adc vec4 through table C589
unk_147:	.block 1		; DATA XREF: __RESET+12D9w
					; __RESET+1364r
		.block 1
unk_149:	.block 1		; DATA XREF: __RESET+D01r
					; __RESET+131Fr ...
word_14A:	.block 2		; DATA XREF: __RESET+242w
					; filterIdleRPM+Ar ...
					; RPM type variable, filtered if value is between 450 and 1250 RPM
word_14C:	.block 2		; DATA XREF: filtDiffRPM+2r
					; filtDiffRPM+1Dr ...
					; RPM type variable, iir filtered y_0=(y_-1+x_0)/2
unk_14E:	.block 1		; DATA XREF: __RESET:loc_D34Ew
					; __RESET+134Er
unk_14F:	.block 1		; DATA XREF: __RESET:loc_CEFCw
					; sub_CF01+3r ...
		.block 1
word_151:	.block 2		; DATA XREF: __RESET:loc_CF1Ew
					; sub_CF23+7r ...
unk_153:	.block 1		; DATA XREF: __RESET+9Bw
					; __RESET:loc_CE0Bw ...
unk_154:	.block 1		; DATA XREF: __RESET+514r
unk_155:	.block 1		; DATA XREF: __RESET+93w
					; __RESET:loc_CC9Fw ...
unk_156:	.block 1		; DATA XREF: __RESET+96w __RESET+391r	...
unk_157:	.block 1		; DATA XREF: __RESET:loc_D02Bw
					; __RESET+1316r
unk_158:	.block 1		; DATA XREF: __RESET:loc_CFACw
					; __RESET+712r
unk_159:	.block 1		; DATA XREF: __RESET:loc_CFE7w
unk_15A:	.block 1		; DATA XREF: __RESET:loc_CF4Dw
					; __RESET:loc_CFA5r
unk_15B:	.block 1		; DATA XREF: __RESET:loc_CFDAw
					; __RESET:loc_D01Br ...
unk_15C:	.block 1		; DATA XREF: __RESET:loc_D023r
					; __RESET+726r	...
unk_15D:	.block 1		; DATA XREF: __RESET:loc_DC5Br
					; __RESET+1B4Cw
word_15E:	.block 2		; DATA XREF: sub_D41C+1Ew
					; sub_D41C+18Aw ...
unk_160:	.block 1		; DATA XREF: sub_D41C+1Bw sub_D41C+66r ...
		.block 1
unk_162:	.block 1		; DATA XREF: sub_D41C+13w sub_D41C+38r ...
		.block 1
unk_164:	.block 1		; DATA XREF: sub_D41C+16w sub_D41C+25r ...
		.block 1
unk_166:	.block 1		; DATA XREF: __RESET+A64w sub_D41C+8Dr
unk_167:	.block 1		; DATA XREF: __RESET+A6Fw sub_D41C+93r
word_168:	.block 2		; DATA XREF: __RESET:loc_D3F7w
					; sub_D41C+149r ...
word_16A:	.block 2		; DATA XREF: __RESET:loc_D40Fw
					; sub_D41C+151r
byte_16C:	.block 1		; DATA XREF: __RESET+AD2w __RESET+AE7r ...
					; rpm through C6C6
byte_16D:	.block 1		; DATA XREF: __RESET+AC7w __RESET+ADBr ...
					; thw through C6A1
		.block 1
byte_16F:	.block 1		; DATA XREF: __RESET+A8Aw sub_D41C+52r ...
byte_170:	.block 1		; DATA XREF: __RESET+AA5w
unk_171:	.block 1		; DATA XREF: sub_D41C:loc_D4CEw
					; sub_D41C+117r ...
byte_172:	.block 1		; DATA XREF: __RESET+AB0w sub_D41C+9Br
					; rpm through C693
byte_173:	.block 1		; DATA XREF: __RESET+ABBw
					; rpm through C69A
byte_174:	.block 1		; DATA XREF: __RESET:loc_DCA4w
					; sub_DEA9+3r
					; VTA is part of the product that generates this byte
unk_175:	.block 1		; DATA XREF: ROM:F272w	IV6sub1+14Ew ...
					; engine phase information
unk_176:	.block 1		; DATA XREF: __RESET+1BD0r
					; sub_EDE4:loc_F1A7w ...
		.block 1
unk_178:	.block 1		; DATA XREF: sub_EDE4:loc_F027w
					; sub_EDE4+31Br
unk_179:	.block 1		; DATA XREF: sub_EDE4:loc_F05Ew
					; sub_F114+4r
byte_17A:	.block 1		; DATA XREF: sub_EDE4:loc_EF7Dw
					; sub_EDE4+21Cr ...
unk_17B:	.block 1		; DATA XREF: __RESET+BEw
					; sub_EDE4:loc_F06Ar ...
		.block 1
byte_17D:	.block 1		; DATA XREF: sub_EDE4:loc_EF9Ew
					; sub_EDE4+1E1r
unk_17E:	.block 1		; DATA XREF: sub_EDE4:loc_EFBEw
					; sub_EDE4+1E9r
unk_17F:	.block 1		; DATA XREF: sub_EDE4:loc_F0FCw
					; sub_EDE4+323r ...
unk_180:	.block 1		; DATA XREF: __RESET+B6w
					; sub_EE84:loc_EF19w ...
unk_181:	.block 1		; DATA XREF: sub_EE84+8r sub_EE84+80r	...
unk_182:	.block 1		; DATA XREF: __RESET+642r
					; sub_EDE4+374r ...
byte_183:	.block 1		; DATA XREF: sub_EDE4+3F9w IV6sub1+9Er
word_184:	.block 2		; DATA XREF: sub_EDE4+3F5w IV6sub1+A4r
					; probably dwell?
byte_186:	.block 1		; DATA XREF: __RESET+C5w IV6sub1+A1w ...
					; last 183
word_187:	.block 2		; DATA XREF: __RESET+CBw IV6sub1+A7w ...
					; last 184
IGToffTime:	.block 2		; DATA XREF: IV6sub1+CDw IV6sub1+FCw ...
					; igt related
		.block 1
unk_18C:	.block 1		; DATA XREF: __RESET+23Fw IV6sub1+72w
		.block 1
		.block 1
unk_18F:	.block 1		; DATA XREF: __RESET+B9w sub_EDE4+36w	...
unk_190:	.block 1		; DATA XREF: sub_EE84:loc_EEB6w
					; sub_EE84:loc_EEE7r
unk_191:	.block 1		; DATA XREF: sub_EDE4+95w sub_EE84+5Ew ...
word_192:	.block 2		; DATA XREF: sub_EE84:loc_EEA2w
word_194:	.block 2		; DATA XREF: sub_EE84+22r sub_EE84+35w
unk_196:	.block 1		; DATA XREF: sub_EDE4+9Aw sub_EE84+2Fw ...
unk_197:	.block 1		; DATA XREF: __RESET+A16r sub_EDE4+58r ...
unk_198:	.block 1		; DATA XREF: ROM:E4F9r	ROM:loc_E528w ...
		.block 1
unk_19A:	.block 1		; DATA XREF: __RESET+1BCDw
unk_19B:	.block 1		; DATA XREF: __RESET+1BD9w
unk_19C:	.block 1		; DATA XREF: __RESET+1BE1w
unk_19D:	.block 1		; DATA XREF: __RESET:loc_E4EEw
unk_19E:	.block 1		; DATA XREF: __RESET:loc_E499w
unk_19F:	.block 1		; DATA XREF: __RESET:loc_E4C3w
flags_1A0:	.block 1		; DATA XREF: ROM:FB2Dr	ROM:ADCvec1_7w	...
					; upper	nibble VTA, low	nibble PIM
unk_1A1:	.block 1		; DATA XREF: ROM:E1D0r	ROM:E20Cw ...
byte_1A2:	.block 1		; DATA XREF: ROM:F1F1r	ROM:loc_F20Cw
					; set to zero on G2 flagged NE (10deg BTDC #1)
unk_1A3:	.block 1		; DATA XREF: ROM:FB48r	ROM:FB4Cw ...
unk_1A4:	.block 1		; DATA XREF: sub_D0C6+16r sub_D0C6+1Cw ...
unk_1A5:	.block 1		; DATA XREF: __RESET+1346r
					; __RESET:loc_E5C8w ...
unk_1A6:	.block 1		; DATA XREF: IVEendsubr
					; IVEendsub:loc_F368w ...
unk_1A7:	.block 1		; DATA XREF: __RESET+6D0r
					; __RESET:loc_E492r ...
unk_1A8:	.block 1		; DATA XREF: __RESET:loc_E328w
					; IV6sub1:loc_F753r ...
		.block 1
unk_1AA:	.block 1		; DATA XREF: __RESET:loc_E89Dr
					; __RESET+1FADr ...
unk_1AB:	.block 1		; DATA XREF: IVEendsub+56w
					; IVEendsub:loc_F345r
unk_1AC:	.block 1		; DATA XREF: __RESET+1CA6r
					; __RESET+201Dw ...
		.block 1
		.block 1
		.block 1
		.block 1
unk_1B1:	.block 1		; DATA XREF: __RESET+D3w __RESET+2121r ...
unk_1B2:	.block 1		; DATA XREF: __RESET+3FAr
					; __RESET+209Cr ...
unk_1B3:	.block 1		; DATA XREF: __RESET:loc_C9DFw
					; ROM:loc_ED06r ...
unk_1B4:	.block 1		; DATA XREF: __RESET:loc_E994r
					; ROM:loc_EA88r ...
		.block 1
unk_1B6:	.block 1		; DATA XREF: __RESET+2087r
					; __RESET+20F2r ...
		.block 1
unk_1B8:	.block 1		; DATA XREF: __RESET+207Er
					; __RESET+2104r ...
unk_1B9:	.block 1		; DATA XREF: __RESET+2098r
					; sub_EA46:loc_EA6Cw
unk_1BA:	.block 1		; DATA XREF: sub_EA46+6r sub_EA46+1Cw
unk_1BB:	.block 1		; DATA XREF: __RESET+20B8r
					; ROM:loc_EDCEw
		.block 1
		.block 1
unk_1BE:	.block 1		; DATA XREF: ROM:ED98r
		.block 1
; end of 'RAM'

; ННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН

; Segment type:	Regular
		;.segment seg003
		.org 1C0h
unk_1C0:	.block 1		; DATA XREF: ROM:ED72r	ROM:ED77w
		.block 1
		.block 1
		.block 1
		.block 1
word_1C5:	.block 2		; DATA XREF: __RESET:loc_E5AFr
					; ROM:EB52r ...
word_1C7:	.block 2		; DATA XREF: ROM:EB68w	ROM:EB95r ...
word_1C9:	.block 2		; DATA XREF: ROM:loc_EAD7r
					; ROM:loc_EAE1w ...
word_1CB:	.block 2		; DATA XREF: ROM:EB29w	ROM:EBD5r
word_1CD:	.block 2		; DATA XREF: ROM:EAF6r	ROM:loc_EB13w ...
unk_1CF:	.block 1		; DATA XREF: ROM:ECD9r	ROM:loc_ED22r ...
word_1D0:	.block 2		; DATA XREF: __RESET+205Bw
					; __RESET+2117r ...
unk_1D2:	.block 1		; DATA XREF: sub_D97E+3r
					; sub_D97E:loc_D98Bw
unk_1D3:	.block 1		; DATA XREF: __RESET+D4Br
					; __RESET:loc_D705w ...
word_1D4:	.block 2		; DATA XREF: __RESET+D9Aw
					; __RESET:loc_D6F2r ...
					; PIM via C642
word_1D6:	.block 2		; DATA XREF: __RESET:loc_D6CDr
					; __RESET+E17w	...
word_1D8:	.block 2		; DATA XREF: __RESET+DD1r
					; __RESET:loc_D83Fw ...
word_1DA:	.block 2		; DATA XREF: __RESET:loc_D6C8w
word_1DC:	.block 2		; DATA XREF: __RESET+A7w __RESET+CDFr	...
word_1DE:	.block 2		; DATA XREF: ROM:D8C5w	ROM:D8D1r ...
word_1E0:	.block 2		; DATA XREF: __RESET+A1w ROM:loc_D946w ...
word_1E2:	.block 2		; DATA XREF: __RESET+A4w __RESET+E5Cr	...
byte_1E4:	.block 1		; DATA XREF: __RESET+D30w
					; __RESET:loc_D672r ...
		.block 1
unk_1E6:	.block 1		; DATA XREF: __RESET+8Cw
					; __RESET:loc_D292w ...
flags_1E7:	.block 1		; DATA XREF: __RESET+375r __RESET+5CCw ...
					; any bits fitting mask	1C or 1F can cut fuel (during crank?)
lastFlags_4f:	.block 1		; DATA XREF: __RESET:loc_E589r
					; __RESET:loc_E8CBr ...
		.block 1
unk_1EA:	.block 1		; DATA XREF: __RESET:loc_CF34r
					; __RESET+73Aw	...
flags_1EB:	.block 1		; DATA XREF: __RESET:loc_E646r
					; __RESET+1F02w
					; copy of flags_4f
unk_1EC:	.block 1		; DATA XREF: sub_EDE4r	sub_EE84r ...
unk_1ED:	.block 1		; DATA XREF: __RESET+73Dr __RESET+9EBw
unk_1EE:	.block 1		; DATA XREF: __RESET+47Br __RESET+499r ...
flags_1EF:	.block 1		; DATA XREF: __RESET+1A29r
					; __RESET+1A8Aw
					; copies into flags_4f
flags_1F0:	.block 1		; DATA XREF: __RESET+1AB6r
					; __RESET+1B1Cw
					; copied into flags_4F
		.block 1
flags_1F2:	.block 1		; DATA XREF: __RESET+8FEr
					; __RESET:loc_D5CFr ...
					; copies into flags_4F
flags_1F3:	.block 1		; DATA XREF: __RESET+37Ar __RESET+431w ...
flags_1F4:	.block 1		; DATA XREF: __RESET:loc_CC36r
					; __RESET+436r	...
					; based	on flags_4F
flags_1F5:	.block 1		; DATA XREF: __RESET+1638r
					; __RESET+1657w
					; copied into flags_4F
flags_1F6:	.block 1		; DATA XREF: __RESET+770r ROM:DDD8r ...
					; another flags_4f copy
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
		.block 1
unk_300:	.block 1		; DATA XREF: ROM:ECCBr	ROM:ECD0w ...
unk_301:	.block 1		; DATA XREF: __RESET+3FFr
					; __RESET+10E6r ...
unk_302:	.block 1		; DATA XREF: sub_CAC1+43w
					; __RESET:loc_D9ADr ...
unk_303:	.block 1		; DATA XREF: sub_CAC1+39w
					; __RESET+10A8w ...
unk_304:	.block 1		; DATA XREF: sub_CAC1+3Ew
					; __RESET+10CAr ...
unk_305:	.block 1		; DATA XREF: sub_CAC1+4Bw
					; __RESET+1F4Ar ...
unk_306:	.block 1		; DATA XREF: sub_CAC1+4Ew
					; __RESET+1F5Er
unk_307:	.block 1		; DATA XREF: sub_CAC1+51w
					; __RESET+1F72r
		.block 1
; end of 'seg003'

; ННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН

; Segment type:	Pure code
		;.segment ROM
		.org 0C000h
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; a terrible infinite loop

		; public DefaultINT
DefaultINT:				; CODE XREF: DefaultINTj
					; DATA XREF: ROM:FFDEo	...
		bra	DefaultINT	; IV0
; End of function DefaultINT		; IV2
					; IV3
					; IV5
					; IV7
					; IV8
					; IVa
					; IVb
					; IVd

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2D_e:				; CODE XREF: sub_D41C+Cp
		shr	d
; End of function other2D_e


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2D_d:				; CODE XREF: __RESET+659p __RESET+A61p ...
		shr	d
		shr	d
		shr	d
		shr	d
; End of function other2D_d


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2D_c:				; CODE XREF: sub_D41C+CEp
					; __RESET+138Fp
		bsr	SubtBoundD
		bra	other2Dc	; compensate for 2 not-data entries
; End of function other2D_c


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2D_THW:				; CODE XREF: sub_CD15+3p sub_D030+3p ...
		ld	b, THW		; set in adc vec 3, not	of bits	read from adc, probably	THW
; End of function other2D_THW


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2D_b:				; CODE XREF: __RESET+6D3p sub_EE84+78p
		ld	a, #004
		bra	other2Da	; subtract offset value
; End of function other2D_b


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2D_5B:				; CODE XREF: __RESET:loc_CEF9p
					; __RESET+619p	...
		ld	b, THW		; set in adc vec 3, not	of bits	read from adc, probably	THW
; End of function other2D_5B


other2D_a:				; CODE XREF: __RESET+355p __RESET+648p ...
		ld	a, #008
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmp x	(nop nop nop effectively)

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2D:				; CODE XREF: __RESET+2D5p __RESET+56Ap ...

; FUNCTION CHUNK AT C044 SIZE 00000004 BYTES

		ld	a, #016

other2Da:				; CODE XREF: other2D_b+2j
		sub	b, y + 00h	; subtract offset value
		bcs	other2Dret2	; bomb out
		push	a
		cmp	b, y + 01h
		ble	other2Db
		ld	b, y + 01h	; saturate

other2Db:				; CODE XREF: other2D+9j
		mov	s, x
		mov	b, a
		mul	a, x + 00h
		inc	s		; tidy stack
; End of function other2D


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; compensate for 2 not-data entries

other2Dc:				; CODE XREF: other2D_c+2j
					; ThreeDtable+1Cp ...
		add	a, #02h
		add	y, a
; End of function other2Dc


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


other2Dd:				; CODE XREF: ThreeDtable+2Dj
					; sub_D2AE+2Ep	...
		mov	b, a
		beq	other2Dret1	; normal return, fixed point value a.b
		push	b
		mov	s, x
		ld	a, y + 01h
		sub	a, y + 00h
		bcc	other2De
		neg	a
		neg	b
		xch	b, x + 00h
		inc	y

other2De:				; CODE XREF: other2Dd+9j
		mul	a, x + 00h
		inc	s

other2Dret1:				; CODE XREF: other2Dd+1j
		add	a, y + 00h	; normal return, fixed point value a.b
		ret
; End of function other2Dd

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR other2D

other2Dret2:				; CODE XREF: other2D+4j
		ld	a, y + 02h
		clr	b
		ret
; END OF FUNCTION CHUNK	FOR other2D

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


SubtBoundD:				; CODE XREF: other2D_cp ThreeDtablep ...
		sub	d, y + 00h
		bcc	loc_C04E
		clr	a
		clr	b

loc_C04E:				; CODE XREF: SubtBoundD+2j
		cmp	a, y + 02h
		bcs	loc_C055
		ld	a, y + 02h
		clr	b

loc_C055:				; CODE XREF: SubtBoundD+8j
		inc	y
		ret
; End of function SubtBoundD


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; Table	pointer	in Y, inputs in	D and X, D divided by 32

ThreeDtableby32:			; CODE XREF: sub_DEA9+43p
		shr	d
; End of function ThreeDtableby32


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; Table	pointer	in Y, inputs in	D and X, D divided by 16

ThreeDtableby16:			; CODE XREF: __RESET:loc_CF8Dp
					; ROM:EDBFp ...
		shr	d
; End of function ThreeDtableby16


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; Table	pointer	in Y, inputs in	D and X, D divided by 8

ThreeDtableby8:				; CODE XREF: sub_EDE4+1C9p
		shr	d
; End of function ThreeDtableby8


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; Table	pointer	in Y, inputs in	D and X, D divided by 4

ThreeDtableby4:				; CODE XREF: __RESET:loc_DBCAp
		shr	d
		shr	d
; End of function ThreeDtableby4


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; Table	pointer	in Y, inputs in	D and X

ThreeDtable:				; CODE XREF: sub_DB29+34p sub_DEA9+2Dp
		bsr	SubtBoundD
		push	x
		st	d, temp_64
		mov	y, d		; y was	incremented once by SubtBoundD
		mov	d, x
		inc	y
		inc	y
		pull	d
		bsr	SubtBoundD
		push	b
		ld	b, x + 01h	; load row bound
		inc	b		; add one to get row size in bytes
		push	b
		mov	s, x
		mul	a, x + 00h
		st	y, temp_66
		add	d, temp_66
		mov	d, y
		push	y
		ld	d, temp_64
		bsr	other2Dc	; compensate for 2 not-data entries
		st	a, temp_66
		pull	y
		pull	b
		add	y, b
		ld	d, temp_64
		bsr	other2Dc	; compensate for 2 not-data entries
		st	a, temp_67
		ld	y, #0066h
		pull	b
		bra	other2Dd
; End of function ThreeDtable


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


TwoDmovBA:				; CODE XREF: sub_EDE4+302p

; FUNCTION CHUNK AT C093 SIZE 00000002 BYTES

		mov	b, a
		bra	TwoDclrb
; End of function TwoDmovBA


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


TwoD_lilRPM:				; CODE XREF: __RESET+6C0p
					; sub_EDE4+22Dp ...
		ld	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmp x	(nop nop nop effectively)
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

TwoD_THW:				; CODE XREF: __RESET+A75p __RESET+A90p ...
		ld	a, THW		; set in adc vec 3, not	of bits	read from adc, probably	THW
; End of function TwoD_lilRPM

; START	OF FUNCTION CHUNK FOR TwoDmovBA

TwoDclrb:				; CODE XREF: TwoDmovBA+1j
		clr	b
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmp x	(nop nop nop effectively)
; END OF FUNCTION CHUNK	FOR TwoDmovBA

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


TwoD_RPM:				; CODE XREF: __RESET+1A23p
					; __RESET+1A5Bp
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
; End of function TwoD_RPM


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


TwoDtable:				; CODE XREF: __RESET+D94p __RESET+DBDp
		mov	d, x
		ld	a, [y]
		push	y
		add	y, a
		mov	x, d
		cmp	a, y + 00h	; load end value of table
		bcs	TwoD_1		; continue from	start if input doesnt exceed last table	value
		pull	x		; tidy stack and bomb out with final table point. saturate (not	extrapolate) behaviour
		bra	TwoD_2		; bomb out
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

TwoD_1:					; CODE XREF: TwoDtable+7j
		pull	y
		cmp	a, y + 00h
		bcc	TwoD_4		; search for values

TwoD_2:					; CODE XREF: TwoDtable+Aj
					; TwoDtable+2Fj
		ld	a, y + 01h	; bomb out
		clr	b
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

TwoD_3:					; CODE XREF: TwoDtable+19j
		inc	y
		inc	y

TwoD_4:					; CODE XREF: TwoDtable+Fj
		cmp	a, y + 02h	; search for values
		bcc	TwoD_3
		ld	a, y + 02h
		sub	a, y + 00h
		push	a		; push remainder
		mov	x, d
		sub	a, y + 00h
		mov	s, x
		div	d, x + 00h
		inc	s
		ld	a, y + 03h
		sub	a, y + 01h
		bcc	TwoD_5
		neg	a
		neg	b
		beq	TwoD_2		; bomb out
		inc	y
		inc	y

TwoD_5:					; CODE XREF: TwoDtable+2Bj
		push	b
		mov	s, x
		mul	a, x + 00h
		add	a, y + 01h
		inc	s
		ret
; End of function TwoDtable


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; increments B bytes starting at pointer 00+A, bytes increment to FF then saturate

Satcount_A:				; CODE XREF: __RESET+7BDp
					; __RESET+1A97p ...
		ld	x, #0000h
		add	x, a
; End of function Satcount_A


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; increments B bytes starting at pointer X, bytes increment to FF then saturate

Satcount:				; CODE XREF: Satcount+9j IV6-AEp ...
		ld	a, x + 00h
		inc	a
		beq	loc_C0DD
		inc	x + 00h

loc_C0DD:				; CODE XREF: Satcount+3j
		inc	x
		dec	b
		bne	Satcount	; increments B bytes starting at pointer X, bytes increment to FF then saturate
		ret
; End of function Satcount


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divDby128:				; CODE XREF: ROM:loc_DE09p
		shr	d
; End of function divDby128


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divDby64:				; CODE XREF: __RESET+A31p sub_DE86p ...
		shr	d
; End of function divDby64


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divDby32:				; CODE XREF: sub_DB29+2Ep sub_DEA9+31p ...
		shr	d
; End of function divDby32


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divDby16:				; CODE XREF: __RESET+676p __RESET+8C9p ...
		shr	d
		shr	d
		shr	d
		shr	d
		ret
; End of function divDby16


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


shraDx4:				; CODE XREF: filterIdleRPM+11p
		shra	a
		rorc	b
		shra	a
		rorc	b

shrDx2:					; CODE XREF: ROM:FD83p
		shra	a
		rorc	b
		shra	a
		rorc	b
		ret
; End of function shraDx4


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divby128satB:				; CODE XREF: __RESET+24Dp ROM:DD06p
		shr	d
; End of function divby128satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divby64satB:				; CODE XREF: __RESET+A87p __RESET+AA2p
		shr	d
; End of function divby64satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


duvby32satB:				; CODE XREF: __RESET+1BCAp
					; sub_EDE4+30Fp
		shr	d
; End of function duvby32satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divby16satB:				; CODE XREF: filtDiffRPM:loc_CB93p
					; __RESET+1140p ...
		shr	d
; End of function divby16satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


duvby8satB:				; CODE XREF: sub_D9F9+1Bp
		shr	d
; End of function duvby8satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divby4satB:				; CODE XREF: ROM:DCBDp	__RESET+1BD6p ...
		shr	d
; End of function divby4satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


divby2satB:				; CODE XREF: sub_EE84+27p
					; sub_EDE4:loc_EF74p ...
		shr	d
; End of function divby2satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


satB:					; CODE XREF: __RESET+96Ap
					; __RESET:loc_D33Dp
		cmpz	a
		beq	locret_C0FF
		ld	b, #0FFh

locret_C0FF:				; CODE XREF: satB+1j
		ret
; End of function satB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


NegDsetSpec:				; CODE XREF: sub_D41C+49p sub_D41C+89p ...
		setb	bit1, flags_45
; End of function NegDsetSpec


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


NegDspecial:				; CODE XREF: sub_D41C+63p
					; sub_D41C:loc_D50Ep ...
		tbbc	bit1, flags_45,	NegD_ret
; End of function NegDspecial


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


NegD:					; CODE XREF: __RESET+95Bp ROM:ECBCp
		neg	a
		neg	b
		subc	a, #00h

NegD_ret:				; CODE XREF: NegDspecialj
		ret
; End of function NegD


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; even specialer mul D by X, with added	D!

sub_C10A:				; CODE XREF: __RESET+1355p
					; __RESET+135Cp
		clr	a
		add	d, #0180h
; End of function sub_C10A


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; mul D	by X, returns middle 15	bits in	D

mulDbyXmid:				; CODE XREF: __RESET+12D6p
					; __RESET+12E1p ...
		bsr	mulDbyX		; return upper 32 in X:Y
		mov	y, d
		push	a
		mov	x, d
		shr	d
		and	a, #0FFh
		pull	a
		beq	loc_C11D
		ld	d, #0FFFFh
		setc

loc_C11D:				; CODE XREF: mulDbyXmid+9j
		xch	a, b
		rorc	b
		ret
; End of function mulDbyXmid


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; return upper 32 in X:Y

mul2BbyX:				; CODE XREF: __RESET+117Ap
					; sub_DB29+3Fp	...
		clr	a
		shl	d
; End of function mul2BbyX


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; return upper 32 in X:Y

mulDbyX:				; CODE XREF: mulDbyXmidp __RESET+A27p	...
		push	d
		push	x
		mov	s, x
		mul	a, x + 00h
		mov	d, y
		ld	a, x + 00h
		mul	a, x + 03h
		add	y, a
		st	b, x + 00h
		ld	a, x + 01h
		mul	a, x + 03h
		st	b, x + 03h
		xch	a, x + 02h
		mul	a, x + 01h
		add	b, x + 00h
		addc	a, #00h
		add	y, a
		clr	a
		add	b, x + 02h
		rolc	a
		add	y, a
		st	b, x + 02h
		st	y, x + 00h
		ld	a, x + 00h
		beq	mulDbyX_ret
		ld	d, #0FFFFh
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

mulDbyX_ret:				; CODE XREF: mulDbyX+27j
		ld	d, x + 01h
		pull	x
		pull	y
		ret
; End of function mulDbyX


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_C154:				; CODE XREF: sub_D41C+184p
		mov	x, d
		cmpb	a, #0F8h
		beq	loc_C15D
		ld	d, #7FFFh
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_C15D:				; CODE XREF: sub_C154+3j
		shl	d
		shl	d
		shl	d
		shl	d
		shl	d
		mov	d, x
		mov	y, d
		mul	a, #20h
		add	x, a
		mov	x, d
		shr	d
		ret
; End of function sub_C154


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; return upper 16b in D, copy of D in X, saturate d if it overflows

satMulBbyX:				; CODE XREF: __RESET+AEAp __RESET+B02p ...
		bsr	mulBbyX		; return upper 16b in D, copy of D in X
		rolc	b
		rolc	a
		bcc	loc_C173
		ld	d, #0FFFFh

loc_C173:				; CODE XREF: satMulBbyX+4j
		mov	d, x
		ret
; End of function satMulBbyX


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; return upper 16b in D, copy of D in X

mulBbyX:				; CODE XREF: satMulBbyXp __RESET+1192p ...
		mov	b, a
; End of function mulBbyX


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; return upper 16b in D, copy of D in X

mulAbyX:				; CODE XREF: ROM:C1FEp	ROM:C20Fp ...
		push	x
		mov	s, x
		xch	a, x + 01h
		mul	a, x + 01h
		push	b
		xch	a, x + 01h
		mul	a, x + 00h
		mov	d, x
		pull	d
		pull	b
		add	x, b
		shl	a		; populate carry bit if	overflow
		mov	x, d
		ret
; End of function mulAbyX


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; returns 256*X/D in D

bigDivider_b:				; CODE XREF: __RESET+DF9p __RESET+EF3p ...
		ld	y, #0FFF8h
; End of function bigDivider_b


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; returns X/D in D, with shifting as specified by Y

bigDivider_a:				; CODE XREF: ROM:D894p
		push	d
		mov	x, d
		cmp	d, #0000h
		bne	loc_C197
		pull	x
		bra	loc_C1EE
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_C195:				; CODE XREF: bigDivider_a:loc_C197j
		dec	y
		shl	d

loc_C197:				; CODE XREF: bigDivider_a+5j
		bpz	loc_C195
		inc	y
		shr	d
		mov	d, x
		pull	d
; End of function bigDivider_a


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; returns X/D in D, with shifting as specified by Y

bigDivider:				; CODE XREF: CalcRPM+9p
		cmp	d, #0000h
		beq	loc_C1E9
		bmi	loc_C1A8

loc_C1A4:				; CODE XREF: bigDivider+9j
		inc	y
		shl	d
		bpz	loc_C1A4

loc_C1A8:				; CODE XREF: bigDivider+5j
		push	y
		xch	x, y
		inc	a
		push	d
		push	y
		mov	s, x
		beq	loc_C1BA
		mov	y, d
		div	d, x + 02h
		st	b, x + 00h
		clr	b
		div	d, x + 02h
		st	b, x + 01h

loc_C1BA:				; CODE XREF: bigDivider+11j
		mov	y, d
		dec	x + 02h
		div	d, x + 02h
		push	b
		clr	b
		div	d, x + 02h
		pull	a
		neg	x + 03h
		beq	loc_C1D5
		sub	d, x + 00h
		push	b
		mul	a, x + 03h
		mov	d, y
		pull	a
		mul	a, x + 03h
		add	y, a
		mov	y, d
		add	d, x + 00h

loc_C1D5:				; CODE XREF: bigDivider+29j
		pull	x
		pull	x
		pull	y
		cmp	y, #0000h
		bpz	loc_C1E1

loc_C1DD:				; CODE XREF: bigDivider+42j
		shr	d
		inc	y
		bmi	loc_C1DD

loc_C1E1:				; CODE XREF: bigDivider+3Ej
					; bigDivider+4Aj
		beq	loc_C1EE
		shl	d
		bcs	loc_C1E9
		dec	y
		bra	loc_C1E1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_C1E9:				; CODE XREF: bigDivider+3j
					; bigDivider+47j
		ld	d, #0FFFFh
		setc
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  41h ; A		; brn
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_C1EE:				; CODE XREF: bigDivider_a+8j
					; bigDivider:loc_C1E1j
		clrc
		ret
; End of function bigDivider

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_C1F0:				; CODE XREF: sub_D353+7p ROM:DD76p ...
		push	b		; iir filter input X, y_-1 in Y, ratio for input in B
		mov	x, d
		sub	d, y + 00h
		beq	loc_C21D	; bomb out
		bcc	loc_C20D
		neg	a
		neg	b
		subc	a, #00h
		mov	d, x
		pull	a
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		cmp	d, #0000h
		bne	loc_C207
		inc	b

loc_C207:				; CODE XREF: ROM:C204j
		neg	a
		neg	b
		subc	a, #00h
		bra	loc_C218	; useful return
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_C20D:				; CODE XREF: ROM:C1F6j
		mov	d, x
		pull	a
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		cmp	d, #0000h
		bne	loc_C218	; useful return
		inc	b

loc_C218:				; CODE XREF: ROM:C20Bj	ROM:C215j
		add	d, y + 00h	; useful return
		st	d, y + 00h
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmp x	(nop nop nop effectively)
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_C21D:				; CODE XREF: ROM:C1F4j
		inc	s		; bomb out
		mov	x, d
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.dw 0001h		; 3d table row offset
		.db  03h		; row bound
		.dw 0200h		; column offset
		.db  06h		; column bound
		.db  80h ; Ђ
		.db  81h ; Ѓ
		.db  82h ; ‚
		.db  84h ; „
		.db  80h ; Ђ
		.db  80h ; Ђ
		.db  80h ; Ђ
		.db  80h ; Ђ
		.db  80h ; Ђ
		.db  7Eh ; ~
		.db  7Eh ; ~
		.db  7Eh ; ~
		.db  80h ; Ђ
		.db  7Dh ; }
		.db  7Ch ; |
		.db  7Dh ; }
		.db  80h ; Ђ
		.db  7Bh ; {
		.db  7Bh ; {
		.db  7Ch ; |
		.db  80h ; Ђ
		.db  79h ; y
		.db  7Bh ; {
		.db  79h ; y
		.db  80h ; Ђ
		.db  78h ; x
		.db  7Bh ; {
		.db  77h ; w
		.db  00h		; 3d table
		.db  80h ; Ђ
		.db  02h
		.db  00h
		.db 0DDh ; Э
		.db  07h
		.db  08h
		.db  1Fh
		.db  37h ; 7
		.db  0Ch
		.db  23h ; #
		.db  38h ; 8
		.db  10h
		.db  2Bh ; +
		.db  3Bh ; ;
		.db  1Bh
		.db  36h ; 6
		.db  46h ; F
		.db  2Ch ; ,
		.db  4Dh ; M
		.db  64h ; d
		.db  5Ch ; \
		.db  78h ; x
		.db  94h ; ”
		.db  9Fh ; џ
		.db 0B3h ; і
		.db 0C8h ; И
		.db 0FFh
		.db 0FFh
		.db 0FFh
		.db  02h		; 3d table
		.db  00h
		.db  14h
		.db  00h
		.db  00h
		.db  0Ch
		.db  69h ; i
		.db  53h ; S
		.db  42h ; B
		.db  39h ; 9
		.db  32h ; 2
		.db  2Ah ; *
		.db  26h ; &
		.db  21h ; !
		.db  1Dh
		.db  1Ah
		.db  18h
		.db  16h
		.db  14h
		.db  13h
		.db  12h
		.db  12h
		.db  13h
		.db  14h
		.db  14h
		.db  14h
		.db  14h
		.db  98h ; 
		.db  92h ; ’
		.db  8Eh ; Ћ
		.db  88h ; €
		.db  84h ; „
		.db  7Ch ; |
		.db  72h ; r
		.db  69h ; i
		.db  61h ; a
		.db  5Ah ; Z
		.db  53h ; S
		.db  4Bh ; K
		.db  44h ; D
		.db  41h ; A
		.db  3Dh ; =
		.db  38h ; 8
		.db  34h ; 4
		.db  32h ; 2
		.db  30h ; 0
		.db  2Eh ; .
		.db  2Eh ; .
		.db  9Ah ; љ
		.db  99h ; ™
		.db  96h ; –
		.db  94h ; ”
		.db  93h ; “
		.db  8Fh ; Џ
		.db  8Ch ; Њ
		.db  88h ; €
		.db  84h ; „
		.db  7Fh ; 
		.db  7Bh ; {
		.db  76h ; v
		.db  71h ; q
		.db  6Eh ; n
		.db  6Ah ; j
		.db  64h ; d
		.db  60h ; `
		.db  5Ch ; \
		.db  56h ; V
		.db  52h ; R
		.db  4Dh ; M
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  99h ; ™
		.db  98h ; 
		.db  97h ; —
		.db  95h ; •
		.db  93h ; “
		.db  91h ; ‘
		.db  8Eh ; Ћ
		.db  8Ch ; Њ
		.db  8Ah ; Љ
		.db  87h ; ‡
		.db  85h ; …
		.db  83h ; ѓ
		.db  80h ; Ђ
		.db  7Dh ; }
		.db  7Ah ; z
		.db  77h ; w
		.db  74h ; t
		.db  71h ; q
		.db  6Dh ; m
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  99h ; ™
		.db  98h ; 
		.db  98h ; 
		.db  96h ; –
		.db  95h ; •
		.db  94h ; ”
		.db  92h ; ’
		.db  90h ; ђ
		.db  8Eh ; Ћ
		.db  8Dh ; Ќ
		.db  8Bh ; ‹
		.db  8Ah ; Љ
		.db  88h ; €
		.db  86h ; †
		.db  84h ; „
		.db  82h ; ‚
		.db  7Fh ; 
		.db  7Dh ; }
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  9Ah ; љ
		.db  99h ; ™
		.db  98h ; 
		.db  97h ; —
		.db  96h ; –
		.db  95h ; •
		.db  94h ; ”
		.db  93h ; “
		.db  91h ; ‘
		.db  90h ; ђ
		.db  8Fh ; Џ
		.db  8Eh ; Ћ
		.db  8Ch ; Њ
		.db  8Bh ; ‹
		.db  8Ah ; Љ
		.db  88h ; €
		.db  87h ; ‡
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  9Ah ; љ
		.db  99h ; ™
		.db  98h ; 
		.db  97h ; —
		.db  97h ; —
		.db  96h ; –
		.db  95h ; •
		.db  94h ; ”
		.db  93h ; “
		.db  92h ; ’
		.db  91h ; ‘
		.db  91h ; ‘
		.db  90h ; ђ
		.db  8Fh ; Џ
		.db  8Eh ; Ћ
		.db  8Dh ; Ќ
		.db  8Ch ; Њ
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  99h ; ™
		.db  99h ; ™
		.db  98h ; 
		.db  97h ; —
		.db  97h ; —
		.db  96h ; –
		.db  95h ; •
		.db  95h ; •
		.db  94h ; ”
		.db  94h ; ”
		.db  93h ; “
		.db  92h ; ’
		.db  92h ; ’
		.db  91h ; ‘
		.db  90h ; ђ
		.db  90h ; ђ
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  9Ah ; љ
		.db  99h ; ™
		.db  99h ; ™
		.db  98h ; 
		.db  98h ; 
		.db  97h ; —
		.db  97h ; —
		.db  96h ; –
		.db  96h ; –
		.db  96h ; –
		.db  95h ; •
		.db  95h ; •
		.db  94h ; ”
		.db  93h ; “
		.db  93h ; “
		.db  92h ; ’
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  9Ah ; љ
		.db  9Ah ; љ
		.db  9Ah ; љ
		.db  99h ; ™
		.db  99h ; ™
		.db  99h ; ™
		.db  99h ; ™
		.db  98h ; 
		.db  98h ; 
		.db  98h ; 
		.db  98h ; 
		.db  97h ; —
		.db  97h ; —
		.db  97h ; —
		.db  97h ; —
		.db  97h ; —
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ah ; љ
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ch ; њ
		.db  9Ch ; њ
		.db  9Dh ; ќ
		.db  9Dh ; ќ
		.db  9Dh ; ќ
		.db  9Eh ; ћ
		.db  9Eh ; ћ
		.db  9Fh ; џ
		.db  9Fh ; џ
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ch ; њ
		.db  9Dh ; ќ
		.db  9Eh ; ћ
		.db  9Eh ; ћ
		.db  9Fh ; џ
		.db 0A0h ;  
		.db 0A1h ; Ў
		.db 0A3h ; Ј
		.db 0A4h ; ¤
		.db 0A5h ; Ґ
		.db 0A6h ; ¦
		.db 0A7h ; §
		.db 0A8h ; Ё
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Bh ; ›
		.db  9Ch ; њ
		.db  9Eh ; ћ
		.db  9Fh ; џ
		.db 0A0h ;  
		.db 0A1h ; Ў
		.db 0A3h ; Ј
		.db 0A4h ; ¤
		.db 0A6h ; ¦
		.db 0A8h ; Ё
		.db 0AAh ; Є
		.db 0ACh ; ¬
		.db 0ADh ; ­
		.db 0AFh ; Ї
		.db 0B1h ; ±
		.db  03h		; 3d table
		.db  00h
		.db  14h
		.db  01h
		.db 0B8h ; ё
		.db  0Bh
		.db  2Ch ; ,
		.db  2Eh ; .
		.db  30h ; 0
		.db  32h ; 2
		.db  2Ch ; ,
		.db  2Ah ; *
		.db  27h ; '
		.db  27h ; '
		.db  29h ; )
		.db  25h ; %
		.db  27h ; '
		.db  2Ch ; ,
		.db  30h ; 0
		.db  36h ; 6
		.db  3Ch ; <
		.db  3Ah ; :
		.db  32h ; 2
		.db  29h ; )
		.db  2Eh ; .
		.db  25h ; %
		.db  2Ch ; ,
		.db  39h ; 9
		.db  3Bh ; ;
		.db  3Eh ; >
		.db  3Ch ; <
		.db  34h ; 4
		.db  34h ; 4
		.db  31h ; 1
		.db  2Fh ; /
		.db  30h ; 0
		.db  2Ch ; ,
		.db  2Dh ; -
		.db  34h ; 4
		.db  34h ; 4
		.db  3Ch ; <
		.db  40h ; @
		.db  3Fh ; ?
		.db  38h ; 8
		.db  2Dh ; -
		.db  32h ; 2
		.db  2Ah ; *
		.db  36h ; 6
		.db  41h ; A
		.db  48h ; H
		.db  46h ; F
		.db  3Fh ; ?
		.db  3Ch ; <
		.db  3Bh ; ;
		.db  3Ah ; :
		.db  36h ; 6
		.db  34h ; 4
		.db  32h ; 2
		.db  2Fh ; /
		.db  38h ; 8
		.db  39h ; 9
		.db  3Eh ; >
		.db  41h ; A
		.db  40h ; @
		.db  3Ah ; :
		.db  36h ; 6
		.db  38h ; 8
		.db  3Ch ; <
		.db  46h ; F
		.db  4Ch ; L
		.db  50h ; P
		.db  56h ; V
		.db  4Dh ; M
		.db  4Ah ; J
		.db  48h ; H
		.db  43h ; C
		.db  40h ; @
		.db  38h ; 8
		.db  37h ; 7
		.db  3Bh ; ;
		.db  42h ; B
		.db  49h ; I
		.db  46h ; F
		.db  48h ; H
		.db  45h ; E
		.db  49h ; I
		.db  41h ; A
		.db  41h ; A
		.db  48h ; H
		.db  50h ; P
		.db  5Eh ; ^
		.db  61h ; a
		.db  64h ; d
		.db  5Fh ; _
		.db  55h ; U
		.db  4Ch ; L
		.db  46h ; F
		.db  49h ; I
		.db  45h ; E
		.db  41h ; A
		.db  46h ; F
		.db  53h ; S
		.db  50h ; P
		.db  4Dh ; M
		.db  4Bh ; K
		.db  4Eh ; N
		.db  4Eh ; N
		.db  4Ch ; L
		.db  50h ; P
		.db  52h ; R
		.db  58h ; X
		.db  6Dh ; m
		.db  71h ; q
		.db  75h ; u
		.db  67h ; g
		.db  5Eh ; ^
		.db  55h ; U
		.db  4Fh ; O
		.db  50h ; P
		.db  4Ch ; L
		.db  4Ah ; J
		.db  4Fh ; O
		.db  58h ; X
		.db  51h ; Q
		.db  50h ; P
		.db  52h ; R
		.db  51h ; Q
		.db  53h ; S
		.db  53h ; S
		.db  55h ; U
		.db  57h ; W
		.db  5Ch ; \
		.db  7Bh ; {
		.db  7Dh ; }
		.db  7Eh ; ~
		.db  73h ; s
		.db  65h ; e
		.db  5Eh ; ^
		.db  57h ; W
		.db  59h ; Y
		.db  59h ; Y
		.db  54h ; T
		.db  5Fh ; _
		.db  5Bh ; [
		.db  59h ; Y
		.db  57h ; W
		.db  59h ; Y
		.db  56h ; V
		.db  59h ; Y
		.db  59h ; Y
		.db  5Ch ; \
		.db  5Eh ; ^
		.db  60h ; `
		.db  7Ah ; z
		.db  83h ; ѓ
		.db  8Fh ; Џ
		.db  84h ; „
		.db  79h ; y
		.db  72h ; r
		.db  6Bh ; k
		.db  6Dh ; m
		.db  74h ; t
		.db  6Ah ; j
		.db  6Fh ; o
		.db  71h ; q
		.db  6Ch ; l
		.db  69h ; i
		.db  68h ; h
		.db  6Ch ; l
		.db  70h ; p
		.db  73h ; s
		.db  71h ; q
		.db  78h ; x
		.db  75h ; u
		.db  7Dh ; }
		.db  86h ; †
		.db  96h ; –
		.db  8Dh ; Ќ
		.db  8Ch ; Њ
		.db  8Fh ; Џ
		.db  8Bh ; ‹
		.db  8Ch ; Њ
		.db  94h ; ”
		.db  8Ch ; Њ
		.db  9Fh ; џ
		.db 0A2h ; ў
		.db  9Dh ; ќ
		.db  95h ; •
		.db 0ACh ; ¬
		.db 0AEh ; ®
		.db 0C0h ; А
		.db 0BEh ; ѕ
		.db 0B8h ; ё
		.db 0B7h ; ·
		.db 0B8h ; ё
		.db  84h ; „
		.db  89h ; ‰
		.db 0AAh ; Є
		.db  99h ; ™
		.db  92h ; ’
		.db  9Ch ; њ
		.db  9Ah ; љ
		.db 0A3h ; Ј
		.db 0B4h ; ґ
		.db 0A8h ; Ё
		.db 0B2h ; І
		.db 0C3h ; Г
		.db 0C9h ; Й
		.db 0D2h ; Т
		.db 0DAh ; Ъ
		.db 0E8h ; и
		.db 0EAh ; к
		.db 0E6h ; ж
		.db 0E5h ; е
		.db 0E0h ; а
		.db 0E2h ; в
		.db  84h ; „
		.db  89h ; ‰
		.db 0AAh ; Є
		.db  99h ; ™
		.db  92h ; ’
		.db  9Ch ; њ
		.db  9Ah ; љ
		.db 0A3h ; Ј
		.db  98h ; 
		.db  98h ; 
		.db  94h ; ”
		.db  94h ; ”
		.db 0A8h ; Ё
		.db 0BCh ; ј
		.db 0D5h ; Х
		.db 0DCh ; Ь
		.db 0E7h ; з
		.db 0EAh ; к
		.db 0E5h ; е
		.db 0E1h ; б
		.db 0E0h ; а
		.db  84h ; „
		.db  89h ; ‰
		.db 0AAh ; Є
		.db  99h ; ™
		.db  92h ; ’
		.db  9Ch ; њ
		.db  9Ah ; љ
		.db 0A3h ; Ј
		.db  98h ; 
		.db  98h ; 
		.db  94h ; ”
		.db  94h ; ”
		.db 0A8h ; Ё
		.db 0BCh ; ј
		.db 0D5h ; Х
		.db 0DCh ; Ь
		.db 0E7h ; з
		.db 0EAh ; к
		.db 0E5h ; е
		.db 0E4h ; д
		.db 0D8h ; Ш
		.db  06h		; 3d table
		.db  00h
		.db  0Fh
		.db  05h
		.db 0B9h ; №
		.db  07h
		.db  08h
		.db  0Dh
		.db  14h
		.db  14h
		.db  15h
		.db  16h
		.db  23h ; #
		.db  31h ; 1
		.db  30h ; 0
		.db  2Ch ; ,
		.db  30h ; 0
		.db  36h ; 6
		.db  3Bh ; ;
		.db  42h ; B
		.db  49h ; I
		.db  4Ah ; J
		.db  25h ; %
		.db  2Ah ; *
		.db  2Fh ; /
		.db  31h ; 1
		.db  39h ; 9
		.db  33h ; 3
		.db  3Ch ; <
		.db  44h ; D
		.db  3Ch ; <
		.db  39h ; 9
		.db  40h ; @
		.db  43h ; C
		.db  4Dh ; M
		.db  54h ; T
		.db  57h ; W
		.db  59h ; Y
		.db  41h ; A
		.db  47h ; G
		.db  47h ; G
		.db  40h ; @
		.db  5Ch ; \
		.db  49h ; I
		.db  56h ; V
		.db  56h ; V
		.db  4Eh ; N
		.db  45h ; E
		.db  4Ch ; L
		.db  53h ; S
		.db  5Bh ; [
		.db  62h ; b
		.db  63h ; c
		.db  6Ah ; j
		.db  68h ; h
		.db  71h ; q
		.db  6Dh ; m
		.db  5Eh ; ^
		.db  7Bh ; {
		.db  6Ah ; j
		.db  75h ; u
		.db  70h ; p
		.db  64h ; d
		.db  59h ; Y
		.db  60h ; `
		.db  69h ; i
		.db  76h ; v
		.db  7Eh ; ~
		.db  7Bh ; {
		.db  7Dh ; }
		.db  83h ; ѓ
		.db  92h ; ’
		.db  93h ; “
		.db  80h ; Ђ
		.db  8Eh ; Ћ
		.db  8Dh ; Ќ
		.db  96h ; –
		.db 0A1h ; Ў
		.db  94h ; ”
		.db  8Ch ; Њ
		.db  91h ; ‘
		.db 0C0h ; А
		.db 0C7h ; З
		.db 0C8h ; И
		.db 0B4h ; ґ
		.db 0B3h ; і
		.db  7Ch ; |
		.db 0B8h ; ё
		.db 0BCh ; ј
		.db 0AEh ; ®
		.db 0BEh ; ѕ
		.db 0C5h ; Е
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0D8h ; Ш
		.db 0DAh ; Ъ
		.db 0ECh ; м
		.db 0F5h ; х
		.db 0F6h ; ц
		.db 0F6h ; ц
		.db 0E4h ; д
		.db 0DEh ; Ю
		.db  7Ch ; |
		.db 0B8h ; ё
		.db 0BCh ; ј
		.db 0AEh ; ®
		.db 0BCh ; ј
		.db 0C8h ; И
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0B0h ; °
		.db 0DAh ; Ъ
		.db 0ECh ; м
		.db 0F2h ; т
		.db 0F4h ; ф
		.db 0F5h ; х
		.db 0F0h ; р
		.db 0E0h ; а
		.db  7Ch ; |
		.db 0B8h ; ё
		.db 0BCh ; ј
		.db 0AEh ; ®
		.db 0BCh ; ј
		.db 0C8h ; И
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0B0h ; °
		.db 0DAh ; Ъ
		.db 0ECh ; м
		.db 0F2h ; т
		.db 0F4h ; ф
		.db 0F5h ; х
		.db 0F0h ; р
		.db 0E0h ; а
		.db  05h		; 3d table
		.db  80h ; Ђ
		.db  06h
		.db  02h
		.db 0BAh ; є
		.db  07h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  02h
		.db  05h
		.db  05h
		.db  00h
		.db  00h
		.db  00h
		.db  02h
		.db  05h
		.db  0Ch
		.db  0Ch
		.db  00h
		.db  08h
		.db  08h
		.db  0Ah
		.db  0Ch
		.db  14h
		.db  14h
		.db  00h
		.db  0Ah
		.db  0Ah
		.db  0Ch
		.db  14h
		.db  14h
		.db  14h
		.db  00h
		.db  0Ah
		.db  0Ah
		.db  14h
		.db  14h
		.db  18h
		.db  18h
		.db  00h
		.db  0Ah
		.db  0Ah
		.db  14h
		.db  17h
		.db  18h
		.db  1Dh
		.db  06h		; 3d table
		.db  00h
		.db  04h
		.db  02h
		.db  00h
		.db  04h
		.db  8Dh ; Ќ
		.db  8Dh ; Ќ
		.db  8Dh ; Ќ
		.db  8Dh ; Ќ
		.db  8Dh ; Ќ
		.db  83h ; ѓ
		.db  5Ah ; Z
		.db  5Ah ; Z
		.db  57h ; W
		.db  64h ; d
		.db  55h ; U
		.db  55h ; U
		.db  50h ; P
		.db  4Bh ; K
		.db  4Bh ; K
		.db  50h ; P
		.db  50h ; P
		.db  50h ; P
		.db  4Bh ; K
		.db  41h ; A
		.db  4Bh ; K
		.db  41h ; A
		.db  31h ; 1
		.db  31h ; 1
		.db  31h ; 1
		.dw 0000h		; other2d table	VTA
		.dw 0308h
		.db  06h
		.db  04h
		.db  00h
		.db  0Eh
		.db  17h
		.db  58h ; X
		.db  37h ; 7
		.db  3Dh ; =
		.db  56h ; V
		.db  29h ; )
		.db  75h ; u
		.db  22h ; "
		.db  94h ; ”
		.db  1Ah
		.db 0B4h ; ґ
		.db  12h
		.db 0D5h ; Х
		.db  0Eh
		.db 0E4h ; д
		.db  0Eh
		.db 040
		.db 096
		.db 0FFh
		.db  92h ; ’
		.db  72h ; r
		.db  5Dh ; ]
		.db  4Fh ; O
		.db  44h ; D
		.db  3Ch ; <
		.db  04h
		.db  63h ; c
		.db 0FFh
		.db 0C4h ; Д
		.db 0A0h ;  
		.db 0E4h ; д
		.db  40h ; @
		.db 070			; Bvolts, 5.46v
		.db 032			; totals to 7.9
		.db 0A9h ; ©
		.db  94h ; ”
		.db  80h ; Ђ
		.db 083			; offset (6.48V)
		.db 128			; 16.48V
		.db 0C3h
		.db 67h
		.db  45h ; E
		.db  32h ; 2
		.db  22h ; "
		.db  1Eh
		.db 0C0h ; А
		.db  33h ; 3
		.db  1Dh
		.db  13h
		.db  0Fh
		.db  0Dh
		.db  0Ah
		.db  00h
		.db  1Eh
		.db 0C0h ; А
		.db  3Ch ; <
		.db  26h ; &
		.db  1Bh
		.db  14h
		.db  0Fh
		.db  0Ch
		.db  00h
		.db  30h ; 0
		.db  40h ; @
		.db  80h ; Ђ
		.db  5Ah ; Z
		.db  33h ; 3
		.db  30h ; 0
		.db  40h ; @
		.db  9Ah ; љ
		.db  7Ah ; z
		.db  4Dh ; M
		.db  5Dh ; ]
		.db  40h ; @
		.db  0Dh
		.db  09h
		.db  04h
		.db  1Eh
		.db 0C0h ; А
		.db  48h ; H
		.db  36h ; 6
		.db  2Ah ; *
		.db  24h ; $
		.db  18h
		.db  13h
		.db  0Ah
		.db  1Eh
		.db  40h ; @
		.db  9Ah ; љ
		.db  40h ; @
		.db  00h
		.db  1Dh
		.db 0A0h ;  
		.db 0B0h ; °
		.db  9Dh ; ќ
		.db  8Fh ; Џ
		.db  81h ; Ѓ
		.db  74h ; t
		.db  62h ; b
		.db  26h ; &
		.db 0C0h ; А
		.db  64h ; d
		.db  58h ; X
		.db  44h ; D
		.db  30h ; 0
		.db  28h ; (
		.db  60h ; `
		.db 0A4h ; ¤
		.db  52h ; R
		.db  58h ; X
		.db  66h ; f
		.db  48h ; H
		.db  40h ; @
		.db  03h
		.db  05h
		.db  06h
		.db  08h
		.db  0Ch
		.db  00h
		.db  80h ; Ђ
		.db  00h
		.db  00h
		.db  0Ah
		.db  0Fh
		.db  13h
		.db  04h
		.db  80h ; Ђ
		.db  05h
		.db 0A4h ; ¤
		.db  9Ch ; њ
		.db  5Ch ; \
		.db  5Ch ; \
		.db  4Ch ; L
		.db  3Ch ; <
		.db  04h
		.db  80h ; Ђ
		.db  05h
		.db  9Ch ; њ
		.db  5Ch ; \
		.db  5Ch ; \
		.db  5Ch ; \
		.db  4Ch ; L
		.db  3Ch ; <
		.db  1Eh
		.db 0C0h ; А
		.db  00h
		.db  02h
		.db  0Dh
		.db  33h ; 3
		.db  04h		; a two	d table
		.db  20h
		.db  52h ; R
		.db  3Ch ; <
		.db  62h ; b
		.db  50h ; P
		.db  62h ; b
		.db  00h		; lower	bound
		.db  80h ; Ђ		; delta	bound
		.db  00h		; minimum pointed to
		.db  05h
		.db  0Dh
		.db  04h
		.db  39h ; 9
		.db 0BCh ; ј
		.db  51h ; Q
		.db 0BCh ; ј
		.db 0E4h ; д		; max pointed
		.db  3Fh ; ?
		.db  1Ch
		.db  08h
		.db  00h
		.db  2Bh ; +
		.db  00h
		.db  6Bh ; k
		.db  00h
		.db  2Bh ; +
		.db  00h
		.db  81h ; Ѓ
		.db 0FEh ; ю
		.db 0FEh ; ю
		.db 0FBh ; ы
		.db 0FBh ; ы
		.db 0FBh ; ы
		.db  05h
		.db  06h
		.db  05h
		.db  0Dh
		.db  09h
		.db  50h ; P
		.db  80h ; Ђ
		.db 0E3h ; г
		.db 0E3h ; г
		.db  01h
		.db  00h
		.db  03h
		.db  38h ; 8
		.db  42h ; B
		.db  4Dh ; M
		.db  57h ; W
		.db  01h
		.db  00h
		.db  03h
		.db  17h
		.db  21h ; !
		.db  2Bh ; +
		.db  34h ; 4
		.db  02h		; other2d table
		.db  80h ; Ђ
		.db  07h
		.db  18h
		.db  18h
		.db  20h
		.db  28h ; (
		.db  38h ; 8
		.db  48h ; H
		.db  48h ; H
		.db  48h ; H
		.db  02h		; twoD
		.db  1Ch
		.db  1Fh
		.db  80h ; Ђ
		.db  48h ; H
		.db  08h		; two d	table
		.db  1Bh
		.db  40h ; @
		.db  3Ch ; <
		.db  40h ; @
		.db  5Ch ; \
		.db  39h ; 9
		.db  7Ch ; |
		.db  23h ; #
		.db  9Ch ; њ
		.db  01h
		.db  06h
		.db  03h
		.db  00h
		.db  05h
		.db  13h
		.db  08h
		.db  1Bh
		.db  0Ah
		.db  66h ; f
		.db  30h ; 0
		.db  30h ; 0
		.db  62h ; b
		.db  62h ; b
		.db  49h ; I
		.db  31h ; 1
		.db  00h		; other2d
		.db  80h ; Ђ
		.db  03h
		.db  5Ah ; Z
		.db  80h ; Ђ
		.db 0A0h ;  
		.db 0A0h ;  
		.db  00h		; other2d
		.db  80h ; Ђ
		.db  03h
		.db  40h ; @
		.db  60h ; `
		.db  80h ; Ђ
		.db 0A0h ;  
		.db  01h
		.db  00h
		.db  01h
		.db  1Ah
		.db  80h ; Ђ
		.db  00h		; other2d
		.db  80h ; Ђ
		.db  03h
		.db  33h ; 3
		.db  4Dh ; M
		.db  6Bh ; k
		.db  6Bh ; k
		.db  08h		; twoD
		.db  17h
		.db  60h ; `
		.db  39h ; 9
		.db  4Dh ; M
		.db  6Bh ; k
		.db  46h ; F
		.db  9Dh ; ќ
		.db  40h ; @
		.db 0C4h ; Д
		.db  40h ; @
		.db  00h		; other2d
		.db  80h ; Ђ
		.db  03h
		.db  4Dh ; M
		.db  66h ; f
		.db  80h ; Ђ
		.db  80h ; Ђ
		.db  08h		; twoD
		.db  17h
		.db  5Dh ; ]
		.db  39h ; 9
		.db  53h ; S
		.db  6Bh ; k
		.db  40h ; @
		.db  9Dh ; ќ
		.db  30h ; 0
		.db 0C4h ; Д
		.db  40h ; @
		.db  00h		; other2d
		.db  80h ; Ђ
		.db  03h
		.db  4Bh ; K
		.db  4Bh ; K
		.db  4Bh ; K
		.db  4Bh ; K
		.db  00h		; other2d
		.db  80h ; Ђ
		.db  03h
		.db  40h ; @
		.db  69h ; i
		.db  69h ; i
		.db  69h ; i
		.db  08h		; twoD
		.db  17h
		.db  32h ; 2
		.db  39h ; 9
		.db  2Ch ; ,
		.db  6Bh ; k
		.db  20h
		.db  9Dh ; ќ
		.db  00h
		.db 0C4h ; Д
		.db  00h
		.db  0Ah
		.db  17h
		.db  50h ; P
		.db  39h ; 9
		.db  30h ; 0
		.db  6Bh ; k
		.db  28h ; (
		.db  9Dh ; ќ
		.db  14h
		.db 0C4h ; Д
		.db  0Ch
		.db 0E4h ; д
		.db  00h
		.db  0Ah
		.db  17h
		.db  70h ; p
		.db  39h ; 9
		.db  50h ; P
		.db  6Bh ; k
		.db  48h ; H
		.db  9Dh ; ќ
		.db  30h ; 0
		.db 0C4h ; Д
		.db  10h
		.db 0E4h ; д
		.db  00h
		.db  01h
		.db  00h
		.db  04h
		.db  80h ; Ђ
		.db  73h ; s
		.db  53h ; S
		.db  3Dh ; =
		.db  26h ; &
		.db  00h
		.db 0DCh ; Ь
		.db  04h
		.db  00h
		.db  0Ch
		.db  17h
		.db  38h ; 8
		.db  66h ; f
		.db  00h
		.db  10h
		.db  04h
		.db  02h
		.db  10h
		.db  24h ; $
		.db  01h		; 3d table
		.db  00h
		.db  05h
		.db  00h
		.db 0DCh ; Ь
		.db  04h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  00h
		.db  15h
		.db  11h
		.db  09h
		.db  00h
		.db  00h
		.db  00h
		.db  1Eh
		.db  2Fh ; /
		.db  2Fh ; /
		.db  2Fh ; /
		.db  2Fh ; /
		.db  00h
		.db  1Eh
		.db  2Fh ; /
		.db  2Fh ; /
		.db  2Fh ; /
		.db  2Fh ; /
		.db  01h		; 3d table
		.db  00h
		.db  13h
		.db  00h
		.db 0B8h ; ё
		.db  09h
		.db  45h ; E
		.db  45h ; E
		.db  45h ; E
		.db  45h ; E
		.db  5Ah ; Z
		.db  6Fh ; o
		.db  9Ah ; љ
		.db 0C5h ; Е
		.db 0DAh ; Ъ
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db  45h ; E
		.db  6Fh ; o
		.db  91h ; ‘
		.db 0AFh ; Ї
		.db 0C5h ; Е
		.db 0CDh ; Н
		.db 0DAh ; Ъ
		.db 0E3h ; г
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db  45h ; E
		.db  63h ; c
		.db  78h ; x
		.db  9Ah ; љ
		.db 0A7h ; §
		.db 0BCh ; ј
		.db 0CDh ; Н
		.db 0DAh ; Ъ
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db  23h ; #
		.db  45h ; E
		.db  67h ; g
		.db  85h ; …
		.db  8Dh ; Ќ
		.db  9Eh ; ћ
		.db 0BCh ; ј
		.db 0CDh ; Н
		.db 0DAh ; Ъ
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db 0EBh ; л
		.db  0Fh
		.db  34h ; 4
		.db  56h ; V
		.db  74h ; t
		.db  7Ch ; |
		.db  8Dh ; Ќ
		.db 0A3h ; Ј
		.db 0B4h ; ґ
		.db 0C9h ; Й
		.db 0D1h ; С
		.db 0D6h ; Ц
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db 0DAh ; Ъ
		.db  0Fh
		.db  1Eh
		.db  4Dh ; M
		.db  63h ; c
		.db  6Bh ; k
		.db  78h ; x
		.db  89h ; ‰
		.db  96h ; –
		.db 0ABh ; «
		.db 0B4h ; ґ
		.db 0BCh ; ј
		.db 0C5h ; Е
		.db 0C9h ; Й
		.db 0CDh ; Н
		.db 0CDh ; Н
		.db 0C5h ; Е
		.db 0C0h ; А
		.db 0C5h ; Е
		.db 0C5h ; Е
		.db 0C5h ; Е
		.db  0Fh
		.db  1Eh
		.db  49h ; I
		.db  4Dh ; M
		.db  56h ; V
		.db  67h ; g
		.db  71h ; q
		.db  80h ; Ђ
		.db 0A3h ; Ј
		.db 0AFh ; Ї
		.db 0A7h ; §
		.db 0A3h ; Ј
		.db 0B4h ; ґ
		.db 0C0h ; А
		.db 0C5h ; Е
		.db 0AFh ; Ї
		.db 0A7h ; §
		.db 0AFh ; Ї
		.db 0AFh ; Ї
		.db 0AFh ; Ї
		.db  0Fh
		.db  1Eh
		.db  49h ; I
		.db  48h ; H
		.db  4Dh ; M
		.db  63h ; c
		.db  6Ch ; l
		.db  78h ; x
		.db  89h ; ‰
		.db  94h ; ”
		.db  91h ; ‘
		.db  85h ; …
		.db  9Ah ; љ
		.db 0AFh ; Ї
		.db 0BCh ; ј
		.db 0ABh ; «
		.db  9Ah ; љ
		.db 0A7h ; §
		.db 0A7h ; §
		.db 0A7h ; §
		.db  0Fh
		.db  1Eh
		.db  49h ; I
		.db  48h ; H
		.db  4Dh ; M
		.db  63h ; c
		.db  6Ch ; l
		.db  78h ; x
		.db  85h ; …
		.db  91h ; ‘
		.db  8Dh ; Ќ
		.db  80h ; Ђ
		.db  8Dh ; Ќ
		.db 0ABh ; «
		.db 0AFh ; Ї
		.db 0A7h ; §
		.db  91h ; ‘
		.db 0A3h ; Ј
		.db 0A3h ; Ј
		.db 0A3h ; Ј
		.db  0Fh
		.db  1Eh
		.db  49h ; I
		.db  48h ; H
		.db  4Dh ; M
		.db  63h ; c
		.db  6Ch ; l
		.db  78h ; x
		.db  85h ; …
		.db  91h ; ‘
		.db  8Dh ; Ќ
		.db  80h ; Ђ
		.db  85h ; …
		.db  9Ah ; љ
		.db 0A3h ; Ј
		.db  9Eh ; ћ
		.db  80h ; Ђ
		.db  98h ; 
		.db  9Eh ; ћ
		.db  9Eh ; ћ
		.db  20h
		.db 0C0h ; А
		.db  3Bh ; ;
		.db  44h ; D
		.db  4Ch ; L
		.db  55h ; U
		.db  5Eh ; ^
		.db  77h ; w
		.db  80h ; Ђ
		.db  04h
		.db  51h ; Q
		.db  30h ; 0
		.db  9Dh ; ќ
		.db  1Ch
		.db 0D1h ; С
		.db  10h
		.db  08h
		.db  0Ch
		.db 0E7h ; з
		.db  10h
		.db  00h
		.db  14h
		.db  00h
		.db  20h
		.db  00h
		.db  26h ; &
		.db 0E7h ; з
		.db  04h
		.db  10h
		.db  2Bh ; +
		.db  22h ; "
		.db  45h ; E
		.db  68h ; h
		.db  78h ; x
		.db  1Ah
		.db  6Fh ; o
		.db  5Ah ; Z
		.db  6Fh ; o
		.db  40h ; @
		.db  50h ; P
		.db  15h
		.db  1Eh
		.db  1Eh
		.db  1Eh
		.db  1Ah
		.db  00h
		.db  1Eh
		.db 0C0h ; А
		.db 0ABh ; «
		.db 0ABh ; «
		.db 0A6h ; ¦
		.db  9Eh ; ћ
		.db  95h ; •
		.db  89h ; ‰
		.db  80h ; Ђ
		.db  1Eh
		.db 0C0h ; А
		.db 0ABh ; «
		.db 0ABh ; «
		.db  9Eh ; ћ
		.db  7Ch ; |
		.db  66h ; f
		.db  6Fh ; o
		.db  80h ; Ђ
		.db  55h ; U
		.db  80h ; Ђ
		.db  0Ch
		.db  0Ch
		.db  1Eh
		.db  40h ; @
		.db  6Ah ; j
		.db  20h
		.db  60h ; `
		.db  0Ch
		.db  17h
		.db  22h ; "
		.db  27h ; '
		.db  00h
		.db  80h ; Ђ
		.db  00h
		.db  0Dh
		.db  1Ah
		.db  22h ; "
		.db  2Bh ; +
		.db  4Fh ; O
		.db  40h ; @
		.db  80h ; Ђ
		.db  80h ; Ђ
		.db  0Eh
		.db  26h ; &
		.db  64h ; d
		.db  39h ; 9
		.db  5Ah ; Z
		.db  51h ; Q
		.db  52h ; R
		.db  6Bh ; k
		.db  4Ah ; J
		.db  85h ; …
		.db  40h ; @
		.db 0B2h ; І
		.db  29h ; )
		.db 0E4h ; д
		.db  08h
		.db 0E5h ; е
		.db  00h
		.db  06h
		.db  39h ; 9
		.db  1Ah
		.db  51h ; Q
		.db  12h
		.db  85h ; …
		.db  0Ah
		.db 0DCh ; Ь
		.db  0Ah
		.db  3Ch ; <
		.db  60h ; `
		.db  00h
		.db  26h ; &
		.db  33h ; 3
		.db  33h ; 3
		.db  9Ah ; љ
		.db  9Ah ; љ
		.db 0B0h ; °
		.db 0B0h ; °
		.db  00h
		.db  00h
		.db  6Ah ; j
		.db  7Ah ; z
		.db  85h ; …
		.db  95h ; •
		.db 0FFh
		.db  83h ; ѓ
		.db  81h ; Ѓ
		.db  80h ; Ђ
		.db  7Fh ; 
		.db  7Dh ; }
		.db  6Ah ; j
		.db  7Ah ; z
		.db  85h ; …
		.db  95h ; •
		.db 0FFh
		.db  83h ; ѓ
		.db  81h ; Ѓ
		.db  80h ; Ђ
		.db  7Fh ; 
		.db  7Dh ; }
		.db  0Dh
		.db  33h ; 3
		.db  92h ; ’
		.db  40h ; @
		.db  33h ; 3
		.db  00h
		.db  1Ah
		.db  0Ah
		.db  50h ; P
		.db  60h ; `
		.db  00h
		.db  66h ; f
		.db 0FFh
		.db 0FFh
		.db  73h ; s
		.db  60h ; `
		.db  1Fh
		.db  31h ; 1
		.db  3Fh ; ?
		.db  49h ; I
		.db  0Ch
		.db  26h ; &
		.db 0F3h ; у
		.db  51h ; Q
		.db 0F1h ; с
		.db  6Bh ; k
		.db 0E8h ; и
		.db  85h ; …
		.db 0D7h ; Ч
		.db 0B2h ; І
		.db 0B6h ; ¶
		.db 0D1h ; С
		.db 0AEh ; ®
		.db 0E4h ; д
		.db 0A9h ; ©
		.db  04h
		.db  28h ; (
		.db  3Dh ; =
		.db  50h ; P
		.db  52h ; R
		.db 0C8h ; И
		.db  66h ; f
		.db  04h
		.db  28h ; (
		.db  33h ; 3
		.db  50h ; P
		.db  48h ; H
		.db 0C8h ; И
		.db  66h ; f
		.db  08h
		.db  0Fh
		.db  0Fh
		.db  08h		; twoD
		.db  18h
		.db 0EFh ; п
		.db  48h ; H
		.db 0EFh ; п
		.db  68h ; h
		.db 0EFh ; п
		.db  88h ; €
		.db 0ABh ; «
		.db 0A0h ;  
		.db  22h ; "
		.db 028
		.db 072
		.db 104
		.db 136
		.db 154
		.db  77h ; w
		.db  77h ; w
		.db  33h ; 3
		.db  11h
		.db  11h
		.dw 0E600h
		.dw 3300h
		.db 0E6h ; ж
		.db  33h ; 3
		.db 0CDh ; Н
		.db  1Ah
		.db 0CDh ; Н
		.db  1Ah
		.db 0CDh ; Н
		.db  1Ah
		.db 0CDh ; Н
		.db  1Ah
		.db 0CDh ; Н
		.db  1Ah
		.db 0CDh ; Н
		.db  1Ah
		.db 0B3h ; і
		.db  4Dh ; M
		.db  14h
		.db  03h
		.db 0E6h ; ж
		.db  1Ah
		.db  88h ; €
		.db  78h ; x
		.db  02h
		.db  66h ; f
		.db  01h
		.db  9Ah ; љ
		.db 0A0h ;  		; vec 0	more data
		.db  6Ch ; l
		.dw 16250		; max PW = 65ms
		.dw 00175		; min PW = 700us
		.db  02h
		.db 0D6h ; Ц
		.db  01h
		.db  09h
		.db  78h ; x
		.db  45h ; E
		.db  0Ah
		.db  66h ; f
		.db  04h
		.db  00h
		.db 251			; vec 1	VTA bounds
		.db 005
		.db  31h ; 1		; vec 1	more data
		.db  05h
		.db 0B4h ; ґ
		.db  2Ah ; *
		.db 0FCh ; ь		; vec 3
		.db  07h
		.db 0FCh		; vec 2
		.db  07h
		.db 0E6h ; ж		; vec 0	data
		.db  1Ah
		.dw 0CCCDh
		.dw 199Ah
		.db  19h
		.db  00h
		.db  00h
		.db  00h

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; bounding sub:	bounds and flags data that exceeds range specified by pointer in Y. carry is set if saturation occurs

BoundAccB:				; CODE XREF: __RESET+87Fp __RESET+933p ...
		dec	y
		cmp	b, y + 01h
		bgt	loc_C8FE	; branch if b>const data (no carry or zero), trashes everything
		ld	a, y + 01h	; load a with constant (b was lower than bound)
		bra	loc_C8F9	; later, if b exceeds minimum, b remains untouched for the ret
; End of function BoundAccB


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


BoundAccD:				; CODE XREF: sub_D0C6+5Dp sub_D41C+3Bp ...
		cmp	d, y + 00h
		bgt	loc_C8FE
		inc	y

loc_C8F9:				; CODE XREF: BoundAccB+7j
		inc	y
		cmp	d, y + 00h
		bcc	locret_C901

loc_C8FE:				; CODE XREF: BoundAccB+3j BoundAccD+2j
		ld	d, y + 00h
		setc

locret_C901:				; CODE XREF: BoundAccD+8j
		ret
; End of function BoundAccD


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


		; public __RESET
__RESET:				; DATA XREF: ROM:FFFEo

; FUNCTION CHUNK AT CB1D SIZE 00000039 BYTES
; FUNCTION CHUNK AT CBAA SIZE 0000016B BYTES
; FUNCTION CHUNK AT CD1F SIZE 00000162 BYTES
; FUNCTION CHUNK AT CE98 SIZE 0000003B BYTES
; FUNCTION CHUNK AT CEDA SIZE 00000027 BYTES
; FUNCTION CHUNK AT CF10 SIZE 00000013 BYTES
; FUNCTION CHUNK AT CF34 SIZE 000000FC BYTES
; FUNCTION CHUNK AT D03A SIZE 0000008C BYTES
; FUNCTION CHUNK AT D166 SIZE 0000005F BYTES
; FUNCTION CHUNK AT D1C8 SIZE 000000D2 BYTES
; FUNCTION CHUNK AT D2EB SIZE 00000068 BYTES
; FUNCTION CHUNK AT D35E SIZE 000000B7 BYTES
; FUNCTION CHUNK AT D5CF SIZE 00000276 BYTES
; FUNCTION CHUNK AT D999 SIZE 00000060 BYTES
; FUNCTION CHUNK AT DA35 SIZE 00000075 BYTES
; FUNCTION CHUNK AT DAD0 SIZE 00000028 BYTES
; FUNCTION CHUNK AT DB06 SIZE 00000023 BYTES
; FUNCTION CHUNK AT DBA0 SIZE 0000010A BYTES
; FUNCTION CHUNK AT DF32 SIZE 00000040 BYTES
; FUNCTION CHUNK AT DF78 SIZE 00000003 BYTES
; FUNCTION CHUNK AT E2F6 SIZE 000001FE BYTES
; FUNCTION CHUNK AT E567 SIZE 00000066 BYTES
; FUNCTION CHUNK AT E5FB SIZE 00000166 BYTES
; FUNCTION CHUNK AT E802 SIZE 0000012C BYTES
; FUNCTION CHUNK AT E943 SIZE 000000F6 BYTES
; FUNCTION CHUNK AT EA43 SIZE 00000003 BYTES
; FUNCTION CHUNK AT EDD2 SIZE 00000012 BYTES

		ld	#07h, OMODE	; Mode control Register
		di
		ld	#00h, PORTA	; Port A Data Register
		ld	#00001101b, DDRA ; Port	A i/o config
		clr	PORTAL		; Port A Latch
		ld	#0BBh, PORTB	; Port B Data Register
		ld	#10111011b, DDRB ; Port	B i/o config
		clr	PBCS		; Port B Control Register
		ld	#48h, ASR0P	; ASR0 pos edge	counter	value MSB
		ld	#08h, SMRC2	; SMRC2
		ld	#38h, ASR0NL	; ASR0 neg edge	counter	value LSB
		ld	#30h, ASR0N	; ASR0 neg edge	counter	value MSB
		ld	#0A0h, ASR0PL	; ASR0 pos edge	counter	value LSB
		ld	#00h, PORTD_ASRIN ; Port D Data	Register / ASR Input Data
		ld	#0B2h, TAIT	; Timer	ASR Control
		ld	#0FCh, ASR1P	; ASR1 pos edge	counter	value MSB
		ld	#00h, DOUT	; DOUT Data Register
		ld	#00h, DOM	; DOUT Control Register
		ld	#30h, SMRC_SIR	; Serial Master	Register Control
		ld	#00h, SSD	; Serial Status	Data Register
		ld	a, SSD		; Serial Status	Data Register
		ld	a, SIDR_SODR	; Serial Input/Output Data Register
		clrb	bit3, SSD
		clr	a
		clr	b
		st	d, IRQL		; Interrupt Request Flag MSB
		st	d, IMASK	; Interrupt Request Mask MSB
		ld	s, #02FFh
		clrb	bit7, PORTB

loc_C94B:				; CODE XREF: sub_E775+40j
		clr	a
		clr	b
		ld	y, #0040h

clearLowRAM:				; CODE XREF: __RESET+52j
		st	d, [y]
		cmp	y, #007Eh
		ble	clearLowRAM
		ld	y, #00A0h

clearHghRAM:				; CODE XREF: __RESET+5Bj
		st	d, [y]
		cmp	y, #01F6h
		ble	clearHghRAM
		setb	bit0, flags_40	; init
		setb	bit1, flags_40	; init
		dec	count_A4	; init to FF
		setb	bit3, flags_42	; init
		setb	bit2, flags_42	; init
		setb	bit6, flags_42	; init
		ld	a, unk_F4
		or	a, #09h
		st	a, unk_F4
		ld	d, #0FFFFh
		st	a, count_BD	; init to FF
		st	a, count_A0	; init to FF
		st	a, count_B0	; init to FF
		st	a, count_B2	; init to FF
		st	a, count_C6	; init to FF
		st	a, unk_7A
		ld	#00h, flags_41	; b1 set under 1200RPM
		jsr	tweak106	; init engine phase and	timing variables
		ld	d, #00050	; 200us
		st	d, word_145	; initialize
		ld	a, #80h
		st	a, unk_1E6
		st	a, unk_F5
		ld	a, #78h
		st	a, unk_155
		st	a, unk_156
		ld	a, #0A4h
		st	a, unk_153
		ld	d, #0CCCDh
		st	d, word_1E0
		st	d, word_1E2
		st	d, word_1DC
		ld	d, #8000h
		st	d, word_11C	; init
		ld	a, #0FEh
		st	a, count_AA
		ld	a, #0FFh
		st	a, unk_180
		st	a, unk_18F
		ld	a, #0FEh
		st	a, unk_17B
		setb	bit6, flags_46
		ld	a, #05h
		st	a, byte_186	; last 183
		ld	d, #00125	; 500us
		st	d, word_187	; last 184
		ld	#0DEh, unk_6D
		ld	a, #0A9h
		st	a, unk_1B1
		ld	a, word_98
		tbbs	bit0, flags_42,	loc_C9DF ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	a, #69h

loc_C9DF:				; CODE XREF: __RESET+D8j
		st	a, unk_1B3
		ld	d, word_9A
		xor	b, #0FFh
		cmp	a, b
		bne	loc_C9ED
		cmpb	a, #01h
		beq	loc_C9EF

loc_C9ED:				; CODE XREF: __RESET+E5j
		setb	bit7, flags_43

loc_C9EF:				; CODE XREF: __RESET+E9j
		jsr	sub_F937
		jsr	sub_F937
		ld	#08h, IMASKL	; Interrupt Request Mask LSB
		ei
		tbs	bit7, PORTB	; Port B Data Register
		beq	loc_C9FF
		clrb	bit7, PORTB

loc_C9FF:				; CODE XREF: __RESET+F9j
		ld	a, SSD		; Serial Status	Data Register
		ld	a, #0Eh

loc_CA03:				; CODE XREF: __RESET+10Fj
		mov	a, b

loc_CA04:				; CODE XREF: __RESET+119j
		clrb	bit1, flags_42
		st	b, unk_112	; last ADC conversion vector
		setb	bit1, SSD
		st	b, SIDR_SODR	; Serial Input/Output Data Register

loc_CA0D:				; CODE XREF: __RESET:loc_CA0Dj
		tbbc	bit1, flags_42,	loc_CA0D ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		dec	a
		bpz	loc_CA03
		cmp	b, #09h
		beq	loc_CA1D
		ld	b, #09h
		ld	a, #00h
		bra	loc_CA04
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CA1D:				; CODE XREF: __RESET+113j
		ld	a, #00h
		st	a, unk_112	; last ADC conversion vector
		ld	d, PIM		; adc vector 0,	probably PIM (map signal)
		st	d, unk_54	; init
		jsr	sub_E17D
		tbbs	bit4, flags_49,	loc_CA37 ; no bits set or cleared overtly
		tbbc	bit7, flags_4A,	loc_CA37
		setb	bit7, flags_40
		ld	a, flags_4E
		or	a, #14h
		st	a, flags_4E

loc_CA37:				; CODE XREF: __RESET+127j __RESET+12Aj
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		clr	PORTAL		; Port A Latch
		clr	IRQLL		; Interrupt Request Flag LSB
		clr	IRQL		; Interrupt Request Flag MSB

MAIN:					; CODE XREF: __RESET+24DFj
		ld	d, #11CAh
		st	d, IMASK	; Interrupt Request Mask MSB
		ld	s, #02FFh
		ei
		setb	bit1, flags_42
		clr	count_A6
		clrb	bit1, DOM
		clrb	bit2, DOM
		clrb	bit3, DOM
		ld	#30h, SMRC_SIR	; Serial Master	Register Control
		clrb	bit3, SSD
		di
		ld	a, TAIT		; Timer	ASR Control
		and	a, #20h
		or	a, #92h
		st	a, TAIT		; Timer	ASR Control
		ei
		ld	#0Dh, DDRA	; Port A i/o config
		ld	#0BBh, DDRB	; Port B i/o config
		ld	#0A0h, ASR0PL	; ASR0 pos edge	counter	value LSB
		ld	#48h, ASR0P	; ASR0 pos edge	counter	value MSB
		ld	#0FCh, ASR1P	; ASR1 pos edge	counter	value MSB
		ld	#38h, ASR0NL	; ASR0 neg edge	counter	value LSB
		ld	#08h, SMRC2	; SMRC2
		clr	PBCS		; Port B Control Register

loc_CA80:				; Built-in RAM status
		tbs	bit5, RAMST
		bne	loc_CA8A
		clr	count_AC
		clrb	bit2, DOUT
		clrb	bit5, flags_46

loc_CA8A:				; CODE XREF: __RESET+180j
		tbbs	bit4, IRQLL, loc_CA90 ;	Interrupt Request Flag LSB
		tbbc	bit4, PORTD_ASRIN, loc_CA94 ; Port D Data Register / ASR Input Data

loc_CA90:				; CODE XREF: __RESET:loc_CA8Aj
		clrb	bit4, IRQLL
		clr	count_AD

loc_CA94:				; CODE XREF: __RESET+18Bj
		tbbc	bit5, RAMST, loc_CABF ;	Built-in RAM status
		tbs	bit7, RAMST	; Built-in RAM status
		beq	loc_CAB8
		cmp	#5Ah, word_9C
		bne	loc_CAB8
		ld	y, #0080h

loc_CAA3:				; CODE XREF: __RESET+1A9j
		cmp	y, #009Eh
		bcc	loc_CAAF
		ld	d, [y]
		add	a, b
		inc	a
		beq	loc_CAA3
		bra	loc_CAB8
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CAAF:				; CODE XREF: __RESET+1A4j
		ld	b, word_94
		ld	y, #0C8DBh
		jsr	y + 10h		; sat routine
		bcc	loc_CABA

loc_CAB8:				; CODE XREF: __RESET+197j __RESET+19Cj ...
		bsr	sub_CAC1

loc_CABA:				; CODE XREF: __RESET+1B4j
		tbbc	bit5, RAMST, loc_CABF ;	Built-in RAM status
		setb	bit0, flags_42

loc_CABF:				; CODE XREF: __RESET:loc_CA94j
					; __RESET:loc_CABAj
		bra	loc_CB1D
; End of function __RESET


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_CAC1:				; CODE XREF: __RESET:loc_CAB8p
					; __RESET:loc_D18Ep ...
		clr	word_9C
		ld	d, #00FFh
		ld	y, #0080h
		st	d, [y]
		st	d, [y]
		st	d, [y]
		clr	flags_4C	; bit3 - PIM bad
		clr	flags_4D
		ld	a, flags_4E
		and	a, #14h
		st	a, flags_4E
		clrb	bit2, flags_4B
		ld	d, #807Fh
		ld	y, #0086h

loc_CADE:				; CODE XREF: sub_CAC1+21j
		st	d, [y]
		cmp	y, #0092h
		ble	loc_CADE
		ld	d, #9C63h
		tbbs	bit5, flags_40,	loc_CAED ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, #807Fh

loc_CAED:				; CODE XREF: sub_CAC1+26j
		st	d, word_96
		jsr	sub_ED2B
		ld	d, #01FEh
		st	d, word_9A
		setb	bit7, flags_43
		clr	a
		st	a, unk_303
		ld	a, #0E5h
		st	a, unk_304
		ld	a, #00h
		st	a, unk_302
		jsr	sub_FC60	; play with magic memories in 300~307 and 80 to	9f
		ld	a, #00h
		st	a, unk_305
		st	a, unk_306
		st	a, unk_307
		ld	d, #5AA5h
		st	d, word_9C
		clrb	bit0, flags_42
		ret
; End of function sub_CAC1

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_CB1D:				; CODE XREF: __RESET:loc_CABFj
		cmp	#3Dh, count_B2
		bcs	loc_CB4B	; so long as count isnt	high enough dont kill everything
		clrb	bit5, PORTAL
		di
		ld	d, DOUT		; DOUT Data Register
		and	a, #0Eh		; turn off IGT,	#10,20,30,40
		and	b, #0FEh
		st	d, DOUT		; DOUT Data Register
		ei
		ld	a, #10h
		st	a, unk_110
		ld	a, #13h
		st	a, unk_10E
		clrb	bit0, flags_46
		jsr	tweak106	; init engine phase and	timing variables
		clrb	bit6, flags_48
		clr	a
		clr	b
		st	a, unk_18C
		st	d, word_14A	; RPM type variable, filtered if value is between 450 and 1250 RPM
		st	d, word_73
		bra	loc_CB4D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CB4B:				; CODE XREF: __RESET+21Ej
		bsr	CalcRPM

loc_CB4D:				; CODE XREF: __RESET+247j
		st	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	divby128satB
		st	b, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bra	loc_CBAA
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


CalcRPM:				; CODE XREF: __RESET:loc_CB4Bp
					; sub_EE84+1Bp
		ld	d, sixDeltaNE	; time for 180 deg crank rotation
		ld	x, #18750
		ld	y, #0FFFBh	; cdef0	- mul by 32
		jsr	bigDivider	; returns X/D in D, with shifting as specified by Y
		ret
; End of function CalcRPM


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; for RPM type variable	word_14A

filterIdleRPM:				; CODE XREF: sub_EDE4:loc_EF50p
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	a, #025		; 1250 RPM
		bcc	loc_CB80	; bounce if RPM	is higher than 1250
		cmp	a, #009		; 450 RPM
		bcs	loc_CB80	; bounce if RPM	is lower than 450
		sub	d, word_14A	; RPM type variable, filtered if value is between 450 and 1250 RPM
		beq	locret_CB83
		rorc	a		; carry	bit sets sign of D
		rorc	b
		jsr	shraDx4		; d is thus divided by 8, resulting in RPM resolution of 1.56RPM - which doesnt	matter as this is an averaging filter
		cmp	d, #0000h
		bne	loc_CB7D
		inc	b		; at laest one bit must	be added if there WAS a	differential

loc_CB7D:				; CODE XREF: filterIdleRPM+17j
		add	d, word_14A	; RPM type variable, filtered if value is between 450 and 1250 RPM

loc_CB80:				; CODE XREF: filterIdleRPM+4j
					; filterIdleRPM+8j
		st	d, word_14A	; RPM type variable, filtered if value is between 450 and 1250 RPM

locret_CB83:				; CODE XREF: filterIdleRPM+Dj
		ret
; End of function filterIdleRPM


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; for RPM type variables word_14C, byte_63

filtDiffRPM:				; CODE XREF: __RESET+1AADp
		clrb	bit1, flags_45
		ld	d, word_14C	; RPM type variable, iir filtered y_0=(y_-1+x_0)/2
		sub	d, RPM		; probably standard toyota format: 50's and fractions of 50
		bcc	loc_CB93
		setb	bit1, flags_45	; idicate here than result was negative
		neg	a
		neg	b
		subc	a, #00h

loc_CB93:				; CODE XREF: filtDiffRPM+7j
		jsr	divby16satB
		shr	b		; 6.25 RPM/bit
		tbbc	bit1, flags_45,	loc_CB9B
		neg	b

loc_CB9B:				; CODE XREF: filtDiffRPM+13j
		add	b, #80h
		st	b, byte_63	; difference in	RPM between immedate and word_14C, 6.25	RPM / bit
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		add	d, word_14C	; RPM type variable, iir filtered y_0=(y_-1+x_0)/2
		rorc	a
		rorc	b
		st	d, word_14C	; RPM type variable, iir filtered y_0=(y_-1+x_0)/2
		ret
; End of function filtDiffRPM

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_CBAA:				; CODE XREF: __RESET+252j
		ld	d, #1008h
		ld	x, word_9A
		bpz	loc_CBB4
		ld	d, #180Ch	; lil RPMs - A:400 / 600 B: 200	/ 300

loc_CBB4:				; CODE XREF: __RESET+2ADj
		cmp	b, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		ble	loc_CBBA	; bounce if engine speed is higher than	B
		setb	bit0, flags_40

loc_CBBA:				; CODE XREF: __RESET+2B4j
		cmp	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bgt	loc_CBC3	; bounce if engine speed is lower than A
		jsr	sub_D9F9
		clrb	bit0, flags_40

loc_CBC3:				; CODE XREF: __RESET+2BAj
		tbbc	bit0, flags_40,	loc_CBCA ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clr	count_B7
		clr	count_D9

loc_CBCA:				; CODE XREF: __RESET:loc_CBC3j
		tbbc	bit2, flags_40,	loc_CBD0 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		setb	bit2, flags_44
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CBD0:				; CODE XREF: __RESET:loc_CBCAj
		clrb	bit2, flags_44
		ld	y, #0C656h
		ld	b, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		jsr	other2D
		cmp	a, count_A4
		bgt	loc_CBE4
		setb	bit2, flags_40
		ld	#0FEh, count_A4
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CBE4:				; CODE XREF: __RESET+2DAj
		clrb	bit2, flags_40
		jsr	sub_E5CD
		clrb	bit3, flags_47
		tbbs	bit0, flags_49,	loc_CBF5 ; no bits set or cleared overtly
		clr	count_A1
		tbbs	bit7, flags_42,	loc_CC02 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		bra	loc_CC0A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CBF5:				; CODE XREF: __RESET+2E9j
		tbbs	bit7, flags_42,	loc_CC0A ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		cmp	#31h, count_A1
		bcs	loc_CC0A
		cmp	#5Ch, count_B7
		bcs	loc_CC0A

loc_CC02:				; CODE XREF: __RESET+2EEj
		tbs	bit7, flags_42	; b2 set during	init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		beq	loc_CC08
		clrb	bit7, flags_42

loc_CC08:				; CODE XREF: __RESET+302j
		setb	bit3, flags_47

loc_CC0A:				; CODE XREF: __RESET+2F1j
					; __RESET:loc_CBF5j ...
		setb	bit6, flags_42
		tbbs	bit2, PORTA, loc_CC16 ;	Port A Data Register
		tbbc	bit4, flags_45,	loc_CC25
		ld	a, #04h
		bra	loc_CC1B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CC16:				; CODE XREF: __RESET+30Aj
		tbbs	bit4, flags_45,	loc_CC25
		ld	a, #04h

loc_CC1B:				; CODE XREF: __RESET+312j
		cmp	a, count_CA
		bgt	loc_CC27
		tbs	bit4, flags_45
		beq	loc_CC25
		clrb	bit4, flags_45

loc_CC25:				; CODE XREF: __RESET+30Dj
					; __RESET:loc_CC16j ...
		clr	count_CA

loc_CC27:				; CODE XREF: __RESET+31Bj
		cmp	#0Ah, byte_E5	; average of e3, e4
		bcc	loc_CC32
		cmp	#3Ch, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_CC36
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CC32:				; CODE XREF: __RESET+328j
		clrb	bit3, flags_45
		clrb	bit2, flags_45

loc_CC36:				; CODE XREF: __RESET+32Dj
		ld	a, flags_1F4	; based	on flags_4F
		cmpb	a, #40h
		bne	loc_CC5E
		cmp	#0DCh, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_CC5E
		cmp	#00h, byte_E5	; average of e3, e4
		bne	loc_CC5E
		tbbs	bit1, flags_4C,	loc_CC5E ; bit3	- PIM bad
		ld	b, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	b, #28h
		bcs	loc_CC5E
		cmp	b, #8Ch
		bcc	loc_CC5E
		ld	y, #0C5CDh
		jsr	other2D_a
		cmp	a, unk_54
		ble	loc_CC62

loc_CC5E:				; CODE XREF: __RESET+339j __RESET+33Ej ...
		clr	count_C2
		bra	loc_CC6B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CC62:				; CODE XREF: __RESET+35Aj
		cmp	#3Dh, count_C2
		bcs	loc_CC6B
		setb	bit2, flags_45
		setb	bit3, flags_45

loc_CC6B:				; CODE XREF: __RESET+35Ej __RESET+363j
		jsr	calcPW		; 2000 RPM
		jsr	sub_EDE4
		jsr	sub_FE1A
		jsr	sub_F0AE
		ld	a, flags_1E7	; any bits fitting mask	1C or 1F can cut fuel (during crank?)
		and	a, #1Fh
		ld	b, flags_1F3
		and	b, #0E0h
		add	a, b
		st	a, flags_4F
		tbbs	bit2, flags_40,	loc_CC8B ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit6, flags_4F
		clrb	bit5, flags_4F

loc_CC8B:				; CODE XREF: __RESET+382j
		tbbc	bit0, flags_4F,	loc_CC90+1
		setb	bit7, flags_4F

loc_CC90:				; CODE XREF: __RESET:loc_CC8Bj
		cmp	x, #75FFh
		ld	a, unk_156
		tbbc	bit7, flags_42,	loc_CC9F ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		cmp	a, #3Ch
		bcc	loc_CC9F
		ld	a, #3Ch

loc_CC9F:				; CODE XREF: __RESET+394j __RESET+399j
		st	a, unk_155
		cmp	#11h, byte_E5	; average of e3, e4
		bcc	loc_CCB0
		tbbs	bit6, flags_4F,	loc_CCB0
		cmp	a, #38h
		bcc	loc_CCB0
		ld	a, #38h

loc_CCB0:				; CODE XREF: __RESET+3A3j __RESET+3A5j ...
		tbbc	bit4, flags_40,	loc_CCB9 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	a, #50h
		bcc	loc_CCB9
		ld	a, #50h

loc_CCB9:				; CODE XREF: __RESET:loc_CCB0j
					; __RESET+3B3j
		tbbs	bit7, flags_4F,	loc_CCDC
		ld	y, #0C60Ch
		cmp	#5Ch, count_B7
		bcs	loc_CCCB
		tbbs	bit6, flags_4F,	loc_CCCB
		tbbs	bit5, flags_4F,	loc_CCCB
		inc	y

loc_CCCB:				; CODE XREF: __RESET+3C0j __RESET+3C2j ...
		add	a, y + 00h

loc_CCCD:
		bcc	loc_CCD1
		ld	a, #0FFh

loc_CCD1:				; CODE XREF: __RESET:loc_CCCDj
		cmp	#11h, byte_E5	; average of e3, e4
		bcc	loc_CCDC
		cmp	a, #50h
		bcc	loc_CCDC
		ld	a, #50h

loc_CCDC:				; CODE XREF: __RESET:loc_CCB9j
					; __RESET+3D2j	...
		tbbc	bit2, flags_40,	loc_CD11 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#3Ch, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_CCF8
		cmp	#0FAh, byte_E5	; average of e3, e4
		bcc	loc_CCF8
		cmp	#90h, byte_63	; difference in	RPM between immedate and word_14C, 6.25	RPM / bit
		bcs	loc_CCF8
		tbbc	bit7, flags_4F,	loc_CD11
		jsr	sub_CED3
		setb	bit5, flags_4F
		bra	loc_CD11
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CCF8:				; CODE XREF: __RESET+3E0j __RESET+3E5j ...
		cmp	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bgt	loc_CD0C
		ld	a, unk_1B2
		bne	loc_CD11
		ld	a, unk_301
		cmpb	a, #02h
		bne	loc_CD11
		setb	bit0, flags_4F
		bra	loc_CD13
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CD0C:				; CODE XREF: __RESET+3F8j
		tbbc	bit7, flags_4F,	loc_CD11
		setb	bit6, flags_4F

loc_CD11:				; CODE XREF: __RESET:loc_CCDCj
					; __RESET+3ECj	...
		clrb	bit0, flags_4F

loc_CD13:				; CODE XREF: __RESET+408j
		bra	loc_CD1F
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_CD15:				; CODE XREF: __RESET+1B32p
		ld	y, #0C5C7h
		jsr	other2D_THW
		st	a, unk_156
		ret
; End of function sub_CD15

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_CD1F:				; CODE XREF: __RESET:loc_CD13j
		tbbs	bit2, flags_40,	loc_CD2E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit2, flags_44,	loc_CD2E
		tbbs	bit0, flags_40,	loc_CD2E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, #00FAh
		jsr	doAllinjectors

loc_CD2E:				; CODE XREF: __RESET:loc_CD1Fj
					; __RESET+420j	...
		ld	a, flags_4F
		mov	a, b
		and	b, #0E0h
		st	b, flags_1F3
		and	a, #1Fh
		ld	b, flags_1F4	; based	on flags_4F
		and	b, #0E0h
		add	a, b
		st	a, flags_4F
		tbbs	bit0, flags_4F,	loc_CD55
		cmp	#3Ch, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_CD55
		cmp	#0Ah, byte_E5	; average of e3, e4
		bcs	loc_CD55
		ld	d, Pulsewidth
		cmp	d, #00E1h
		bcs	loc_CD5E

loc_CD55:				; CODE XREF: __RESET+43Ej __RESET+444j ...
		clr	count_DE
		tbbc	bit7, flags_4F,	loc_CD5C
		clrb	bit7, flags_4F

loc_CD5C:				; CODE XREF: __RESET+455j
		bra	loc_CD70
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CD5E:				; CODE XREF: __RESET+451j
		ld	a, #05h
		cmp	#78h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_CD67
		ld	a, #14h

loc_CD67:				; CODE XREF: __RESET+461j
		cmp	a, count_DE
		bgt	loc_CD70
		tbbs	bit7, flags_4F,	loc_CD70
		setb	bit7, flags_4F

loc_CD70:				; CODE XREF: __RESET:loc_CD5Cj
					; __RESET+467j	...
		ld	a, unk_7B
		cmpb	a, #80h
		beq	loc_CD94
		tbbs	bit0, flags_4F,	loc_CD90
		ld	d, #0032h
		push	a
		ld	a, unk_1EE
		cmpb	a, #02h
		pull	a
		beq	loc_CD88
		ld	d, #007Dh

loc_CD88:				; CODE XREF: __RESET+481j
		add	d, #00AFh
		cmp	d, Pulsewidth
		bgt	loc_CD92

loc_CD90:				; CODE XREF: __RESET+474j
		clr	unk_7B

loc_CD92:				; CODE XREF: __RESET+48Cj
		bra	loc_CDB3
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CD94:				; CODE XREF: __RESET+472j
		tbbs	bit0, flags_4F,	loc_CDB3
		ld	d, #00AFh
		push	a
		ld	a, unk_1EE
		cmpb	a, #02h
		pull	a
		beq	loc_CDA6
		add	d, #004Bh

loc_CDA6:				; CODE XREF: __RESET+49Fj
		cmp	d, Pulsewidth
		bcs	loc_CDB3
		cmp	#60h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_CDB3
		ld	#80h, unk_7B

loc_CDB3:				; CODE XREF: __RESET:loc_CD92j
					; __RESET:loc_CD94j ...
		tbbs	bit7, flags_4F,	loc_CDBE+1
		ld	a, unk_7B
		cmpb	a, #80h
		bne	loc_CDBE+1
		clrb	bit1, flags_4F

loc_CDBE:				; CODE XREF: __RESET:loc_CDB3j
					; __RESET+4B8j
		cmp	x, #773Fh
		ld	d, #4628h
		cmp	#0F2h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_CDCA
		mov	b, a

loc_CDCA:				; CODE XREF: __RESET+4C5j
		st	a, temp_64
		tbbs	bit2, flags_40,	loc_CDDC ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0DCh, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_CDDC
		cmp	#0Ah, byte_E5	; average of e3, e4
		bgt	loc_CDDC
		tbbc	bit2, flags_45,	loc_CDDF

loc_CDDC:				; CODE XREF: __RESET+4CAj __RESET+4D0j ...
		clr	a
		st	a, unk_72

loc_CDDF:				; CODE XREF: __RESET+4D7j
		tbbc	bit2, flags_40,	loc_CDE7 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		jsr	sub_CE81
		bra	loc_CE10
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CDE7:				; CODE XREF: __RESET:loc_CDDFj
		ld	a, unk_72
		cmp	a, #0FFh
		bcc	loc_CDF4
		ld	a, #0A4h
		tbbs	bit5, flags_4F,	loc_CDFF
		bra	loc_CE10
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CDF4:				; CODE XREF: __RESET+4E9j
		ld	a, word_14C	; RPM type variable, iir filtered y_0=(y_-1+x_0)/2
		ld	b, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	b, temp_64
		bcs	loc_CDFF
		setb	bit5, flags_4F

loc_CDFF:				; CODE XREF: __RESET+4EDj __RESET+4F9j
		tbs	bit6, flags_4F
		bne	loc_CE10
		ld	b, #00h
		cmp	a, #1Eh
		bcc	loc_CE0B
		ld	a, #1Eh

loc_CE0B:				; CODE XREF: __RESET+505j
		st	d, unk_153
		clr	count_B9

loc_CE10:				; CODE XREF: __RESET+4E3j __RESET+4F0j ...
		ld	a, unk_153
		tbbc	bit2, flags_4F,	loc_CE21
		sub	a, unk_154
		bcs	loc_CE1F
		cmp	a, #1Eh
		bcc	loc_CE21

loc_CE1F:				; CODE XREF: __RESET+517j
		ld	a, #1Eh

loc_CE21:				; CODE XREF: __RESET+511j __RESET+51Bj
		cmp	a, RPM		; probably standard toyota format: 50's and fractions of 50
		bgt	loc_CE29
		setb	bit2, flags_4F
		bra	loc_CE2E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CE29:				; CODE XREF: __RESET+521j
		clrb	bit2, flags_4F
		tbbc	bit6, flags_48,	loc_CE30 ; bit 0 set under 1200	RPM

loc_CE2E:				; CODE XREF: __RESET+525j
		setb	bit5, flags_4F

loc_CE30:				; CODE XREF: __RESET+529j
		cmp	#3Dh, count_B9
		bcs	loc_CE7F
		clr	count_B9
		tbbc	bit5, flags_4F,	loc_CE59
		tbbc	bit6, flags_4F,	loc_CE5C
		ld	d, unk_153
		sub	a, #04h
		bcs	loc_CE48
		cmp	a, #1Eh
		bcc	loc_CE4A

loc_CE48:				; CODE XREF: __RESET+540j
		ld	a, #1Eh

loc_CE4A:				; CODE XREF: __RESET+544j
		add	b, #01h
		bcs	loc_CE52
		cmp	b, #1Eh
		ble	loc_CE54

loc_CE52:				; CODE XREF: __RESET+54Aj
		ld	b, #1Eh

loc_CE54:				; CODE XREF: __RESET+54Ej
		st	d, unk_153
		bra	loc_CE7D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CE59:				; CODE XREF: __RESET+535j
		jsr	sub_CE81

loc_CE5C:				; CODE XREF: __RESET+538j
		ld	b, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	b, temp_64
		bcc	loc_CE69
		ld	a, unk_72
		beq	loc_CE7D
		dec	a
		bra	loc_CE7B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CE69:				; CODE XREF: __RESET+55Ej
		ld	y, #0C5D3h
		jsr	other2D
		cmp	#0F2h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_CE75
		shl	a

loc_CE75:				; CODE XREF: __RESET+570j
		add	a, unk_72
		bcc	loc_CE7B
		ld	a, #0FFh

loc_CE7B:				; CODE XREF: __RESET+565j __RESET+575j
		st	a, unk_72

loc_CE7D:				; CODE XREF: __RESET+555j __RESET+562j
		clrb	bit5, flags_4F

loc_CE7F:				; CODE XREF: __RESET+531j
		bra	loc_CE98
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_CE81:				; CODE XREF: __RESET+4E0p
					; __RESET:loc_CE59p
		clrb	bit6, flags_4F
		ld	d, #0A400h
		st	d, unk_153
		ret
; End of function sub_CE81


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


chkRevLimit:				; CODE XREF: IV6sub1+4Dp
		ld	d, #00309
		cmp	d, word_108	; time for 60 deg of crank rotation
		ble	loc_CE95	; bounce if 60 deg of crank is longer than 1236us
		setb	bit6, flags_48	; rev limiter, hitting my ballmer peak on an airplane right now.
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CE95:				; CODE XREF: chkRevLimit+6j
		clrb	bit6, flags_48
		ret
; End of function chkRevLimit

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_CE98:				; CODE XREF: __RESET:loc_CE7Fj
		ld	a, flags_4F
		and	a, #0E0h
		st	a, flags_1F4	; based	on flags_4F
		tbbc	bit3, flags_4F,	loc_CEB3
		cmp	#08h, count_CB
		bcs	loc_CEAC
		cmp	#0B4h, byte_E5	; average of e3, e4
		bcs	loc_CEB1

loc_CEAC:				; CODE XREF: __RESET+5A3j
		cmp	#28h, RPM	; probably standard toyota format: 50's and fractions of 50
		bcc	loc_CEB5

loc_CEB1:				; CODE XREF: __RESET+5A8j
		clrb	bit3, flags_4F

loc_CEB3:				; CODE XREF: __RESET+59Dj
		clr	count_CB

loc_CEB5:				; CODE XREF: __RESET+5ADj
		cmp	#0B4h, byte_E5	; average of e3, e4
		bcc	loc_CEBC
		clr	count_B4

loc_CEBC:				; CODE XREF: __RESET+5B6j
		cmp	#7Ah, count_B4
		bcs	loc_CEC8
		cmp	#50h, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_CEC8
		setb	bit3, flags_4F

loc_CEC8:				; CODE XREF: __RESET+5BDj __RESET+5C2j
		clrb	bit4, flags_4F
		ld	a, flags_4F
		and	a, #1Fh
		st	a, flags_1E7	; any bits fitting mask	1C or 1F can cut fuel (during crank?)
		bra	loc_CEDA
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_CED3:				; CODE XREF: __RESET+3EFp
		ld	d, #00FAh
		jsr	doAllinjectors
		ret
; End of function sub_CED3

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_CEDA:				; CODE XREF: __RESET+5CFj
		clr	a
		clr	b
		tbbs	bit5, flags_40,	loc_CEFC ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit0, flags_40,	loc_CEFF ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, #0666h
		cmp	#0ECh, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_CEEF
		cmp	#0D2h, THA	; adc vector 2,	negation of bits, probably THA
		bcc	loc_CEFC

loc_CEEF:				; CODE XREF: __RESET+5E6j
		ld	y, #0C5B1h
		ld	x, word_9A
		bpz	loc_CEF9
		ld	y, #0C5ACh

loc_CEF9:				; CODE XREF: __RESET+5F2j
		jsr	other2D_5B

loc_CEFC:				; CODE XREF: __RESET+5DAj __RESET+5EBj
		st	d, unk_14F

loc_CEFF:				; CODE XREF: __RESET+5DDj
		bra	loc_CF10
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_CF01:				; CODE XREF: __RESET+1F25p
		tbbs	bit0, flags_40,	locret_CF0F ; b0 - lilRPM not running flag, b1 - deltaNE based not running flag
		ld	x, unk_14F
		ld	a, #0EEh
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		st	d, unk_14F

locret_CF0F:				; CODE XREF: sub_CF01j
		ret
; End of function sub_CF01

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_CF10:				; CODE XREF: __RESET:loc_CEFFj
		clr	a
		clr	b
		tbbs	bit5, flags_40,	loc_CF1E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit0, flags_40,	loc_CF21 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	y, #0C5BAh
		jsr	other2D_5B

loc_CF1E:				; CODE XREF: __RESET+610j
		st	d, word_151

loc_CF21:				; CODE XREF: __RESET+613j
		bra	loc_CF34
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; decays word_151 by 90% every iteration unless	count_B7 is < 61

sub_CF23:				; CODE XREF: __RESET+1AAAp
		cmp	#061, count_B7
		bcs	locret_CF33	; bounce if mem-#imm carries
		ld	a, #0E6h	; about	90%
		ld	x, word_151
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		st	d, word_151

locret_CF33:				; CODE XREF: sub_CF23+3j
		ret
; End of function sub_CF23

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_CF34:				; CODE XREF: __RESET:loc_CF21j
		ld	a, unk_1EA
		st	a, flags_4F
		clr	a
		cmp	#50h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_CF4D
		cmp	#0D1h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_CF4D
		ld	b, unk_182
		ld	y, #0C5DAh
		jsr	other2D_a

loc_CF4D:				; CODE XREF: __RESET+63Bj __RESET+640j
		st	a, unk_15A
		ld	y, #0C5E1h
		cmpz	a
		beq	loc_CF59
		ld	y, #0C5EAh

loc_CF59:				; CODE XREF: __RESET+652j
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	other2D_d
		tbbc	bit1, flags_4F,	loc_CF66
		sub	a, #06h
		bcc	loc_CF66
		clr	a

loc_CF66:				; CODE XREF: __RESET+65Cj __RESET+661j
		cmp	a, word_12C
		ble	loc_CF70
		clrb	bit1, flags_4F
		clr	a
		bra	loc_CFAC
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CF70:				; CODE XREF: __RESET+667j
		setb	bit1, flags_4F
		ld	y, #0C4FFh
		ld	d, word_12C
		jsr	divDby16
		mov	d, x
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	a, #88h
		ble	loc_CF8D
		sub	a, #88h
		shl	d
		add	d, #8800h
		bcc	loc_CF8D
		ld	d, #0FFFFh

loc_CF8D:				; CODE XREF: __RESET+67Ej __RESET+686j
		jsr	ThreeDtableby16	; Table	pointer	in Y, inputs in	D and X, D divided by 16
		tbbc	bit7, flags_43,	loc_CFA5
		cmp	#70h, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_CFA5
		ld	b, word_12C
		cmp	b, #7Ch
		bcs	loc_CFA5
		add	a, #0Dh
		bcc	loc_CFA5
		ld	a, #0FFh

loc_CFA5:				; CODE XREF: __RESET+68Ej __RESET+694j ...
		add	a, unk_15A
		bcc	loc_CFAC
		ld	a, #0FFh

loc_CFAC:				; CODE XREF: __RESET+66Cj __RESET+6A6j
		st	a, unk_158
		tbbc	bit7, flags_43,	loc_CFCA
		cmp	#48h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_CFCA
		cmp	#0E4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_CFCA
		tbbs	bit3, flags_40,	loc_CFCA ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	y, #0C5F9h
		jsr	TwoD_lilRPM
		cmp	a, word_12C
		bcs	loc_CFCF

loc_CFCA:				; CODE XREF: __RESET+6ADj __RESET+6B3j ...
		clr	a
		clrb	bit3, flags_4F
		bra	loc_CFDA
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CFCF:				; CODE XREF: __RESET+6C6j
		ld	y, #0C600h
		ld	b, unk_1A7
		jsr	other2D_b
		setb	bit3, flags_4F

loc_CFDA:				; CODE XREF: __RESET+6CBj
		st	a, unk_15B
		setb	bit2, flags_4F
		clr	a
		tbbc	bit3, flags_40,	loc_CFE7 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit2, flags_4F
		ld	a, #14h

loc_CFE7:				; CODE XREF: __RESET+6DEj
		st	a, unk_159
		ld	a, unk_126
		cmp	a, #0F6h
		blta	loc_CFF9
		tbbc	bit3, flags_40,	loc_CFF9 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0E4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcc	loc_CFFE

loc_CFF9:				; CODE XREF: __RESET+6EDj __RESET+6EFj
		ld	#0FEh, count_AA
		bra	loc_D004
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_CFFE:				; CODE XREF: __RESET+6F5j
		cmp	a, #0Ah
		blta	loc_D004
		clr	count_AA

loc_D004:				; CODE XREF: __RESET+6FAj __RESET+6FEj
		tbbs	bit1, flags_4F,	loc_D012
		tbbc	bit2, flags_4F,	loc_D012
		tbbs	bit3, flags_4F,	loc_D012
		clrb	bit0, flags_4F
		clr	b
		bra	loc_D02B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D012:				; CODE XREF: __RESET:loc_D004j
					; __RESET+705j	...
		setb	bit0, flags_4F
		ld	d, unk_158
		cmp	a, b
		ble	loc_D01B
		mov	a, b

loc_D01B:				; CODE XREF: __RESET+716j
		cmp	b, unk_15B
		bcc	loc_D023
		ld	b, unk_15B

loc_D023:				; CODE XREF: __RESET+71Cj
		cmp	b, unk_15C
		ble	loc_D02B
		ld	b, unk_15C

loc_D02B:				; CODE XREF: __RESET+70Ej __RESET+724j
		st	b, unk_157
		bra	loc_D03A
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D030:				; CODE XREF: __RESET+1B3Bp
		ld	y, #0C5F3h
		jsr	other2D_THW
		st	a, unk_15C
		ret
; End of function sub_D030

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_D03A:				; CODE XREF: __RESET+72Cj
		ld	a, flags_4F
		st	a, unk_1EA
		ld	a, unk_1ED
		st	a, flags_4F
		tbbs	bit3, flags_4B,	loc_D050
		tbbs	bit6, flags_4D,	loc_D050
		tbbs	bit7, flags_4D,	loc_D050
		tbbc	bit0, flags_40,	loc_D056 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag

loc_D050:				; CODE XREF: __RESET+742j __RESET+745j ...
		clrb	bit0, flags_4F
		clr	count_A9
		bra	loc_D062
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D056:				; CODE XREF: __RESET+74Bj
		tbbs	bit6, flags_4B,	loc_D05B
		clr	count_A9

loc_D05B:				; CODE XREF: __RESET:loc_D056j
		cmp	#31h, count_A9
		bcs	loc_D062
		setb	bit0, flags_4F

loc_D062:				; CODE XREF: __RESET+752j __RESET+75Cj
		jsr	sub_D15E
		tbbs	bit0, flags_40,	loc_D097+1 ; b0	- lilRPM not running flag, b1 -	deltaNE	based not running flag
		cmp	#15h, count_BD
		bcs	loc_D097+1
		cmp	#0C4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_D097+1
		ld	a, flags_1F6	; another flags_4f copy
		cmpb	a, #08h
		bne	loc_D097+1
		ld	a, flags_1F4	; based	on flags_4F
		cmpb	a, #40h
		bne	loc_D097+1
		ld	d, Pulsewidth
		cmp	d, #00AFh
		ble	loc_D097+1
		tbbs	bit3, flags_4B,	loc_D097+1
		ld	a, unk_1EA
		cmpb	a, #01h
		bne	loc_D097+1
		setb	bit4, flags_4A
		tbbs	bit0, flags_4F,	loc_D0A1

loc_D097:				; CODE XREF: __RESET+763j __RESET+769j ...
		cmp	x, #759Ah
		clrb	bit6, flags_40
		clrb	bit5, flags_44
		jmp	loc_D166
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D0A1:				; CODE XREF: __RESET+792j
		setb	bit6, flags_40
		tbbs	bit2, flags_40,	loc_D0AE ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit2, flags_44,	loc_D0AE
		ld	d, #8000h
		st	d, unk_70

loc_D0AE:				; CODE XREF: __RESET+7A1j __RESET+7A4j
		di
		tbbc	bit5, flags_45,	loc_D0C2
		clrb	bit5, flags_45
		ei
		jsr	sub_E06A
		clrb	bit1, flags_4F
		setb	bit5, flags_44
		ld	d, #0EB01h
		jsr	Satcount_A	; increments B bytes starting at pointer 00+A, bytes increment to FF then saturate

loc_D0C2:				; CODE XREF: __RESET+7ADj
		ei
		jmp	loc_D177
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D0C6:				; CODE XREF: IV6-ABp
		tbbs	bit6, flags_40,	loc_D0CC ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		jmp	locret_D128
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D0CC:				; CODE XREF: sub_D0C6j
		tbbc	bit1, flags_47,	loc_D0F5
		clrb	bit1, flags_47
		setb	bit5, flags_45
		jsr	sub_D29A
		jsr	sub_D856
		tbbc	bit2, flags_40,	loc_D0E5 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, unk_1A4
		inc	a
		beq	loc_D0E5
		st	a, unk_1A4

loc_D0E5:				; CODE XREF: sub_D0C6+13j sub_D0C6+1Aj
		ld	a, unk_118
		ld	x, #0A3Dh
		cmp	a, #10h
		bcs	loc_D0F2
		ld	x, #199Ah

loc_D0F2:				; CODE XREF: sub_D0C6+27j
		mov	x, d
		bra	loc_D109
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D0F5:				; CODE XREF: sub_D0C6:loc_D0CCj
		tbs	bit7, flags_44
		bne	locret_D128
		ld	y, #0C60Eh
		tbbs	bit6, flags_4B,	loc_D102
		ld	y, #0C612h

loc_D102:				; CODE XREF: sub_D0C6+36j
		tbbs	bit6, flags_47,	loc_D107
		inc	y
		inc	y

loc_D107:				; CODE XREF: sub_D0C6:loc_D102j
		ld	d, y + 00h

loc_D109:				; CODE XREF: sub_D0C6+2Dj
		push	d
		mov	s, x
		ld	d, unk_70
		tbbc	bit6, flags_4B,	loc_D118
		sub	d, x + 00h
		bcc	loc_D11F
		clr	a
		clr	b
		bra	loc_D11F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D118:				; CODE XREF: sub_D0C6+47j
		add	d, x + 00h
		bcc	loc_D11F
		ld	d, #0FFFFh

loc_D11F:				; CODE XREF: sub_D0C6+4Cj sub_D0C6+50j ...
		pull	x
		ld	y, #0C8A9h
		jsr	BoundAccD
		st	d, unk_70

locret_D128:				; CODE XREF: sub_D0C6+3j sub_D0C6+31j
		ret
; End of function sub_D0C6


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D129:				; CODE XREF: ROM:FEDCp
		ld	x, #0C616h
		tbbs	bit2, flags_40,	loc_D137 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, unk_113	; msN: adc vector 7 | lsN: adc vector 6
		and	a, #06h
		shr	a
		inc	a
		add	x, a

loc_D137:				; CODE XREF: sub_D129+3j
		ld	b, unk_6E
		ld	a, OX		; adc vector 5 multiplied by 4 (ie voltage is 1.25*count/256), probably	OX (oxygen sensor)
		cmp	a, #092		; .449V, ~.45V
		bcs	loc_D148
		ld	a, x + 00h
		dec	b
		bmi	loc_D152
		bne	loc_D153
		bra	loc_D14F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D148:				; CODE XREF: sub_D129+14j
		ld	a, x + 05h
		inc	b
		bmi	loc_D153
		bne	loc_D152

loc_D14F:				; CODE XREF: sub_D129+1Dj
		di
		setb	bit1, flags_47

loc_D152:				; CODE XREF: sub_D129+19j sub_D129+24j
		mov	a, b

loc_D153:				; CODE XREF: sub_D129+1Bj sub_D129+22j
		st	b, unk_6E
		bmi	loc_D15A
		clrb	bit6, flags_4B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx - three byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D15A:				; CODE XREF: sub_D129+2Cj
		setb	bit6, flags_4B
		ei
		ret
; End of function sub_D129


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D15E:				; CODE XREF: __RESET:loc_D062p
					; IV6sub1:loc_F643p
		jsr	chk4fuelCut	; returns carry	if fuel	is to be cut
		bcc	locret_D165
		clr	count_BD

locret_D165:				; CODE XREF: sub_D15E+3j
		ret
; End of function sub_D15E

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_D166:				; CODE XREF: __RESET+79Cj
		ld	d, #8000h
		st	a, unk_F5
		st	a, unk_6F
		st	d, unk_70
		st	d, unk_F9
		clr	count_EB
		clrb	bit1, flags_47
		clrb	bit5, flags_45

loc_D177:				; CODE XREF: __RESET+7C1j
		ld	y, #0085h
		ld	x, #0C8ADh

loc_D17D:				; CODE XREF: __RESET+888j
		ld	d, [y]
		inc	x
		inc	x
		xch	x, y
		jsr	BoundAccB	; bounding sub:	bounds and flags data that exceeds range specified by pointer in Y. carry is set if saturation occurs
		xch	x, y
		bcs	loc_D18E
		cmp	y, #0093h
		bcs	loc_D17D
		bra	loc_D191
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D18E:				; CODE XREF: __RESET+883j
		jsr	sub_CAC1

loc_D191:				; CODE XREF: __RESET+88Aj
		clrb	bit2, flags_4A
		tbbc	bit2, flags_40,	loc_D1AC ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#23h, word_56	; word_E9/(byte_130*2)
		bcc	loc_D19F

loc_D19B:				; CODE XREF: __RESET+8A0j __RESET+8A5j
		clr	count_CC
		bra	loc_D1C2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D19F:				; CODE XREF: __RESET+897j
		cmp	#28h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_D19B
		cmp	#18h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_D19B
		clr	a
		bra	loc_D1D3
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D1AC:				; CODE XREF: __RESET+891j
		clr	count_CC
		cmp	#80h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_D1C2
		cmp	#28h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_D1C2
		ld	d, word_56	; word_E9/(byte_130*2)
		cmp	a, #94h
		bcc	loc_D1C2
		cmp	a, #33h
		bcc	loc_D1C8

loc_D1C2:				; CODE XREF: __RESET+89Bj __RESET+8AFj ...
		jmp	loc_D280
; END OF FUNCTION CHUNK	FOR __RESET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  03h
		.db  36h ; 6
		.db  05h
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_D1C8:				; CODE XREF: __RESET+8BEj
		ld	y, #0D1C5h
		jsr	divDby16
		jsr	SubtBoundD
		inc	a
		shl	a

loc_D1D3:				; CODE XREF: __RESET+8A8j
		ld	x, #0086h
		add	x, a
		xch	a, unk_75
		cmp	a, unk_75
		beq	loc_D1DF
		clr	count_EB

loc_D1DF:				; CODE XREF: __RESET+8D9j
		tbbs	bit5, flags_40,	loc_D1C2 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit6, flags_40,	loc_D1C2 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0E4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_D1C2
		tbbs	bit1, flags_4C,	loc_D1C2 ; bit3	- PIM bad
		ld	a, unk_14F
		bne	loc_D1C2
		cmp	#93h, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		bcs	loc_D1C2
		tbbs	bit4, flags_49,	loc_D1C2 ; no bits set or cleared overtly
		tbbs	bit5, flags_47,	loc_D1C2
		tbbs	bit4, flags_40,	loc_D1C2 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, flags_1F2	; copies into flags_4F
		cmpb	a, #20h
		bne	loc_D280
		cmpb	a, #08h
		beq	loc_D20F
		cmpb	a, #10h
		beq	loc_D280

loc_D20F:				; CODE XREF: __RESET+907j
		setb	bit2, flags_4A
		tbbs	bit1, flags_4F,	loc_D27C
		ld	a, #06h
		tbbs	bit2, flags_40,	loc_D21B ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, #03h

loc_D21B:				; CODE XREF: __RESET+914j
		cmp	a, count_EB
		bgt	loc_D27C
		ld	b, #01h
		cmp	#8Ah, unk_F5
		bcc	loc_D22C
		neg	b
		cmp	#76h, unk_F5
		bgt	loc_D27C

loc_D22C:				; CODE XREF: __RESET+922j
		add	b, x + 00h
		push	b
		mov	x, d
		add	d, #0C829h
		mov	d, y
		pull	b
		jsr	BoundAccB	; bounding sub:	bounds and flags data that exceeds range specified by pointer in Y. carry is set if saturation occurs
		jsr	sub_D2A3	; play swith magic memory specified by x
		clrb	bit1, flags_45
		ld	b, word_86
		sub	b, #5Ch
		bcc	loc_D246
		neg	b
		setb	bit1, flags_45

loc_D246:				; CODE XREF: __RESET+93Fj
		clr	a
		div	d, #05h
		st	b, temp_64
		xch	x, y
		ld	x, #0092h
		ld	#05h, unk_65

loc_D252:				; CODE XREF: __RESET+977j
		ld	a, unk_65
		mul	a, temp_64
		sub	b, temp_64
		subc	a, #00h
		tbbc	bit1, flags_45,	loc_D260
		jsr	NegD

loc_D260:				; CODE XREF: __RESET+958j
		add	d, #0023h
		st	d, temp_66
		ld	b, word_86
		clr	a
		sub	d, temp_66
		bmi	loc_D275
		jsr	satB
		cmp	b, x + 00h
		ble	loc_D275
		bsr	sub_D2A3	; play swith magic memory specified by x

loc_D275:				; CODE XREF: __RESET+968j __RESET+96Fj
		dec	x
		dec	x
		dec	unk_65
		bpz	loc_D252
		xch	x, y

loc_D27C:				; CODE XREF: __RESET+90Fj __RESET+91Bj ...
		ld	a, x + 00h
		bra	loc_D287
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D280:				; CODE XREF: __RESET:loc_D1C2j
					; __RESET+903j	...
		ld	#0FFh, unk_75
		clr	count_EB
		ld	a, #80h

loc_D287:				; CODE XREF: __RESET+97Cj
		tbbs	bit6, flags_40,	loc_D292 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, #80h
		st	a, unk_F5
		st	a, unk_6F
		ld	a, #00h

loc_D292:				; CODE XREF: __RESET:loc_D287j
		st	a, unk_1E6
		setb	bit1, flags_4F
		jmp	loc_D2EB
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D29A:				; CODE XREF: sub_D0C6+Dp
		ld	d, unk_6F
		st	b, unk_6F
		add	a, b
		rorc	a
		st	a, unk_F5
		ret
; End of function sub_D29A


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; play swith magic memory specified by x

sub_D2A3:				; CODE XREF: __RESET+936p __RESET+971p ...
		di
		ld	a, x + 00h
		sub	a, b
		add	a, x + 01h
		xch	a, b
		st	d, x + 00h
		ei
		ret
; End of function sub_D2A3


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D2AE:				; CODE XREF: __RESET+136Dp
		clr	b
		ld	a, #80h
		tbbc	bit0, flags_42,	loc_D2E0 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		tbbc	bit2, flags_40,	loc_D2BB ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, word_86
		bra	loc_D2E0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D2BB:				; CODE XREF: sub_D2AE+6j
		ld	y, #0D1C5h
		ld	d, word_56	; word_E9/(byte_130*2)
		sub	d, #07FEh
		bcc	loc_D2C7
		clr	a
		clr	b

loc_D2C7:				; CODE XREF: sub_D2AE+15j
		jsr	divDby16
		jsr	SubtBoundD
		push	b
		shl	a
		ld	y, #0088h
		add	y, a
		ld	a, y + 00h
		ld	b, y + 02h
		mov	d, y
		pull	b
		push	y
		mov	s, x
		xch	x, y
		jsr	other2Dd
		pull	y

loc_D2E0:				; CODE XREF: sub_D2AE+3j sub_D2AE+Bj
		st	a, unk_13F
		add	d, unk_70
		rorc	a
		rorc	b
		st	d, word_13B
		ret
; End of function sub_D2AE

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_D2EB:				; CODE XREF: __RESET+995j
		ld	a, flags_4F
		st	a, unk_1ED
		tbbc	bit2, flags_40,	loc_D2FF ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clr	count_B8
		cmp	#5Ch, count_B7
		bcs	loc_D2FF
		cmp	#50h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_D323

loc_D2FF:				; CODE XREF: __RESET+9EEj __RESET+9F6j
		cmp	#5Ch, count_B8
		bcs	loc_D31F
		cmp	#0DCh, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_D31F
		ld	y, #0C8BDh
		ld	b, byte_E5	; average of e3, e4
		jsr	BoundAccB	; bounding sub:	bounds and flags data that exceeds range specified by pointer in Y. carry is set if saturation occurs
		bcs	loc_D31F
		cmp	#31h, unk_54
		bcc	loc_D31F
		ld	b, unk_197
		cmp	b, #66h
		bcc	loc_D323

loc_D31F:				; CODE XREF: __RESET+A00j __RESET+A05j ...
		ld	b, #80h
		bra	loc_D34E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D323:				; CODE XREF: __RESET+9FBj __RESET+A1Bj
		ld	d, sixDeltaNE	; time for 180 deg crank rotation
		ld	x, #00224
		jsr	mulDbyX		; return upper 32 in X:Y
		shr	d
		shr	d
		ld	x, word_73
		jsr	mulDbyX		; return upper 32 in X:Y
		jsr	divDby64
		sub	d, #00384
		bpz	loc_D33D
		clr	a
		clr	b

loc_D33D:				; CODE XREF: __RESET+A37j
		jsr	satB
		ld	y, #0C8BFh
		cmp	#03h, byte_E5	; average of e3, e4
		bcs	loc_D34B
		ld	y, #0C8C1h

loc_D34B:				; CODE XREF: __RESET+A44j
		jsr	BoundAccB	; bounding sub:	bounds and flags data that exceeds range specified by pointer in Y. carry is set if saturation occurs

loc_D34E:				; CODE XREF: __RESET+A1Fj
		st	b, unk_14E
		bra	loc_D35E
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D353:				; CODE XREF: sub_EDE4+16Fp
		ld	b, #80h
		ld	x, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	y, #word_73
		jsr	loc_C1F0	; iir filter input X, y_-1 in Y, ratio for input in B
		ret
; End of function sub_D353

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_D35E:				; CODE XREF: __RESET+A4Fj
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	y, #0C65Ch
		jsr	other2D_d
		st	a, unk_166
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	y, #0C663h
		jsr	other2D_d
		st	a, unk_167
		ld	y, #0C676h
		jsr	TwoD_THW
		st	d, temp_64
		ld	y, #0C66Fh
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	other2D_d
		ld	x, temp_64
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		jsr	divby64satB
		st	b, byte_16F
		ld	y, #0C688h
		jsr	TwoD_THW
		st	d, temp_64
		ld	y, #0C681h
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	other2D_d
		ld	x, temp_64
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		jsr	divby64satB
		st	b, byte_170
		ld	y, #0C693h
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	other2D_d
		st	a, byte_172	; rpm through C693
		ld	y, #0C69Ah
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	other2D_d
		st	a, byte_173	; rpm through C69A
		tbbs	bit0, flags_46,	loc_D3CC
		ld	y, #0C6A1h
		jsr	TwoD_THW
		st	d, byte_16D	; thw through C6A1

loc_D3CC:				; CODE XREF: __RESET+ABEj
		ld	y, #0C6C6h
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	other2D_d
		st	a, byte_16C	; rpm through C6C6
		ld	y, #0C6ACh
		jsr	THW2dtemp64	; jump to twoD_THW, half output	and store D in temp_64
		ld	d, byte_16D	; thw through C6A1
		shr	d
		add	d, temp_64
		bcc	loc_D3E8
		ld	d, #0FFFFh

loc_D3E8:				; CODE XREF: __RESET+AE1j
		mov	d, x
		ld	b, byte_16C	; rpm through C6C6
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows
		add	d, #01024
		bcc	loc_D3F7
		ld	d, #0FFFFh

loc_D3F7:				; CODE XREF: __RESET+AF0j
		st	d, word_168
		ld	y, #0C6B9h
		jsr	THW2dtemp64	; jump to twoD_THW, half output	and store D in temp_64
		mov	d, x
		ld	b, byte_16C	; rpm through C6C6
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows
		add	d, #01024
		bcc	loc_D40F
		ld	d, #0FFFFh

loc_D40F:				; CODE XREF: __RESET+B08j
		st	d, word_16A
		jmp	loc_D5CF
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; jump to twoD_THW, half output	and store D in temp_64

THW2dtemp64:				; CODE XREF: __RESET+AD8p __RESET+AFBp
		jsr	TwoD_THW
		shr	d
		st	d, temp_64
		ret
; End of function THW2dtemp64


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D41C:				; CODE XREF: ROM:DDD2p
					; __RESET:loc_E814p

; FUNCTION CHUNK AT D5CE SIZE 00000001 BYTES

		tbs	bit7, flags_45
		beq	loc_D423
		jmp	locret_D5CE
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D423:				; CODE XREF: sub_D41C+2j
		ld	d, word_E9
		ld	y, #0C6CEh
		jsr	other2D_e
		shr	d
		tbbs	bit0, flags_46,	loc_D440
		st	d, unk_162
		st	d, unk_164
		clr	a
		clr	b
		st	d, unk_160
		st	d, word_15E
		jmp	locret_D5CE
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D440:				; CODE XREF: sub_D41C+10j
		push	d
		ld	x, unk_164
		cmp	d, unk_164
		bcc	loc_D44D
		mov	d, x
		ld	d, unk_164

loc_D44D:				; CODE XREF: sub_D41C+2Bj
		st	d, temp_64
		st	x, temp_66
		ld	y, #0064h
		ld	d, unk_162
		jsr	BoundAccD
		mov	d, x
		clrb	bit1, flags_45
		sub	d, unk_162
		st	x, unk_162
		bcc	loc_D468
		jsr	NegDsetSpec

loc_D468:				; CODE XREF: sub_D41C+47j
		cmp	d, #0200h
		bcs	loc_D492
		mov	d, x
		ld	d, byte_16F
		tbbs	bit1, flags_45,	loc_D475
		mov	b, a

loc_D475:				; CODE XREF: sub_D41C+55j
		cmpz	a
		bne	loc_D479
		inc	a

loc_D479:				; CODE XREF: sub_D41C+5Aj
		neg	a
		mul	a, #80h
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		jsr	NegDspecial
		add	d, unk_160
		bvc	loc_D48F
		ld	d, #7FFFh
		tbbc	bit1, flags_45,	loc_D48F
		inc	a
		inc	b

loc_D48F:				; CODE XREF: sub_D41C+69j sub_D41C+6Ej
		st	d, unk_160

loc_D492:				; CODE XREF: sub_D41C+4Fj
		pull	y
		mov	y, d
		sub	d, unk_164
		ld	x, unk_162
		st	x, unk_164
		xch	x, y
		st	x, unk_162
		clrb	bit1, flags_45
		bcc	loc_D4A8
		jsr	NegDsetSpec

loc_D4A8:				; CODE XREF: sub_D41C+87j
		mov	d, x
		ld	b, unk_166
		tbbc	bit1, flags_45,	loc_D4B2
		ld	b, unk_167

loc_D4B2:				; CODE XREF: sub_D41C+90j
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows
		st	d, temp_64
		ld	x, byte_172	; rpm through C693
		push	x
		mov	s, x
		tbbc	bit1, flags_45,	loc_D4C3
		neg	a
		neg	b
		subc	a, #00h

loc_D4C3:				; CODE XREF: sub_D41C+A0j
		cmp	d, #0400h
		blta	loc_D4CC
		ld	a, x + 00h
		bra	loc_D4CE
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D4CC:				; CODE XREF: sub_D41C+AAj
		ld	a, x + 01h

loc_D4CE:				; CODE XREF: sub_D41C+AEj
		st	a, unk_171
		pull	x
		ld	d, temp_64
		tbbc	bit1, flags_45,	loc_D4E7
		cmp	#14h, VTA	; writ in adc vec 1, probably VTA (TPS)
		bcs	loc_D4E7
		push	a
		ld	a, unk_126
		cmp	a, #0FCh
		pull	a
		blta	loc_D4E7
		clr	a
		clr	b

loc_D4E7:				; CODE XREF: sub_D41C+B8j sub_D41C+BEj ...
		ld	y, #0C66Ah
		jsr	other2D_c
		st	a, temp_66
		ld	d, byte_16F
		tbbc	bit1, flags_45,	loc_D4F6
		mov	b, a

loc_D4F6:				; CODE XREF: sub_D41C+D6j
		mul	a, temp_66
		shl	d
		bcc	loc_D4FD
		ld	a, #0FFh

loc_D4FD:				; CODE XREF: sub_D41C+DDj
		mov	a, b
		bne	loc_D501
		inc	b

loc_D501:				; CODE XREF: sub_D41C+E2j
		neg	b
		push	b
		ld	x, temp_64
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		cmpz	a
		bpz	loc_D50E
		ld	d, #7FFFh

loc_D50E:				; CODE XREF: sub_D41C+EDj
		jsr	NegDspecial
		st	d, temp_66
		ld	x, temp_64
		pull	a
		mul	a, #80h
		jsr	mulDbyX		; return upper 32 in X:Y
		mov	x, d
		cmpz	a
		bpz	loc_D522
		ld	d, #7FFFh

loc_D522:				; CODE XREF: sub_D41C+101j
		jsr	NegDspecial
		st	d, temp_64
		clrb	bit1, flags_45
		ld	d, unk_160
		bpz	loc_D531
		jsr	NegDsetSpec

loc_D531:				; CODE XREF: sub_D41C+110j
		push	d
		mov	d, x
		ld	a, unk_171
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		shr	d
		shr	d
		jsr	NegDspecial
		add	d, temp_66
		jsr	sub_D5B9
		st	d, temp_66
		pull	x
		ld	a, unk_171
		mul	a, #80h
		shr	d
		shr	d
		bne	loc_D550
		inc	b

loc_D550:				; CODE XREF: sub_D41C+131j
		neg	a
		neg	b
		subc	a, #00h
		jsr	mulDbyX		; return upper 32 in X:Y
		mov	x, d
		jsr	NegDspecial
		add	d, temp_64
		jsr	sub_D5B9
		st	d, unk_160
		ld	d, temp_66
		ld	x, word_168
		cmp	d, #0040h
		bgea	loc_D594
		ld	x, word_16A
		sub	d, #0FFC0h
		blta	loc_D594
		shl	d
		st	b, temp_64
		ld	y, #016Ah
		ld	d, word_168
		sub	d, y + 00h
		bcc	loc_D58B
		ld	y, #0168h
		neg	a
		neg	b
		subc	a, #00h
		neg	temp_64

loc_D58B:				; CODE XREF: sub_D41C+164j
		mov	d, x
		ld	a, temp_64
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		add	d, y + 00h
		mov	d, x

loc_D594:				; CODE XREF: sub_D41C+14Fj
					; sub_D41C+157j
		clrb	bit1, flags_45
		ld	d, temp_66
		bpz	loc_D59D
		jsr	NegDsetSpec

loc_D59D:				; CODE XREF: sub_D41C+17Cj
		jsr	mulDbyX		; return upper 32 in X:Y
		jsr	sub_C154
		jsr	NegDspecial
		st	d, word_15E
		ld	d, byte_16D	; thw through C6A1
		sub	d, #000Ch
		bcc	loc_D5B3
		clr	a
		clr	b

loc_D5B3:				; CODE XREF: sub_D41C+193j
		st	d, byte_16D	; thw through C6A1
		jmp	locret_D5CE
; End of function sub_D41C


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D5B9:				; CODE XREF: sub_D41C+124p
					; sub_D41C+141p
		bvc	loc_D5C3
		ld	d, #7FFFh
		tbbc	bit1, flags_45,	loc_D5C3
		inc	a
		inc	b

loc_D5C3:				; CODE XREF: sub_D5B9j	sub_D5B9+5j
		cmpz	a
		bpz	locret_D5CD
		cmp	#122, count_B7
		bcc	locret_D5CD
		clr	a
		clr	b

locret_D5CD:				; CODE XREF: sub_D5B9+Bj sub_D5B9+10j
		ret
; End of function sub_D5B9

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR sub_D41C

locret_D5CE:				; CODE XREF: sub_D41C+4j sub_D41C+21j	...
		ret
; END OF FUNCTION CHUNK	FOR sub_D41C
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_D5CF:				; CODE XREF: __RESET+B10j
		ld	a, flags_1F2	; copies into flags_4F
		st	a, flags_4F
		cmp	#020, count_B1
		bcc	loc_D5DC
		jmp	loc_D999
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D5DC:				; CODE XREF: __RESET+CD5j
		clr	count_B1
		tbbs	bit7, flags_42,	loc_D5EB ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	d, word_1DC
		cmp	d, #0BAE1h
		bcc	loc_D5EB
		setb	bit0, flags_4F

loc_D5EB:				; CODE XREF: __RESET+CDCj __RESET+CE5j
		ld	a, #0E4h
		tbbs	bit1, flags_4F,	loc_D5F2
		ld	a, #0E7h

loc_D5F2:				; CODE XREF: __RESET+CEBj
		cmp	a, THW		; set in adc vec 3, not	of bits	read from adc, probably	THW
		bgt	loc_D62B
		setb	bit1, flags_4F
		cmp	#1Eh, count_D9
		bcs	loc_D62D
		ld	a, unk_14F
		or	a, word_151
		or	a, unk_149
		bne	loc_D62D
		tbbs	bit4, flags_49,	loc_D62D ; no bits set or cleared overtly
		ld	a, flags_1F4	; based	on flags_4F
		cmpb	a, #40h
		bne	loc_D62D
		tbbc	bit6, flags_40,	loc_D62D ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		setb	bit2, flags_4F
		tbbs	bit4, flags_4F,	loc_D631
		ld	a, unk_F5
		cmp	a, #76h
		bcs	loc_D631
		cmp	a, #8Ah
		bgt	loc_D631
		cmp	#00h, count_CC
		ble	loc_D631
		bra	loc_D635
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D62B:				; CODE XREF: __RESET+CF2j
		clrb	bit1, flags_4F

loc_D62D:				; CODE XREF: __RESET+CF9j __RESET+D04j ...
		clrb	bit2, flags_4F
		clr	count_CC

loc_D631:				; CODE XREF: __RESET+D15j __RESET+D1Cj ...
		clr	a
		st	a, byte_1E4

loc_D635:				; CODE XREF: __RESET+D27j
		tbbc	bit2, flags_4F,	loc_D646
		tbbc	bit6, flags_4F,	loc_D642
		ld	a, flags_1F2	; copies into flags_4F
		cmpb	a, #04h
		beq	loc_D648

loc_D642:				; CODE XREF: __RESET+D36j
		ld	#80h, unk_FE
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D646:				; CODE XREF: __RESET:loc_D635j
		clr	unk_FE

loc_D648:				; CODE XREF: __RESET+D3Ej
		cmp	#00h, count_CC
		bgt	loc_D659
		ld	a, unk_1D3
		cmp	a, #20h
		bcs	loc_D659
		tbbc	bit3, flags_4F,	loc_D659
		setb	bit4, flags_4F

loc_D659:				; CODE XREF: __RESET+D49j __RESET+D50j ...
		tbbs	bit0, flags_40,	loc_D681+1 ; b0	- lilRPM not running flag, b1 -	deltaNE	based not running flag
		tbbc	bit4, flags_4F,	loc_D664
		tbbc	bit5, flags_4F,	loc_D681+1
		bra	loc_D672
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D664:				; CODE XREF: __RESET+D5Aj
		cmp	#00h, count_CC
		ble	loc_D681+1
		tbbs	bit7, flags_42,	loc_D66F ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		tbbs	bit0, flags_4F,	loc_D681+1

loc_D66F:				; CODE XREF: __RESET+D67j
		tbbc	bit2, flags_4F,	loc_D681+1

loc_D672:				; CODE XREF: __RESET+D60j
		ld	a, byte_1E4
		cmp	a, #03h
		bcs	loc_D684
		tbbs	bit7, flags_42,	loc_D67F ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		tbbs	bit0, flags_4F,	loc_D684

loc_D67F:				; CODE XREF: __RESET+D77j
		setb	bit3, flags_4F

loc_D681:				; CODE XREF: __RESET:loc_D659j
					; __RESET+D5Dj	...
		cmp	x, #757Fh

loc_D684:				; CODE XREF: __RESET+D75j __RESET+D7Aj
		tbbc	bit3, flags_4F,	loc_D68F
		tbbc	bit5, flags_4F,	loc_D691
		cmp	#40h, count_CC
		bcs	loc_D691

loc_D68F:				; CODE XREF: __RESET:loc_D684j
		clrb	bit4, flags_4F

loc_D691:				; CODE XREF: __RESET+D85j __RESET+D8Bj
		ld	d, PIM		; adc vector 0,	probably PIM (map signal)
		ld	y, #0C642h
		jsr	TwoDtable
		jsr	divDby16
		st	d, word_1D4	; PIM via C642
		clr	a
		clr	b
		mov	d, x
		ld	a, flags_1F4	; based	on flags_4F
		cmpb	a, #40h
		mov	x, d
		bne	loc_D705
		tbbc	bit2, flags_4F,	loc_D6B0
		tbbs	bit3, flags_4F,	loc_D6CD

loc_D6B0:				; CODE XREF: __RESET+DA8j
		tbbs	bit2, flags_40,	loc_D6C8 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, unk_119
		shl	d
		bcc	loc_D6BC
		ld	d, #0FFFFh

loc_D6BC:				; CODE XREF: __RESET+DB5j
		ld	y, #0C64Dh
		jsr	TwoDtable
		mov	d, x
		ld	a, #0Ah
		jsr	mulAbyX		; return upper 16b in D, copy of D in X

loc_D6C8:				; CODE XREF: __RESET:loc_D6B0j
		st	d, word_1DA
		bra	loc_D6D6
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D6CD:				; CODE XREF: __RESET+DABj
		ld	d, word_1D6
		tbbc	bit6, flags_4F,	loc_D6D6
		ld	d, word_1D8

loc_D6D6:				; CODE XREF: __RESET+DC9j __RESET+DCEj
		ld	x, #3127h
		jsr	mulDbyX		; return upper 32 in X:Y
		ld	d, unk_119
		jsr	mulDbyX		; return upper 32 in X:Y
		cmp	d, #0000h
		bcc	loc_D6EA
		ld	d, #0000h

loc_D6EA:				; CODE XREF: __RESET+DE3j
		cmp	d, #0FFFFh
		ble	loc_D6F2
		ld	d, #0FFFFh

loc_D6F2:				; CODE XREF: __RESET+DEBj
		cmp	d, word_1D4	; PIM via C642
		bcc	loc_D703
		mov	d, x
		ld	d, word_1D4	; PIM via C642
		jsr	bigDivider_b	; returns 256*X/D in D
		mov	b, a
		mul	a, #0C8h
		bra	loc_D705
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D703:				; CODE XREF: __RESET+DF3j
		ld	a, #0C8h

loc_D705:				; CODE XREF: __RESET+DA6j __RESET+DFFj
		st	a, unk_1D3
		cmp	a, #0C8h
		bcs	loc_D712
		tbbc	bit3, flags_4F,	loc_D712
		setb	bit7, flags_4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D712:				; CODE XREF: __RESET+E08j __RESET+E0Aj
		clrb	bit7, flags_4F
		tbbs	bit3, flags_4F,	loc_D721
		clr	a
		clr	b
		st	d, word_1D6
		ld	d, #0CCCDh
		bra	loc_D782
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D721:				; CODE XREF: __RESET+E12j
		ld	d, word_1D6
		di
		ld	x, unk_70
		tbbs	bit4, flags_4F,	loc_D784
		ei
		tbbc	bit6, flags_4B,	loc_D73C
		cmp	x, #5C29h
		bcc	loc_D73C
		sub	d, #000Ah
		bcc	loc_D754
		clr	a
		clr	b
		bra	loc_D754
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D73C:				; CODE XREF: __RESET+E29j __RESET+E2Fj
		tbbs	bit7, flags_4F,	loc_D751
		tbbs	bit6, flags_4B,	loc_D754
		cmp	x, #75C3h
		ble	loc_D754
		add	d, #000Ah
		bcc	loc_D754
		ld	d, #0FFFFh
		bra	loc_D754
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D751:				; CODE XREF: __RESET:loc_D73Cj
		jsr	sub_D845

loc_D754:				; CODE XREF: __RESET+E34j __RESET+E38j ...
		ld	y, #0C8E7h
		jsr	y + 0Dh
		st	d, word_1D6
		ld	x, unk_70
		ld	d, word_1E2
		tbbs	bit6, flags_4B,	loc_D773
		cmp	x, #8F5Ch
		ble	loc_D782
		add	d, #0066h
		bcc	loc_D782
		ld	d, #0FFFFh
		bra	loc_D782
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D773:				; CODE XREF: __RESET+E5Fj
		cmp	x, #75C3h
		bcc	loc_D782
		tbbs	bit6, flags_4F,	loc_D782
		sub	d, #0033h
		bcc	loc_D782
		clr	a
		clr	b

loc_D782:				; CODE XREF: __RESET+E1Dj __RESET+E65j ...
		bra	loc_D7D6
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D784:				; CODE XREF: __RESET+E25j
		tbbc	bit2, flags_4F,	loc_D792
		di
		ld	a, unk_F5
		cmp	a, #4Dh
		bcs	loc_D796
		cmp	a, #0A4h
		bgt	loc_D7B7

loc_D792:				; CODE XREF: __RESET:loc_D784j
		ei
		jmp	loc_D82B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D796:				; CODE XREF: __RESET+E8Aj
		add	a, #0Fh
		st	a, unk_F5
		mov	x, d
		add	d, #0F5Ch
		bcc	loc_D7A3
		ld	d, #0FFFFh

loc_D7A3:				; CODE XREF: __RESET+E9Cj
		ld	y, #0C8A9h
		jsr	BoundAccD
		st	d, unk_70
		ld	d, word_1E2
		sub	d, #07AEh
		bcc	loc_D7D6
		clr	a
		clr	b
		bra	loc_D7D6
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D7B7:				; CODE XREF: __RESET+E8Ej
		sub	a, #0Ah
		st	a, unk_F5
		mov	x, d
		sub	d, #0A3Dh
		bcc	loc_D7C3
		clr	a
		clr	b

loc_D7C3:				; CODE XREF: __RESET+EBDj
		ld	y, #0C8A9h
		jsr	BoundAccD
		st	d, unk_70
		ld	d, word_1E2
		add	d, #051Fh
		bcc	loc_D7D6
		ld	d, #0FFFFh

loc_D7D6:				; CODE XREF: __RESET:loc_D782j
					; __RESET+EAFj	...
		ei
		st	d, word_1E2
		tbbc	bit3, flags_4F,	loc_D81E
		ld	a, unk_1D3
		cmp	a, #0Ah
		bcs	loc_D82B
		clrb	bit1, flags_45
		ld	d, word_1E2
		sub	d, #0CCCDh
		bcc	loc_D7F1
		jsr	NegDsetSpec

loc_D7F1:				; CODE XREF: __RESET+EEAj
		mov	d, x
		ld	d, word_1D6
		jsr	bigDivider_b	; returns 256*X/D in D
		ld	x, #0500h
		jsr	mulDbyX		; return upper 32 in X:Y
		tbbs	bit1, flags_45,	loc_D80B

loc_D801:
		add	d, #0CCCDh
		bcc	loc_D816
		ld	d, #0FFFFh
		bra	loc_D816
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D80B:				; CODE XREF: __RESET+EFCj
		sub	d, #0CCCDh
		bcs	loc_D812
		clr	a
		clr	b

loc_D812:				; CODE XREF: __RESET+F0Cj
		neg	a
		neg	b
		subc	a, #00h

loc_D816:				; CODE XREF: __RESET+F02j __RESET+F07j
		cmp	d, #0000h
		bcc	loc_D81E
		ld	d, #0000h

loc_D81E:				; CODE XREF: __RESET+ED8j __RESET+F17j
		st	d, word_1DC
		cmp	d, #0C7AEh
		bcs	loc_D829
		clrb	bit5, flags_4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D829:				; CODE XREF: __RESET+F22j
		setb	bit5, flags_4F

loc_D82B:				; CODE XREF: __RESET+E91j __RESET+EE0j
		clr	a
		clr	b
		tbbc	bit2, flags_4F,	loc_D83F
		tbbc	bit3, flags_4F,	loc_D83F
		tbbs	bit6, flags_4F,	loc_D842
		ld	d, word_1D6
		tbbc	bit7, flags_4F,	loc_D83F
		jsr	sub_D845

loc_D83F:				; CODE XREF: __RESET+F2Bj __RESET+F2Ej ...
		st	d, word_1D8

loc_D842:				; CODE XREF: __RESET+F31j
		jmp	loc_D999
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D845:				; CODE XREF: __RESET:loc_D751p
					; __RESET+F3Ap
		ld	d, unk_119
		ld	x, #12583
		jsr	mulDbyX		; return upper 32 in X:Y
		mov	x, d
		ld	x, word_1D4	; PIM via C642
		jsr	bigDivider_b	; returns 256*X/D in D
		ret
; End of function sub_D845


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D856:				; CODE XREF: sub_D0C6+10p
		ld	a, byte_1E4
		inc	a
		beq	locret_D85F
		st	a, byte_1E4

locret_D85F:				; CODE XREF: sub_D856+4j
		ret
; End of function sub_D856

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D860:				; CODE XREF: ROM:DDF7p
		ld	a, flags_1F2	; copies into flags_4F
		xch	a, flags_4F
		push	a
		ld	d, word_13D
		jsr	mulDbyX		; return upper 32 in X:Y
		push	x
		clrb	bit1, flags_45
		ld	d, #00C8h
		tbbs	bit7, flags_42,	loc_D878 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	d, #0113h

loc_D878:				; CODE XREF: ROM:D872j
		ld	x, word_15E
		bpz	loc_D887
		sub	d, word_15E
		bcs	loc_D88F
		ld	d, #0FFFFh
		bra	loc_D88F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D887:				; CODE XREF: ROM:D87Bj
		sub	d, word_15E
		bcc	loc_D88F
		jsr	NegDsetSpec

loc_D88F:				; CODE XREF: ROM:D880j	ROM:D885j ...
		mov	d, x
		pull	d
		ld	y, #0000h
		jsr	bigDivider_a	; returns X/D in D, with shifting as specified by Y
		tbbc	bit1, flags_45,	loc_D8AA
		add	d, word_13B
		bcs	loc_D8B4
		sub	d, #4CCDh
		bcc	loc_D8B4
		neg	a
		neg	b
		subc	a, #00h
		bra	loc_D8C0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D8AA:				; CODE XREF: ROM:D897j
		sub	d, word_13B
		bcc	loc_D8B8
		add	d, #4CCDh
		bcs	loc_D8C0

loc_D8B4:				; CODE XREF: ROM:D89Dj	ROM:D8A2j
		clr	a
		clr	b
		bra	loc_D8C0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D8B8:				; CODE XREF: ROM:D8ADj
		add	d, #4CCDh
		bcc	loc_D8C0
		ld	d, #0FFFFh

loc_D8C0:				; CODE XREF: ROM:D8A8j	ROM:D8B2j ...
		ld	y, #0C8E3h
		jsr	y + 11h		; C8F4
		st	d, word_1DE
		tbbc	bit6, flags_4F,	loc_D90C
		tbbc	bit2, flags_4F,	loc_D8EE
		ld	d, #0CCCDh
		sub	d, word_1DE
		ble	loc_D8E9
		mov	d, x
		ld	d, #0CCCDh
		sub	d, word_1DC
		ble	loc_D8E9
		jsr	bigDivider_b	; returns 256*X/D in D
		ld	x, #01280
		jsr	mulDbyX		; return upper 32 in X:Y
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D8E9:				; CODE XREF: ROM:D8D4j	ROM:D8DDj
		clr	a
		clr	b
		st	d, word_1D8

loc_D8EE:				; CODE XREF: ROM:D8CBj
		tbbs	bit4, flags_4F,	loc_D91E
		ld	y, #0C8E7h
		jsr	y + 0Dh
		st	d, word_1D6
		ld	d, word_1DE
		ld	x, word_1DC
		cmp	x, #0CCCDh
		bcs	loc_D907
		ld	d, #0CCCDh

loc_D907:				; CODE XREF: ROM:D902j
		st	d, word_1E2
		bra	loc_D91E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D90C:				; CODE XREF: ROM:D8C8j
		tbbc	bit2, flags_4F,	loc_D91E
		tbbs	bit4, flags_4F,	loc_D91E
		tbbc	bit7, flags_4F,	loc_D91E
		ld	x, word_1D6
		jsr	sub_D950
		st	d, word_1E2

loc_D91E:				; CODE XREF: ROM:loc_D8EEj ROM:D90Aj ...
		ld	x, word_1D8
		ld	d, word_1E2
		tbbc	bit7, flags_4F,	loc_D92D
		tbbc	bit4, flags_4F,	loc_D92D
		jsr	sub_D950

loc_D92D:				; CODE XREF: ROM:D924j	ROM:D927j
		cmp	d, word_1DE
		bcc	loc_D938
		ld	d, word_1DE
		setb	bit6, flags_4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D938:				; CODE XREF: ROM:D930j
		clrb	bit6, flags_4F
		ld	y, unk_FE
		bpz	loc_D943
		ld	x, word_1D8
		bne	loc_D946

loc_D943:				; CODE XREF: ROM:D93Cj
		ld	d, #0CCCDh

loc_D946:				; CODE XREF: ROM:D941j
		st	d, word_1E0
		pull	a
		xch	a, flags_4F
		st	a, flags_1F2	; copies into flags_4F
		ret

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D950:				; CODE XREF: ROM:D918p	ROM:D92Ap
		ld	a, #33h
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		clrb	bit1, flags_45
		ld	d, word_1DC
		sub	d, #0CCCDh
		bcc	loc_D962
		jsr	NegDsetSpec

loc_D962:				; CODE XREF: sub_D950+Dj
		jsr	mulDbyX		; return upper 32 in X:Y
		tbbs	bit1, flags_45,	loc_D972
		add	d, #0CCCDh
		bcc	locret_D97D
		ld	d, #0FFFFh
		bra	locret_D97D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D972:				; CODE XREF: sub_D950+15j
		sub	d, #0CCCDh
		bcs	loc_D979
		clr	a
		clr	b

loc_D979:				; CODE XREF: sub_D950+25j
		neg	a
		neg	b
		subc	a, #00h

locret_D97D:				; CODE XREF: sub_D950+1Bj sub_D950+20j
		ret
; End of function sub_D950


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D97E:				; CODE XREF: IV6-BCp
		tbbs	bit5, flags_40,	locret_D998 ; b0 - lilRPM not running flag, b1 - deltaNE based not running flag
		ld	b, unk_1D2
		add	b, #0Ah
		cmp	b, #0C8h
		bcs	loc_D98B
		clr	b

loc_D98B:				; CODE XREF: sub_D97E+Aj
		st	b, unk_1D2
		cmp	b, unk_1D3
		bcc	loc_D996
		setb	bit0, PORTA
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D996:				; CODE XREF: sub_D97E+13j
		clrb	bit0, PORTA

locret_D998:				; CODE XREF: sub_D97Ej
		ret
; End of function sub_D97E

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_D999:				; CODE XREF: __RESET+CD7j
					; __RESET:loc_D842j
		ld	a, flags_4F
		st	a, flags_1F2	; copies into flags_4F
		ld	b, word_9A
		bmi	loc_D9A9
		ld	a, sixDeltaNE	; time for 180 deg crank rotation
		cmp	a, #037		; 9472,	about 800 rpm
		bcc	loc_D9AD

loc_D9A9:				; CODE XREF: __RESET+109Ej
		clr	a
		st	a, unk_303

loc_D9AD:				; CODE XREF: __RESET+10A5j
		ld	a, unk_302
		cmp	a, #0A7h
		bcc	loc_D9BE
		cmp	#14h, count_D9
		bcc	loc_D9BE
		cmp	#5Ch, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_D9C2

loc_D9BE:				; CODE XREF: __RESET+10B0j
					; __RESET+10B5j
		and	b, #7Fh
		bra	loc_D9F1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_D9C2:				; CODE XREF: __RESET+10BAj
		cmp	#51h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_D9F1
		cmp	#0A8h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcc	loc_D9F1
		ld	a, unk_304
		cmp	a, #2Eh
		bcc	loc_D9F1
		add	a, #1Fh
		bcs	loc_D9F1
		cmp	a, unk_303
		bcc	loc_D9F1
		cmpb	b, #80h
		bne	loc_D9E5
		ld	a, #00h
		st	a, unk_302

loc_D9E5:				; CODE XREF: __RESET+10DCj
		or	b, #80h
		di
		ld	a, unk_301
		or	a, #02h
		st	a, unk_301
		ei

loc_D9F1:				; CODE XREF: __RESET+10BEj
					; __RESET+10C3j ...
		ld	x, #009Ah
		jsr	sub_D2A3	; play swith magic memory specified by x
		bra	loc_DA35
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_D9F9:				; CODE XREF: __RESET+2BCp
		tbbc	bit0, flags_40,	locret_DA1A ; b0 - lilRPM not running flag, b1 - deltaNE based not running flag
		cmp	#51h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	locret_DA1A
		cmp	#0A8h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcc	locret_DA1A
		ld	a, word_9A
		bmi	locret_DA1A
		ld	a, unk_304
		mul	a, #07h
		add	b, unk_303
		addc	a, #00h
		jsr	duvby8satB
		st	b, unk_304

locret_DA1A:				; CODE XREF: sub_D9F9j	sub_D9F9+6j ...
		ret
; End of function sub_D9F9


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DA1B:				; CODE XREF: __RESET+1B41p
		tbbc	bit5, flags_49,	locret_DA34 ; no bits set or cleared overtly
		ld	a, sixDeltaNE	; time for 180 deg crank rotation
		cmp	a, #195		; 49920
		bcc	locret_DA34
		ld	a, unk_303
		inc	a
		beq	loc_DA2F
		cmp	a, #7Ah
		bcs	loc_DA31

loc_DA2F:				; CODE XREF: sub_DA1B+Ej
		ld	a, #7Ah

loc_DA31:				; CODE XREF: sub_DA1B+12j
		st	a, unk_303

locret_DA34:				; CODE XREF: sub_DA1Bj	sub_DA1B+8j
		ret
; End of function sub_DA1B

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_DA35:				; CODE XREF: __RESET+10F5j
		tbbc	bit0, flags_40,	loc_DAA8 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	y, #0C563h
		jsr	TwoD_THW
		st	d, temp_64
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	divby16satB	; saturate at B	849 RPM	(i think)
		ld	y, #0C574h
		jsr	other2D		; decresing output with	increasing super-low-RPM values
		st	a, temp_66
		ld	y, #0C57Dh
		jsr	TwoD_THW
		cmp	a, temp_66
		bcc	loc_DA59	; choose lowest
		st	a, temp_66

loc_DA59:				; CODE XREF: __RESET+1153j
		ld	d, #06778
		ld	x, word_9A
		bpz	loc_DA63
		ld	d, #65311

loc_DA63:				; CODE XREF: __RESET+115Cj
		cmp	b, unk_302

loc_DA66:
		ble	loc_DA6A
		ld	a, temp_66

loc_DA6A:				; CODE XREF: __RESET:loc_DA66j
		ld	x, temp_64
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		st	d, temp_64
		ld	b, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		ld	y, #0C584h
		jsr	other2D
		mov	a, b
		ld	x, temp_64
		jsr	mul2BbyX	; return upper 32 in X:Y
		st	d, temp_64
		tbbs	bit3, flags_4B,	loc_DA97
		ld	a, word_96
		tbbs	bit0, flags_42,	loc_DA8B ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	a, #80h

loc_DA8B:				; CODE XREF: __RESET+1184j
		clr	b
		div	d, #156
		bcc	loc_DA92
		ld	b, #0FFh

loc_DA92:				; CODE XREF: __RESET+118Cj
		ld	x, temp_64
		jsr	mulBbyX		; return upper 16b in D, copy of D in X

loc_DA97:				; CODE XREF: __RESET+117Fj
		di
		ld	x, word_9A
		bpz	loc_DAA2	; assigns pulsewidth when engine is not	running	(flags_40 b0 ==	0)
		mov	d, x
		ld	b, #13h
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows

loc_DAA2:				; CODE XREF: __RESET+1198j
		st	d, Pulsewidth	; assigns pulsewidth when engine is not	running	(flags_40 b0 ==	0)
		clrb	bit3, flags_44
		ei

loc_DAA8:				; CODE XREF: __RESET:loc_DA35j
		bra	loc_DAD0
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DAAA:				; CODE XREF: __RESET+1B2Cp
		ld	a, unk_302
		tbbc	bit0, flags_40,	loc_DAB6 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit5, flags_49,	loc_DAB6 ; no bits set or cleared overtly
		inc	a
		bra	loc_DAC0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DAB6:				; CODE XREF: sub_DAAA+3j sub_DAAA+6j
		cmp	#20h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_DACB
		cmp	#3Dh, count_B7
		bcc	loc_DACB

loc_DAC0:				; CODE XREF: sub_DAAA+Aj
		ld	b, #0A8h
		ld	x, word_9A
		bpz	loc_DAC8
		ld	b, #0A8h

loc_DAC8:				; CODE XREF: sub_DAAA+1Aj
		cmp	a, b
		bcs	loc_DACC

loc_DACB:				; CODE XREF: sub_DAAA+Fj sub_DAAA+14j
		clr	a

loc_DACC:				; CODE XREF: sub_DAAA+1Fj
		st	a, unk_302
		ret
; End of function sub_DAAA

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_DAD0:				; CODE XREF: __RESET:loc_DAA8j
		tbbs	bit0, flags_40,	loc_DAD5 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		setb	bit0, flags_45

loc_DAD5:				; CODE XREF: __RESET:loc_DAD0j
		tbbs	bit5, flags_49,	loc_DADA ; no bits set or cleared overtly
		clr	count_A5

loc_DADA:				; CODE XREF: __RESET:loc_DAD5j
		cmp	#0Ch, count_A5
		bcs	loc_DAF6
		tbbs	bit6, flags_4A,	loc_DAF6
		cmp	#46h, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		bcs	loc_DAF6
		tbs	bit0, flags_45
		bne	loc_DAF6
		ld	a, word_9A
		bmi	loc_DAF6
		ld	d, Pulsewidth
		shr	d
		jsr	doAllinjectors

loc_DAF6:				; CODE XREF: __RESET+11DBj
					; __RESET+11DDj ...
		bra	loc_DB06
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; throw	a 10ms pulse on	all injectors if some flags are	okay

doInj_10ms:				; CODE XREF: IV6sub1:loc_F373p
		tbbc	bit6, flags_4A,	locret_DB05 ; bomb out
		tbs	bit0, flags_45
		bne	locret_DB05	; bomb out
		ld	d, #02500	; 10ms
		jsr	doAllinjectors

locret_DB05:				; CODE XREF: doInj_10msj doInj_10ms+5j
		ret			; bomb out
; End of function doInj_10ms

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_DB06:				; CODE XREF: __RESET:loc_DAF6j
		jsr	calcPW		; 2000 RPM
		jsr	sub_EDE4
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	y, #0C624h
		jsr	other2D_d
		mov	a, b
		clr	a
		st	d, word_133
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	y, #0C62Bh
		jsr	other2D_d
		mov	a, b
		clr	a
		st	d, word_135
		jmp	loc_DBA0
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; plays	with map, 3d table

sub_DB29:				; CODE XREF: ROM:DD94p
		mov	x, d
		sub	d, unk_123
		bcc	loc_DB37
		add	d, PIM		; adc vector 0,	probably PIM (map signal)
		bcs	loc_DB3E
		clr	a
		clr	b
		bra	loc_DB3E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DB37:				; CODE XREF: sub_DB29+4j
		add	d, PIM		; adc vector 0,	probably PIM (map signal)
		bcc	loc_DB3E
		ld	d, #0FFFFh

loc_DB3E:				; CODE XREF: sub_DB29+8j sub_DB29+Cj ...
		st	d, word_137
		ld	d, word_F6
		shl	d
		mov	d, x
		clr	b
		ld	a, word_96
		tbbs	bit0, flags_42,	loc_DB4D ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	a, #80h

loc_DB4D:				; CODE XREF: sub_DB29+1Fj
		sub	d, word_137
		bcc	loc_DB54
		clr	a
		clr	b

loc_DB54:				; CODE XREF: sub_DB29+27j
		st	d, word_139
		jsr	divDby32
		ld	y, #0C220h
		jsr	ThreeDtable	; Table	pointer	in Y, inputs in	D and X
		st	d, word_11E
		ld	b, word_11C
		ld	x, PIM		; adc vector 0,	probably PIM (map signal)
		jsr	mul2BbyX	; return upper 32 in X:Y
		tbbc	bit5, flags_47,	loc_DB71
		ld	d, unk_123

loc_DB71:				; CODE XREF: sub_DB29+42j
		st	d, unk_54
		ret
; End of function sub_DB29


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DB74:				; CODE XREF: IV6-96p
		ld	d, word_11C
		cmp	d, word_11E
		beq	locret_DB9F
		bcs	loc_DB8C
		sub	d, word_135
		bcc	loc_DB85
		clr	a
		clr	b

loc_DB85:				; CODE XREF: sub_DB74+Dj
		cmp	d, word_11E
		bgt	loc_DB9C
		bra	loc_DB99
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DB8C:				; CODE XREF: sub_DB74+8j
		add	d, word_133
		bcc	loc_DB94
		ld	d, #0FFFFh

loc_DB94:				; CODE XREF: sub_DB74+1Bj
		cmp	d, word_11E
		bcs	loc_DB9C

loc_DB99:				; CODE XREF: sub_DB74+16j
		ld	d, word_11E

loc_DB9C:				; CODE XREF: sub_DB74+14j sub_DB74+23j
		st	d, word_11C

locret_DB9F:				; CODE XREF: sub_DB74+6j
		ret
; End of function sub_DB74

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_DBA0:				; CODE XREF: __RESET+1224j
		ld	y, #0C377h
		tbbc	bit4, flags_45,	loc_DBA9
		ld	y, #0C479h

loc_DBA9:				; CODE XREF: __RESET+12A1j
		ld	d, word_56	; word_E9/(byte_130*2)
		jsr	divDby16
		cmp	d, #02233
		bcs	loc_DBC0
		shl	d
		sub	d, #02233
		cmp	d, #02745
		bcs	loc_DBC0
		add	d, #02745
		shr	d

loc_DBC0:				; CODE XREF: __RESET+12AFj
					; __RESET+12B8j
		mov	d, x
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	a, #024
		bcs	loc_DBCA
		add	a, #024		; reduced resolution above 1200	RPM
		shr	d

loc_DBCA:				; CODE XREF: __RESET+12C3j
		jsr	ThreeDtableby4	; Table	pointer	in Y, inputs in	D and X, D divided by 4
		mov	a, b
		st	a, unk_132
		clr	a
		add	d, #0073h
		ld	x, #1389h
		jsr	mulDbyXmid	; mul D	by X, returns middle 15	bits in	D
		st	d, unk_147
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	x, word_12C
		jsr	mulDbyXmid	; mul D	by X, returns middle 15	bits in	D
		ld	d, #0231h
		jsr	mulDbyXmid	; mul D	by X, returns middle 15	bits in	D
		mov	y, d
		shl	a
		mov	x, d
		rolc	b
		rolc	a
		cmpz	a
		beq	loc_DBF6
		ld	b, #0FFh

loc_DBF6:				; CODE XREF: __RESET+12F0j
		st	b, unk_118
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	x, PIM		; multiplied by	RPM?
		jsr	mulDbyXmid	; mul D	by X, returns middle 15	bits in	D
		ld	d, #35909
		jsr	mulDbyXmid	; mul D	by X, returns middle 15	bits in	D
		ld	a, unk_132
		mul	a, #171		; 2/3
		add	a, #077
		bcc	loc_DC11
		ld	a, #0FFh

loc_DC11:				; CODE XREF: __RESET+130Bj
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		st	d, unk_119
		clr	a
		ld	b, unk_157
		shl	d
		inc	a
		push	d
		ld	y, #0080h
		ld	a, unk_149
		add	y, a
		ld	b, unk_14F
		add	y, b
		add	y, b
		ld	b, word_151
		ld	a, word_9A
		bpz	loc_DC3E
		ld	x, #0040h
		push	y
		jsr	mul2BbyX	; return upper 32 in X:Y
		pull	y
		cmpz	a
		beq	loc_DC3E
		ld	b, #0FFh

loc_DC3E:				; CODE XREF: __RESET+132Dj
					; __RESET+1338j
		add	y, b
		add	y, b
		mov	y, d
		shl	d
		pull	x
		jsr	mulDbyX		; return upper 32 in X:Y
		push	d
		clr	a
		ld	b, unk_1A5
		add	d, #0200h
		shr	d
		mov	d, x
		ld	b, unk_14E
		cmp	b, #80h
		beq	loc_DC5B
		jsr	sub_C10A	; even specialer mul D by X, with added	D!
		mov	d, x

loc_DC5B:				; CODE XREF: __RESET+1353j
		ld	b, unk_15D
		jsr	sub_C10A	; even specialer mul D by X, with added	D!
		pull	x
		jsr	mulDbyX		; return upper 32 in X:Y
		mov	d, x
		ld	d, unk_147
		jsr	mulDbyX		; return upper 32 in X:Y
		st	d, word_13D
		jsr	sub_D2AE
		ld	a, word_98
		tbbs	bit0, flags_42,	loc_DC79 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	a, #69h

loc_DC79:				; CODE XREF: __RESET+1372j
		clrb	bit1, flags_45
		mul	a, #04h
		sub	d, word_F6
		bcs	loc_DC85
		setb	bit1, flags_45
		bra	loc_DC89
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DC85:				; CODE XREF: __RESET+137Dj
		neg	a
		neg	b
		subc	a, #00h

loc_DC89:				; CODE XREF: __RESET+1381j
		push	d
		ld	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		shr	d
		shr	d
		ld	y, #0C55Ch
		jsr	other2D_c
		pull	x
		jsr	mulAbyX		; return upper 16b in D, copy of D in X
		jsr	NegDspecial
		cmpz	a
		bmi	loc_DCA3
		beq	loc_DCA4	; only write
		ld	b, #0FFh
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  41h ; A		; brn
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DCA3:				; CODE XREF: __RESET+139Aj
		clr	b

loc_DCA4:				; CODE XREF: __RESET+139Cj
		st	b, byte_174	; only write
		jmp	loc_DF32
; END OF FUNCTION CHUNK	FOR __RESET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

calcPW:					; CODE XREF: __RESET:loc_CC6Bp
					; __RESET:loc_DB06p ...
		ld	a, #040		; 2000 RPM
		tbbc	bit5, flags_47,	calcPW_1
		ld	a, #036		; 1800 RPM

calcPW_1:				; CODE XREF: ROM:DCACj
		cmp	a, RPM		; probably standard toyota format: 50's and fractions of 50
		bgt	calcPW_3	; bounce if RPM	less than 2000
		jsr	sub_DE61
		ld	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		jsr	sub_DE86
		jsr	divby4satB
		st	b, unk_131
		ld	y, #0C632h
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	other2D_d
		tbbc	bit5, flags_47,	calcPW_2
		sub	a, #0Ah
		bcc	calcPW_2
		clr	a

calcPW_2:				; CODE XREF: ROM:DCCBj	ROM:DCD0j
		cmp	a, unk_131
		bgt	calcPW_3
		setb	bit5, flags_47
		ld	d, unk_123
		st	d, unk_54
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

calcPW_3:				; CODE XREF: ROM:DCB3j	ROM:DCD6j
		clrb	bit5, flags_47
		ld	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		shr	d
		shr	d
		shr	d
		jsr	sub_DEA2	; VTA-RPM based	calculation (3d	table)
		st	a, unk_127
		mov	x, d
		st	a, unk_125
		ld	b, byte_130
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows
		st	x, word_120
		ld	a, unk_125
		cmp	a, #155
		ble	calcPW_4
		ld	a, #155

calcPW_4:				; CODE XREF: ROM:DCFFj
		mul	a, byte_130
		jsr	divby128satB
		st	b, unk_122
		ld	a, unk_129
		ld	b, unk_123
		jsr	signedSat
		st	a, unk_128
		ld	a, word_120	; perhpas ve calculated	from VTA and RPM?
		ld	b, unk_123
		jsr	signedSat
		st	a, unk_126
		ld	d, PIM		; adc vector 0,	probably PIM (map signal)
		tbbs	bit5, flags_40,	calcPW_5 ; probably always clear
		tbbs	bit0, flags_40,	calcPW_5 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit3, flags_46,	calcPW_6
		ld	y, #2800h	; 2000 RPM
		cmp	y, RPM		; probably standard toyota format: 50's and fractions of 50
		bgt	calcPW_5
		cmp	d, #938Ah
		bcs	calcPW_5
		push	x
		ld	x, #00292
		jsr	mulDbyX		; return upper 32 in X:Y
		pull	x

calcPW_5:				; CODE XREF: ROM:DD26j	ROM:DD29j ...
		jmp	loc_DD92
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

calcPW_6:				; CODE XREF: ROM:DD2Cj
		jsr	sub_DE61
		tbbc	bit4, flags_46,	loc_DD6B
		ld	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		cmpz	a
		bne	calcPW_7
		clr	a
		clr	b

calcPW_7:				; CODE XREF: ROM:DD4Fj
		jsr	sub_DE86
		shl	d
		bcs	loc_DD5F
		shl	d
		bcs	loc_DD5F
		shl	d
		bcc	loc_DD62

loc_DD5F:				; CODE XREF: ROM:DD57j	ROM:DD5Aj
		ld	d, #0FFFFh

loc_DD62:				; CODE XREF: ROM:DD5Dj
		jsr	sub_DEA9	; VTA/8
		ld	b, byte_130
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows

loc_DD6B:				; CODE XREF: ROM:DD49j
		ld	d, unk_129
		st	d, temp_64

loc_DD70:				; CODE XREF: ROM:DD7Cj
		push	x
		ld	y, #0064h
		ld	b, temp_66
		jsr	loc_C1F0	; iir filter input X, y_-1 in Y, ratio for input in B
		pull	x
		dec	unk_68
		bne	loc_DD70
		sub	d, unk_123
		bcc	loc_DD8B
		add	d, unk_54
		bcs	loc_DD92
		clr	a
		clr	b
		bra	loc_DD92
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DD8B:				; CODE XREF: ROM:DD81j
		add	d, unk_54
		bcc	loc_DD92
		ld	d, #0FFFFh

loc_DD92:				; CODE XREF: ROM:calcPW_5j ROM:DD85j ...
		st	d, word_E9
		jsr	sub_DB29	; plays	with map, 3d table
		ld	x, word_E9
		clr	a
		ld	b, byte_130
		shl	d
		jsr	bigDivider_b	; returns 256*X/D in D
		st	d, word_56	; word_E9/(byte_130*2)
		clr	a
		ld	b, unk_132
		add	d, #0073h
		ld	x, #0155h
		jsr	mulDbyX		; return upper 32 in X:Y
		ld	x, word_E9
		jsr	mulDbyXmid	; mul D	by X, returns middle 15	bits in	D
		st	d, word_12C
		ld	x, word_E9
		tbbs	bit3, flags_46,	loc_DDCF
		ld	d, unk_54
		add	d, word_E9
		rorc	a
		rorc	b
		mov	d, x
		ld	a, unk_132
		mul	a, #0ABh
		add	d, #4CABh
		jsr	mulDbyX		; return upper 32 in X:Y

loc_DDCF:				; CODE XREF: ROM:DDBAj
		st	x, word_12E
		jsr	sub_D41C
		jsr	sub_EDE4
		ld	a, flags_1F6	; another flags_4f copy
		st	a, flags_4F
		tbbc	bit0, flags_40,	loc_DDE3 ; running! lets calculate pulsewidth
		jmp	loc_DE58	; skip pulsewidth calculation
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DDE3:				; CODE XREF: ROM:DDDDj
		ld	d, word_E9	; running! lets	calculate pulsewidth
		cmp	d, #07030
		bcc	loc_DDF0
		ld	d, #07030	; establish minimum
		setb	bit3, flags_4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DDF0:				; CODE XREF: ROM:DDE8j
		clrb	bit3, flags_4F
		mov	d, x
		jsr	divDby16
		push	d
		jsr	loc_D860
		ld	d, word_1E0
		add	d, word_13B
		rorc	a
		rorc	b
		sub	d, #09831
		bcc	loc_DE09
		clr	a
		clr	b

loc_DE09:				; CODE XREF: ROM:DE05j
		jsr	divDby128
		pull	x
		jsr	mulDbyX		; return upper 32 in X:Y
		mov	d, x
		ld	d, word_13D
		jsr	divDby16
		jsr	mulDbyX		; return upper 32 in X:Y
		tbbs	bit5, flags_40,	loc_DE33 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		st	d, temp_64
		ld	d, word_15E
		bpz	loc_DE2C
		add	d, temp_64
		bcs	loc_DE33
		clr	a
		clr	b
		bra	loc_DE33
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DE2C:				; CODE XREF: ROM:DE22j
		add	d, temp_64
		bcc	loc_DE33
		ld	d, #0FFFFh

loc_DE33:				; CODE XREF: ROM:DE1Aj	ROM:DE26j ...
		tbbc	bit3, flags_4B,	loc_DE39
		ld	d, #0802h

loc_DE39:				; CODE XREF: ROM:loc_DE33j
		mov	d, x
		ld	a, flags_1F4	; based	on flags_4F
		cmpb	a, #01000000b
		mov	x, d
		beq	loc_DE4C
		cmp	#00h, VTA	; writ in adc vec 1, probably VTA (TPS)
		bcc	loc_DE4C
		ld	a, #0FFh
		jsr	mulAbyX		; return upper 16b in D, copy of D in X

loc_DE4C:				; CODE XREF: ROM:DE40j	ROM:DE45j
		ld	y, #0C8C9h
		jsr	y + 2Bh		; C8F4 bound accumulator D
		di
		st	d, Pulsewidth	; the other assignment
		setb	bit3, flags_44
		ei

loc_DE58:				; CODE XREF: ROM:DDE0j
		ld	a, flags_4F
		st	a, flags_1F6	; another flags_4f copy
		jsr	loc_F564
		ret

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DE61:				; CODE XREF: ROM:DCB5p	ROM:calcPW_6p
		ld	a, sixDeltaNE	; time for 180 deg crank rotation
		mul	a, #012
		shr	d
		shr	d
		shr	d		; time for 270 deg
		cmpz	a
		bne	loc_DE75
		add	b, Pulsewidth
		bcs	loc_DE75
		add	b, #0Eh
		bcc	loc_DE77

loc_DE75:				; CODE XREF: sub_DE61+9j sub_DE61+Ej
		ld	b, #0FFh

loc_DE77:				; CODE XREF: sub_DE61+12j
		shr	b
		shr	b
		shr	b
		cmp	b, #012
		ble	loc_DE80
		ld	b, #012

loc_DE80:				; CODE XREF: sub_DE61+1Bj
		st	b, unk_68
		shr	b
		st	b, temp_67
		ret
; End of function sub_DE61


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DE86:				; CODE XREF: ROM:DCBAp	ROM:calcPW_7p
		jsr	divDby64
		st	d, temp_64
		ld	a, unk_5A	; VTA flags I bet
		st	a, temp_66
		mul	a, temp_67
		cmp	#00h, temp_66
		bpz	loc_DE9F
		sub	a, temp_67
		add	d, temp_64
		bcs	locret_DEA1
		clr	a
		clr	b
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DE9F:				; CODE XREF: sub_DE86+Ej
		add	d, temp_64

locret_DEA1:				; CODE XREF: sub_DE86+14j
		ret
; End of function sub_DE86


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DEA2:				; CODE XREF: ROM:DCE7p
		cmp	d, #00032
		bcc	sub_DEA9	; VTA/8
		clr	a
		clr	b
; End of function sub_DEA2


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; VTA/8

sub_DEA9:				; CODE XREF: ROM:loc_DD62p sub_DEA2+3j
		st	d, temp_64
		clr	a
		ld	b, byte_174	; VTA is part of the product that generates this byte
		shl	d
		shl	d
		shl	d
		add	d, temp_64
		bcc	loc_DEB9
		ld	d, #0FFFFh

loc_DEB9:				; CODE XREF: sub_DEA9+Bj
		cmp	a, #07h
		bcs	loc_DEC7
		add	a, #07h
		shr	d		; reduced resolution above 7
		cmp	a, #09h
		bcs	loc_DEC7
		add	a, #09h
		shr	d		; doubly reduced resolution above 9

loc_DEC7:				; CODE XREF: sub_DEA9+12j sub_DEA9+19j
		mov	d, x
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		shr	d
		shr	d
		cmp	a, #006
		bcs	loc_DED3
		add	a, #006		; reduced resolution above 1200	RPM
		shr	d

loc_DED3:				; CODE XREF: sub_DEA9+25j
		ld	y, #0C260h
		jsr	ThreeDtable	; Table	pointer	in Y, inputs in	D and X
		push	d
		jsr	divDby32
		cmp	d, #00989
		ble	loc_DEE6
		shl	d
		sub	d, #00989

loc_DEE6:				; CODE XREF: sub_DEA9+37j
		mov	d, x
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	y, #0C242h
		jsr	ThreeDtableby32	; Table	pointer	in Y, inputs in	D and X, D divided by 32
		st	a, temp_66
		pull	x
		ret
; End of function sub_DEA9


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


signedSat:				; CODE XREF: ROM:DD12p	ROM:DD1Ep
		sub	a, b
		rorc	a
		rolc	a
		bvc	locret_DEFF
		bcs	loc_DEFD
		ld	a, #7Fh
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DEFD:				; CODE XREF: signedSat+5j
		ld	a, #80h

locret_DEFF:				; CODE XREF: signedSat+3j
		ret
; End of function signedSat


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DF00:				; CODE XREF: IV6-93p
		ld	x, word_120
		tbbc	bit0, flags_40,	loc_DF09 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		st	x, unk_129

loc_DF09:				; CODE XREF: sub_DF00+3j
		ld	y, #0129h
		ld	b, unk_127
		jsr	loc_C1F0	; iir filter input X, y_-1 in Y, ratio for input in B
		ret
; End of function sub_DF00


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DF13:				; CODE XREF: IV6:loc_F9B1p
		ld	d, word_120
		tbbs	bit0, flags_40,	loc_DF2E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, unk_129
		sub	d, unk_123
		beq	locret_DF31
		rorc	a
		rorc	b
		shra	a
		rorc	b
		cmp	d, #0000h
		bne	loc_DF2B
		inc	b

loc_DF2B:				; CODE XREF: sub_DF13+15j
		add	d, unk_123

loc_DF2E:				; CODE XREF: sub_DF13+3j
		st	d, unk_123

locret_DF31:				; CODE XREF: sub_DF13+Cj
		ret
; End of function sub_DF13

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_DF32:				; CODE XREF: __RESET+13A5j
		tbbc	bit5, flags_49,	loc_DF38 ; no bits set or cleared overtly
		clr	count_D1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DF38:				; CODE XREF: __RESET:loc_DF32j
		clr	count_AF
		ld	a, flags_1F5	; copied into flags_4F
		st	a, flags_4F
		cmp	#141, BVolts	; 11V
		bcc	loc_DF46
		setb	bit0, flags_4F

loc_DF46:				; CODE XREF: __RESET+1640j
		tbbs	bit5, flags_49,	loc_DF4D ; no bits set or cleared overtly
		clrb	bit0, flags_4F
		clr	count_D0

loc_DF4D:				; CODE XREF: __RESET:loc_DF46j
		cmp	#1Fh, count_D0
		bcs	loc_DF57
		tbbc	bit0, flags_4F,	loc_DF57
		setb	bit5, flags_4C

loc_DF57:				; CODE XREF: __RESET+164Ej
					; __RESET+1650j
		ld	a, flags_4F
		st	a, flags_1F5	; copied into flags_4F
		tbbc	bit5, flags_49,	loc_DF61 ; no bits set or cleared overtly
		clrb	bit0, flags_4B

loc_DF61:				; CODE XREF: __RESET+165Aj
		cmp	#14h, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_DF70
		cmp	#06h, count_B2
		ble	loc_DF70
		tbbc	bit0, flags_4B,	loc_DF70
		setb	bit6, flags_4C

loc_DF70:				; CODE XREF: __RESET+1662j
					; __RESET+1667j ...
		bra	loc_DF78
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_DF72:				; CODE XREF: IV9+18p
		tbbs	bit5, flags_49,	locret_DF77 ; no bits set or cleared overtly
		setb	bit0, flags_4B

locret_DF77:				; CODE XREF: sub_DF72j
		ret
; End of function sub_DF72

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_DF78:				; CODE XREF: __RESET:loc_DF70j
		jmp	loc_E2F6
; END OF FUNCTION CHUNK	FOR __RESET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DF7B:				; CODE XREF: __RESET+1B2Fp
		tbbs	bit7, flags_4A,	loc_DF99
		tbbc	bit7, flags_40,	loc_DF93 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit7, flags_40
		tbbs	bit3, flags_4E,	loc_DF89
		tbbc	bit0, flags_4A,	loc_DF93

loc_DF89:				; CODE XREF: ROM:DF83j
		clrb	bit0, flags_4A
		ld	d, flags_4C	; bit3 - PIM bad
		and	a, #0A1h
		and	b, #3Eh
		st	d, flags_4C	; bit3 - PIM bad

loc_DF93:				; CODE XREF: ROM:DF7Ej	ROM:DF86j
		ld	a, flags_4E
		and	a, #0C0h
		st	a, flags_4E

loc_DF99:				; CODE XREF: ROM:loc_DF7Bj
		ld	a, byte_E5	; average of e3, e4
		bne	loc_DFC5
		cmp	#28h, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_DFC7
		cmp	#64h, RPM	; probably standard toyota format: 50's and fractions of 50
		bcc	loc_DFC7
		cmp	#60h, PIM	; adc vector 0,	probably PIM (map signal)
		bcs	loc_DFC7
		cmp	#0E4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		ble	loc_DFC7
		ld	a, flags_1F4	; based	on flags_4F
		cmpb	a, #40h
		bne	loc_DFC7
		ld	a, word_80
		cmpb	a, #02h
		bne	loc_DFC7
		ld	a, word_80
		cmpb	a, #08h
		beq	loc_DFC9
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_DFC5:				; CODE XREF: ROM:DF9Bj
		clrb	bit7, flags_4C

loc_DFC7:				; CODE XREF: ROM:DFA0j	ROM:DFA5j ...
		clr	count_D2

loc_DFC9:				; CODE XREF: ROM:DFC2j
		cmp	#7Ah, count_D2
		bcs	loc_DFD0
		setb	bit7, flags_4C

loc_DFD0:				; CODE XREF: ROM:DFCCj
		cmp	#05h, byte_E5	; average of e3, e4
		bcs	loc_DFD7
		clrb	bit2, flags_4E

loc_DFD7:				; CODE XREF: ROM:DFD3j
		tbbc	bit2, flags_4A,	loc_E01B
		cmp	#1Eh, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_E01B
		cmp	#64h, byte_E5	; average of e3, e4
		bcc	loc_E01B
		cmp	#48h, PIM	; adc vector 0,	probably PIM (map signal)
		bcs	loc_E01B
		ld	b, word_84
		cmpb	b, #80h
		bne	loc_E01B
		ld	b, word_80
		cmpb	b, #02h
		bne	loc_E01B
		ld	b, word_80
		cmpb	b, #80h
		bne	loc_E01B
		ld	b, word_80
		cmpb	b, #08h
		bne	loc_E01B
		ld	b, word_82
		cmpb	b, #80h
		bne	loc_E01B
		tbbc	bit1, flags_4A,	loc_E01B
		ld	x, unk_F9
		cmp	x, #0131h
		bcc	loc_E01B
		ld	a, OX		; adc vector 5 multiplied by 4 (ie voltage is 1.25*count/256), probably	OX (oxygen sensor)
		cmp	a, #48h
		bcs	loc_E01B
		cmp	a, #8Fh
		bcs	loc_E01D

loc_E01B:				; CODE XREF: ROM:loc_DFD7j ROM:DFDDj ...
		clr	count_E0

loc_E01D:				; CODE XREF: ROM:E019j
		cmp	#3Ch, count_E0
		bcs	loc_E02B
		setb	bit6, flags_4D
		tbbc	bit7, flags_40,	loc_E02B ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		setb	bit6, flags_4E
		setb	bit3, flags_4E

loc_E02B:				; CODE XREF: ROM:E020j	ROM:E024j
		tbbc	bit6, flags_40,	loc_E062 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	b, unk_F8
		cmp	#0Ah, count_E1
		bcc	loc_E04E
		ld	a, OX		; adc vector 5 multiplied by 4 (ie voltage is 1.25*count/256), probably	OX (oxygen sensor)
		cmp	a, #48h
		bcc	loc_E03D
		setb	bit3, flags_4A

loc_E03D:				; CODE XREF: ROM:E039j
		cmp	a, #8Fh
		bcs	loc_E068
		tbbc	bit3, flags_4A,	loc_E068
		inc	b
		bne	loc_E048
		dec	b

loc_E048:				; CODE XREF: ROM:E045j
		st	b, unk_F8
		clrb	bit3, flags_4A
		bra	loc_E068
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E04E:				; CODE XREF: ROM:E033j
		cmp	b, #04h
		bcs	loc_E062
		tbbs	bit7, flags_40,	loc_E062 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit6, flags_4E
		ld	a, word_84
		and	a, #0BFh
		mov	a, b
		xor	b, #0FFh
		st	d, word_84
		clrb	bit6, flags_4D

loc_E062:				; CODE XREF: ROM:loc_E02Bj ROM:E050j ...
		clr	unk_F8
		clrb	bit3, flags_4A
		clr	count_E1

loc_E068:				; CODE XREF: ROM:E03Fj	ROM:E041j ...
		bra	loc_E087

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E06A:				; CODE XREF: __RESET+7B3p
		clrb	bit1, flags_4A
		ld	x, unk_F9
		cmp	x, #0003h
		bcs	loc_E07A
		cmp	x, #0131h
		bcc	loc_E07A
		setb	bit1, flags_4A

loc_E07A:				; CODE XREF: sub_E06A+7j sub_E06A+Cj
		clr	unk_F9
		clr	unk_FA
		ret
; End of function sub_E06A


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E07F:				; CODE XREF: __RESET+1AB3p
		ld	x, unk_F9
		inc	x
		beq	locret_E086
		st	x, unk_F9

locret_E086:				; CODE XREF: sub_E07F+3j
		ret
; End of function sub_E07F

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E087:				; CODE XREF: ROM:loc_E068j
		tbbc	bit4, flags_4A,	loc_E0A8
		cmp	#1Eh, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_E0A8
		cmp	#64h, byte_E5	; average of e3, e4
		bcc	loc_E0A8
		cmp	#0DCh, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_E0A8
		ld	a, word_80
		cmpb	a, #80h
		bne	loc_E0A8
		ld	a, word_80
		cmpb	a, #02h
		bne	loc_E0A8
		tbbc	bit6, flags_4B,	loc_E0AA

loc_E0A8:				; CODE XREF: ROM:loc_E087j ROM:E08Dj ...
		clr	count_DF

loc_E0AA:				; CODE XREF: ROM:E0A5j
		cmp	#5Ah, count_DF
		bcs	loc_E0B8
		setb	bit7, flags_4D
		tbbc	bit7, flags_40,	loc_E0B8 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		setb	bit3, flags_4E
		setb	bit7, flags_4E

loc_E0B8:				; CODE XREF: ROM:E0ADj	ROM:E0B1j
		tbbc	bit6, flags_4B,	loc_E0CB
		tbbs	bit7, flags_40,	loc_E0CB ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit7, flags_4D
		clrb	bit7, flags_4E
		ld	a, word_84
		and	a, #7Fh
		mov	a, b
		xor	b, #0FFh
		st	d, word_84

loc_E0CB:				; CODE XREF: ROM:loc_E0B8j ROM:E0BBj
		ld	a, flags_1F6	; another flags_4f copy
		st	a, flags_4F
		tbbs	bit3, PORTA, loc_E0E2 ;	Port A Data Register
		tbbs	bit2, PORTC, loc_E0DE ;	Port C Data Register
		cmp	#08h, count_D4
		bcs	loc_E0E4
		setb	bit1, flags_4D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E0DE:				; CODE XREF: ROM:E0D3j
		clrb	bit1, flags_4D
		setb	bit2, flags_4F

loc_E0E2:				; CODE XREF: ROM:E0D0j
		clr	count_D4

loc_E0E4:				; CODE XREF: ROM:E0D9j
		ld	a, flags_4F
		st	a, flags_1F6	; another flags_4f copy
		tbbc	bit7, flags_40,	loc_E0FB ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit4, flags_49,	loc_E0FB ; no bits set or cleared overtly
		tbbs	bit5, flags_49,	loc_E0FB ; no bits set or cleared overtly
		tbbs	bit0, flags_49,	loc_E0F8 ; no bits set or cleared overtly
		tbbs	bit6, flags_42,	loc_E0FB ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)

loc_E0F8:				; CODE XREF: ROM:E0F2j
		setb	bit5, flags_4E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E0FB:				; CODE XREF: ROM:E0E9j	ROM:E0ECj ...
		clrb	bit5, flags_4E
		tbbc	bit5, flags_49,	loc_E102 ; no bits set or cleared overtly
		clrb	bit4, flags_4E

loc_E102:				; CODE XREF: ROM:E0FDj
		di
		ld	a, flags_4E
		st	a, temp_67
		push	a
		ld	d, flags_4C	; bit3 - PIM bad
		ei
		tbbc	bit5, RAMST, loc_E113 ;	Built-in RAM status
		cmp	#7Ah, count_AC
		bgt	loc_E119

loc_E113:				; CODE XREF: ROM:E10Bj
		clr	a
		clr	b
		clr	unk_78
		bra	loc_E12D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E119:				; CODE XREF: ROM:E111j
		cmp	#08h, count_D1
		ble	loc_E129
		tbbs	bit4, IRQLL, loc_E129 ;	Interrupt Request Flag LSB
		tbbs	bit4, PORTD_ASRIN, loc_E129 ; Port D Data Register / ASR Input Data
		cmp	#7Ah, count_AD
		bgt	loc_E138

loc_E129:				; CODE XREF: ROM:E11Cj	ROM:E11Ej ...
		and	a, #21h
		and	b, #08h

loc_E12D:				; CODE XREF: ROM:E117j
		st	d, flags_4C	; bit3 - PIM bad
		mov	s, x
		xch	a, x + 00h
		and	a, #0D7h
		st	a, flags_4E
		xch	a, x + 00h

loc_E138:				; CODE XREF: ROM:E127j
		st	d, temp_64
		pull	a
		st	a, unk_68
		cmpb	a, #08h
		beq	loc_E143
		setb	bit0, flags_4A

loc_E143:				; CODE XREF: ROM:E13Fj
		mov	b, a
		and	b, #0Fh
		ld	x, #0082h
		or	b, x + 00h
		and	a, temp_67
		and	a, #0C0h
		st	a, temp_66
		or	b, temp_66
		jsr	sub_D2A3	; play swith magic memory specified by x
		ld	b, temp_64
		and	b, #0FFh
		jsr	sub_F7C6
		ld	x, #0080h
		or	b, x + 00h
		jsr	sub_D2A3	; play swith magic memory specified by x
		ld	a, unk_65
		or	a, word_84
		and	a, #0C0h
		st	a, temp_66
		ld	x, #0084h
		ld	b, unk_68
		or	b, x + 00h
		and	b, #00h
		or	b, temp_66
		jsr	sub_D2A3	; play swith magic memory specified by x
		bra	loc_E184

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E17D:				; CODE XREF: __RESET+124p
		ld	a, word_84
		and	a, #0C0h
		st	a, flags_4E
		ret
; End of function sub_E17D

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E184:				; CODE XREF: ROM:E17Bj
		tbbs	bit5, flags_40,	loc_E1B8 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit7, flags_4A,	loc_E1B8
		tbbs	bit4, flags_49,	loc_E19D ; no bits set or cleared overtly
		tbbc	bit6, flags_40,	loc_E1B6 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	b, unk_1E6
		cmp	b, #0CDh
		bcc	loc_E1AE
		cmp	b, #1Ah
		ble	loc_E1B6
		bra	loc_E1B1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E19D:				; CODE XREF: ROM:E18Aj
		tbbs	bit6, flags_47,	loc_E1A8
		tbbc	bit6, flags_40,	loc_E1B6 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit6, flags_4B,	loc_E1AE
		bra	loc_E1B6
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1A8:				; CODE XREF: ROM:loc_E19Dj
		clr	a
		jsr	sub_E292
		bne	loc_E1B6

loc_E1AE:				; CODE XREF: ROM:E195j	ROM:E1A3j
		clrb	bit3, DOUT
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1B1:				; CODE XREF: ROM:E19Bj
		setb	bit3, DOUT
		clrb	bit3, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1B6:				; CODE XREF: ROM:E18Dj	ROM:E199j ...
		setb	bit3, PORTB

loc_E1B8:				; CODE XREF: ROM:loc_E184j ROM:E187j
		tbbc	bit5, flags_40,	loc_E1BE ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		jmp	locret_E2F5
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1BE:				; CODE XREF: ROM:loc_E1B8j
		clr	b
		tbbs	bit5, RAMST, loc_E1C5 ;	Built-in RAM status
		jmp	loc_E27A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1C5:				; CODE XREF: ROM:E1BFj
		tbbs	bit4, flags_49,	loc_E1CB ; no bits set or cleared overtly
		tbbc	bit5, flags_4A,	loc_E235

loc_E1CB:				; CODE XREF: ROM:loc_E1C5j
		ld	a, unk_7A
		inc	a
		beq	loc_E1F6
		ld	b, unk_1A1
		inc	b
		bne	loc_E204
		ld	a, unk_79
		beq	loc_E1F6
		dec	a
		beq	loc_E1E9
		ld	b, #78h
		cmpb	a, #0Fh
		bne	loc_E231
		mul	a, #10h
		ld	b, #69h
		bra	loc_E231
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1E9:				; CODE XREF: ROM:E1DBj
		st	a, unk_79
		ld	a, unk_7A
		jsr	sub_E292
		beq	loc_E1FF
		ld	b, #5Ah
		bra	loc_E223
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1F6:				; CODE XREF: ROM:E1CEj	ROM:E1D8j
		jsr	sub_E292
		bne	loc_E1FF
		ld	b, #7Ch
		bra	loc_E221
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E1FF:				; CODE XREF: ROM:E1F0j	ROM:E1F9j
		clr	a
		ld	b, #3Bh
		bra	loc_E223
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E204:				; CODE XREF: ROM:E1D4j
		bvs	loc_E208
		bra	loc_E225
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E208:				; CODE XREF: ROM:loc_E204j
		ld	a, unk_79
		bne	loc_E22F
		st	a, unk_1A1
		tbbc	bit4, flags_49,	loc_E235 ; no bits set or cleared overtly
		setb	bit5, flags_4A
		ld	a, unk_7A
		bmi	loc_E21F
		bne	loc_E227
		jsr	sub_E292
		bne	loc_E227

loc_E21F:				; CODE XREF: ROM:E216j
		ld	b, #0FCh

loc_E221:				; CODE XREF: ROM:E1FDj
		ld	a, #80h

loc_E223:				; CODE XREF: ROM:E1F4j	ROM:E202j
		st	a, unk_7A

loc_E225:				; CODE XREF: ROM:E206j
		bra	loc_E286
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E227:				; CODE XREF: ROM:E218j	ROM:E21Dj
		st	a, unk_7A
		ld	y, #0E2B9h
		add	y, a
		ld	a, y + 02h

loc_E22F:				; CODE XREF: ROM:E20Aj
		ld	b, #0F8h

loc_E231:				; CODE XREF: ROM:E1E1j	ROM:E1E7j
		st	a, unk_79
		bra	loc_E286
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E235:				; CODE XREF: ROM:E1C8j	ROM:E20Fj
		tbbc	bit7, flags_40,	loc_E256 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit0, flags_40,	loc_E256 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	b, unk_1A1
		cmp	b, #7Eh
		bcc	loc_E244
		ld	b, #7Fh

loc_E244:				; CODE XREF: ROM:E240j
		cmp	b, #0FEh
		bgea	loc_E24A
		ld	b, #0FFh

loc_E24A:				; CODE XREF: ROM:E246j
		inc	b
		beq	loc_E252
		bvc	loc_E254
		ld	b, #0FEh
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E252:				; CODE XREF: ROM:E24Bj
		ld	b, #7Eh

loc_E254:				; CODE XREF: ROM:E24Dj
		bra	loc_E27F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E256:				; CODE XREF: ROM:loc_E235j ROM:E238j
		tbbc	bit7, flags_40,	loc_E25E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	b, #0FEh
		tbbs	bit0, flags_4A,	loc_E27F

loc_E25E:				; CODE XREF: ROM:loc_E256j
		ld	b, #0B4h
		ld	a, temp_64
		and	a, #0FBh
		bne	loc_E27F
		ld	a, unk_65
		and	a, #3Ch
		bne	loc_E27F
		ld	a, unk_68
		and	a, #00h
		bne	loc_E27F
		ld	b, unk_1A1
		inc	b
		bvs	loc_E27A
		bmi	loc_E27F

loc_E27A:				; CODE XREF: ROM:E1C2j	ROM:E276j
		clr	b
		tbbc	bit0, flags_40,	loc_E27F ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		dec	b

loc_E27F:				; CODE XREF: ROM:loc_E254j ROM:E25Bj ...
		clrb	bit5, flags_4A
		ld	#0FFh, unk_7A
		clr	unk_79

loc_E286:				; CODE XREF: ROM:loc_E225j ROM:E233j
		st	b, unk_1A1
		bpz	loc_E28E
		clrb	bit5, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E28E:				; CODE XREF: ROM:E289j
		setb	bit5, PORTB
		bra	locret_E2F5

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E292:				; CODE XREF: ROM:E1A9p	ROM:E1EDp ...
		ld	y, #0E2B9h
		add	a, #03h
		add	y, a
		cmp	a, #39h
		bgt	loc_E2B9
		ld	x, #0000h
		ld	b, y + 00h
		add	x, b
		ld	b, y + 01h
		cmpb	b, x + 00h
		beq	sub_E292

loc_E2A8:				; CODE XREF: sub_E292+25j
		cmp	a, #39h
		bcc	loc_E2BA
		ld	b, y + 02h
		cmp	b, y + 05h
		bne	loc_E2BA
		add	a, #03h
		inc	y
		inc	y
		inc	y
		bra	loc_E2A8
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E2B9:				; CODE XREF: sub_E292+8j
		clr	a

loc_E2BA:				; CODE XREF: sub_E292+18j sub_E292+1Ej
		cmpz	a
		ret
; End of function sub_E292

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  80h ; Ђ
		.db  20h
		.db  21h ; !
		.db  82h ; ‚
		.db  08h
		.db  21h ; !
		.db  80h ; Ђ
		.db  40h ; @
		.db  31h ; 1
		.db  80h ; Ђ
		.db  01h
		.db  41h ; A
		.db  4Dh ; M
		.db  20h
		.db  61h ; a
		.db  82h ; ‚
		.db  40h ; @
		.db  12h
		.db  82h ; ‚
		.db  02h
		.db  12h
		.db  80h ; Ђ
		.db  02h
		.db  22h ; "
		.db  80h ; Ђ
		.db  04h
		.db  42h ; B
		.db  82h ; ‚
		.db  80h ; Ђ
		.db  52h ; R
		.db  80h ; Ђ
		.db  08h
		.db  13h
		.db  80h ; Ђ
		.db  10h
		.db  33h ; 3
		.db  82h ; ‚
		.db  01h
		.db  14h
		.db  80h ; Ђ
		.db  80h ; Ђ
		.db  24h ; $
		.db  4Eh ; N
		.db  04h
		.db  24h ; $
		.db  4Eh ; N
		.db  10h
		.db  34h ; 4
		.db  4Eh ; N
		.db  20h
		.db  15h
		.db  82h ; ‚
		.db  04h
		.db  25h ; %
		.db  4Dh ; M
		.db  10h
		.db  35h ; 5
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

locret_E2F5:				; CODE XREF: ROM:E1BBj	ROM:E290j
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_E2F6:				; CODE XREF: __RESET:loc_DF78j
		cmp	#048, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_E2FD	; bounce if RPM	is over	1200
		setb	bit1, flags_41

loc_E2FD:				; CODE XREF: __RESET+19F7j
		cmp	#052, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_E304	; bounce if rpm	is less	than 1300
		clrb	bit1, flags_41

loc_E304:				; CODE XREF: __RESET+19FEj
		cmp	#048, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_E30B
		setb	bit0, flags_48

loc_E30B:				; CODE XREF: __RESET+1A05j
		cmp	#052, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_E312
		clrb	bit0, flags_48

loc_E312:				; CODE XREF: __RESET+1A0Cj
		ld	a, #09h
		tbbs	bit7, flags_43,	loc_E31C
		tbbc	bit1, flags_41,	loc_E322 ; b1 set under	1200RPM
		bra	loc_E328
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E31C:				; CODE XREF: __RESET+1A12j
		tbbc	bit0, flags_48,	loc_E322 ; bit 0 set under 1200	RPM
		tbbs	bit3, flags_40,	loc_E328 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag

loc_E322:				; CODE XREF: __RESET+1A15j
					; __RESET:loc_E31Cj
		ld	y, #0C894h
		jsr	TwoD_RPM

loc_E328:				; CODE XREF: __RESET+1A18j
					; __RESET+1A1Dj
		st	a, unk_1A8
		ld	a, flags_1EF	; copies into flags_4f
		st	a, flags_4F
		cmp	#209, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_E337
		setb	bit3, flags_4F

loc_E337:				; CODE XREF: __RESET+1A31j
		cmp	#203, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcc	loc_E33E
		clrb	bit3, flags_4F

loc_E33E:				; CODE XREF: __RESET+1A38j
		ld	b, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	b, #026		; 1300 RPM
		bcs	loc_E346	; 1200 RPM
		setb	bit0, flags_4F

loc_E346:				; CODE XREF: __RESET+1A40j
		cmp	b, #024		; 1200 RPM
		bcc	loc_E34C	; 6400 RPM
		clrb	bit0, flags_4F

loc_E34C:				; CODE XREF: __RESET+1A46j
		ld	a, #128		; 6400 RPM
		cmp	a, b
		ble	loc_E353	; 200 RPM
		setb	bit1, flags_4F

loc_E353:				; CODE XREF: __RESET+1A4Dj
		add	a, #004		; 200 RPM
		cmp	a, b
		bgt	loc_E35A
		clrb	bit1, flags_4F

loc_E35A:				; CODE XREF: __RESET+1A54j
		ld	y, #0C63Dh
		jsr	TwoD_RPM	; rpm table output is compared to VTA, WOT detection?
		cmp	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		bgt	loc_E366
		setb	bit2, flags_4F

loc_E366:				; CODE XREF: __RESET+1A60j
		sub	d, #0A3Dh
		bcc	loc_E36D
		clr	a
		clr	b

loc_E36D:				; CODE XREF: __RESET+1A67j
		cmp	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		bcs	loc_E373
		clrb	bit2, flags_4F

loc_E373:				; CODE XREF: __RESET+1A6Dj
		tbbs	bit5, flags_40,	loc_E38A ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit5, flags_49,	loc_E388 ; no bits set or cleared overtly
		tbbs	bit1, flags_4C,	loc_E388 ; bit3	- PIM bad
		ld	a, flags_4F
		and	a, #0Fh
		cmp	a, #0Fh
		bne	loc_E388
		setb	bit2, PORTA
		bra	loc_E38A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E388:				; CODE XREF: __RESET+1A74j
					; __RESET+1A77j ...
		clrb	bit2, PORTA

loc_E38A:				; CODE XREF: __RESET:loc_E373j
					; __RESET+1A84j
		ld	a, flags_4F
		st	a, flags_1EF	; copies into flags_4f
		tbs	bit2, flags_41	; b1 set under 1200RPM
		beq	loc_E396
		jmp	loc_E39F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E396:				; CODE XREF: __RESET+1A8Fj
		ld	d, #0B403h
		jsr	Satcount_A	; increments B bytes starting at pointer 00+A, bytes increment to FF then saturate
		jsr	calcPW		; 2000 RPM

loc_E39F:				; CODE XREF: __RESET+1A91j
		tbs	bit3, flags_41	; b1 set under 1200RPM
		beq	loc_E3A6
		jmp	loc_E421
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E3A6:				; CODE XREF: __RESET+1A9Fj
		ld	d, #0B711h
		jsr	Satcount_A	; increments B bytes starting at pointer 00+A, bytes increment to FF then saturate
		jsr	sub_CF23	; decays word_151 by 90% every iteration unless	count_B7 is < 61
		jsr	filtDiffRPM	; for RPM type variables word_14C, byte_63
		jsr	sub_EF31
		jsr	sub_E07F
		ld	a, flags_1F0	; copied into flags_4F
		st	a, flags_4F
		tbbs	bit5, flags_40,	loc_E41C ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#018, lilRPM	; 450 RPM
		bcs	loc_E3CD
		cmp	#026, lilRPM	; 650 RPM
		bcs	loc_E3CF
		clrb	bit1, flags_4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E3CD:				; CODE XREF: __RESET+1AC1j
		setb	bit1, flags_4F

loc_E3CF:				; CODE XREF: __RESET+1AC6j
		tbbc	bit7, flags_42,	loc_E3D5 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		tbbc	bit1, flags_4F,	loc_E3D7

loc_E3D5:				; CODE XREF: __RESET:loc_E3CFj
		clr	count_BE

loc_E3D7:				; CODE XREF: __RESET+1AD0j
		tbbs	bit0, flags_4F,	loc_E3F7
		tbbs	bit4, PORTB, loc_E3F5 ;	Port B Data Register
		cmp	#7Bh, VTA	; writ in adc vec 1, probably VTA (TPS)
		bcs	loc_E3F5
		cmp	#3Dh, count_C9
		bcs	loc_E3F5
		cmp	#40h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_E3F5
		cmp	#28h, byte_E5	; average of e3, e4
		bcc	loc_E3F5
		setb	bit0, flags_4F
		clr	count_C9

loc_E3F5:				; CODE XREF: __RESET+1AD8j
					; __RESET+1ADEj ...
		bra	loc_E40F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E3F7:				; CODE XREF: __RESET:loc_E3D7j
		cmp	#66h, VTA	; writ in adc vec 1, probably VTA (TPS)
		bcs	loc_E40B
		cmp	#046, count_C9
		bcc	loc_E40B
		cmp	#080, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_E40B
		cmp	#050, byte_E5	; average of e3, e4
		bcs	loc_E40F

loc_E40B:				; CODE XREF: __RESET+1AF8j
					; __RESET+1AFDj ...
		clrb	bit0, flags_4F
		clr	count_C9

loc_E40F:				; CODE XREF: __RESET:loc_E3F5j
					; __RESET+1B07j
		cmp	#12h, count_BE
		bcs	loc_E41A
		tbbs	bit0, flags_4F,	loc_E41A
		clrb	bit4, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E41A:				; CODE XREF: __RESET+1B10j
					; __RESET+1B12j
		setb	bit4, PORTB

loc_E41C:				; CODE XREF: __RESET+1ABBj
		ld	a, flags_4F
		st	a, flags_1F0	; copied into flags_4F

loc_E421:				; CODE XREF: __RESET+1AA1j
		tbs	bit4, flags_41	; b1 set under 1200RPM
		beq	loc_E428
		jmp	loc_E807
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E428:				; CODE XREF: __RESET+1B21j
		ld	d, #0C810h
		jsr	Satcount_A	; increments B bytes starting at pointer 00+A, bytes increment to FF then saturate
		jsr	sub_DAAA
		jsr	loc_DF7B
		jsr	sub_CD15
		jsr	sub_EA39
		jsr	sub_EA46
		jsr	sub_D030
		jsr	sub_FDC0
		jsr	sub_DA1B
		ld	y, #0C5BFh
		ld	b, THA		; adc vector 2,	negation of bits, probably THA
		jsr	other2D_a
		st	a, unk_15D
		ld	y, #0C5A2h
		tbbs	bit2, flags_40,	loc_E45A ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	y, #0C5A7h

loc_E45A:				; CODE XREF: __RESET+1B52j
		ld	b, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		jsr	other2D_a
		st	a, temp_64
		ld	y, #0C590h
		tbbs	bit2, flags_40,	loc_E46A ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	y, #0C599h

loc_E46A:				; CODE XREF: __RESET+1B62j
		jsr	other2D_5B
		mov	d, x
		ld	b, temp_64
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows
		st	a, unk_149
		tbbc	bit7, flags_4A,	loc_E4C6
		clr	a
		ld	b, unk_14F
		bne	loc_E484
		ld	b, word_151
		beq	loc_E486

loc_E484:				; CODE XREF: __RESET+1B7Bj
		or	a, #01h

loc_E486:				; CODE XREF: __RESET+1B80j
		ld	b, unk_149
		beq	loc_E48D
		or	a, #02h

loc_E48D:				; CODE XREF: __RESET+1B87j
		tbbc	bit6, flags_40,	loc_E492 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		or	a, #20h

loc_E492:				; CODE XREF: __RESET:loc_E48Dj
		ld	b, unk_1A7
		beq	loc_E499
		or	a, #40h

loc_E499:				; CODE XREF: __RESET+1B93j
		st	a, unk_19E
		clr	a

loc_E49D:				; CODE XREF: __RESET+1BA4j
		jsr	sub_E292
		beq	loc_E4AA
		ld	b, y + 02h
		cmp	b, #15h
		beq	loc_E49D
		ld	a, #80h

loc_E4AA:				; CODE XREF: __RESET+1B9Ej
		tbbc	bit5, flags_49,	loc_E4AF ; no bits set or cleared overtly
		or	a, #01h

loc_E4AF:				; CODE XREF: __RESET:loc_E4AAj
		tbbc	bit6, flags_47,	loc_E4B4
		or	a, #02h

loc_E4B4:				; CODE XREF: __RESET:loc_E4AFj
		tbbc	bit0, flags_49,	loc_E4B9 ; no bits set or cleared overtly
		or	a, #04h

loc_E4B9:				; CODE XREF: __RESET:loc_E4B4j
		tbbc	bit6, flags_42,	loc_E4BE ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		or	a, #08h

loc_E4BE:				; CODE XREF: __RESET:loc_E4B9j
		tbbc	bit6, flags_4B,	loc_E4C3
		or	a, #10h

loc_E4C3:				; CODE XREF: __RESET:loc_E4BEj
		st	a, unk_19F

loc_E4C6:				; CODE XREF: __RESET+1B74j
		ld	d, Pulsewidth
		add	d, word_145	; adc vec4 through table C589
		jsr	duvby32satB
		st	b, unk_19A
		ld	d, unk_176
		add	d, #00D5h
		jsr	divby4satB
		st	b, unk_19B
		ld	d, word_F6
		jsr	divby4satB
		st	b, unk_19C
		ld	a, #00h
		tbbc	bit6, flags_40,	loc_E4EE ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, unk_1E6

loc_E4EE:				; CODE XREF: __RESET+1BE6j
		st	a, unk_19D
		jmp	loc_E567
; END OF FUNCTION CHUNK	FOR __RESET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E4F4:				; CODE XREF: IV6:loc_F9D8p
		ld	b, unk_6D
		tbbc	bit7, flags_4A,	loc_E522
		ld	x, unk_198
		bne	locret_E52B
		cmpz	b
		bmi	locret_E52B
		ld	y, #0E52Ch
		add	y, b
		inc	b
		inc	b
		st	b, unk_6D
		cmp	b, #02h
		bne	loc_E514
		ld	d, #0015h
		or	a, #30h
		bra	loc_E51C
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E514:				; CODE XREF: ROM:E50Bj
		ld	y, y + 00h
		beq	loc_E51F
		ld	b, y + 00h
		ld	a, #03h

loc_E51C:				; CODE XREF: ROM:E512j
		shl	d
		bra	loc_E528
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E51F:				; CODE XREF: ROM:E516j
		ld	b, #0F0h
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E522:				; CODE XREF: ROM:E4F6j
		ld	b, #0DEh
		st	b, unk_6D
		clr	a
		clr	b

loc_E528:				; CODE XREF: ROM:E51Dj
		st	d, unk_198

locret_E52B:				; CODE XREF: ROM:E4FCj	ROM:E4FFj
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  00h
		.db  00h
		.db  01h
		.db  9Ah ; љ
		.db  01h
		.db  9Bh ; ›
		.db  01h
		.db  9Ch ; њ
		.db  00h
		.db  62h ; b
		.db  00h
		.db  52h ; R
		.db  00h
		.db  5Bh ; [
		.db  00h
		.db  58h ; X
		.db  00h
		.db 0E5h ; е
		.db  01h
		.db  9Dh ; ќ
		.db 0E5h ; е
		.db  46h ; F
		.db  01h
		.db  9Eh ; ћ
		.db  01h
		.db  9Fh ; џ
		.db  00h
		.db  00h

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E548:				; CODE XREF: IVc+30p
		ld	a, unk_6D
		clrb	bit3, DOUT
		cmpz	a
		bpz	loc_E558
		inc	a
		st	a, unk_6D
		cmp	a, #0F0h
		blea	loc_E561
		bra	loc_E564
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E558:				; CODE XREF: sub_E548+5j
		ld	d, unk_198
		shr	d
		st	d, unk_198
		ble	loc_E564

loc_E561:				; CODE XREF: sub_E548+Cj
		setb	bit3, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E564:				; CODE XREF: sub_E548+Ej sub_E548+17j
		clrb	bit3, PORTB
		ret
; End of function sub_E548

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_E567:				; CODE XREF: __RESET+1BEFj
		ld	a, flags_1F6	; another flags_4f copy
		st	a, flags_4F
		ld	a, THW		; set in adc vec 3, not	of bits	read from adc, probably	THW
		cmp	a, #0CAh
		bcc	loc_E574
		clrb	bit0, flags_4F

loc_E574:				; CODE XREF: __RESET+1C6Ej
		cmp	a, #0D1h
		ble	loc_E57A
		setb	bit0, flags_4F

loc_E57A:				; CODE XREF: __RESET+1C74j
		ld	a, flags_4F
		st	a, flags_1F6	; another flags_4f copy
		ld	a, unk_1EE
		st	a, flags_4F
		tbbc	bit5, flags_49,	loc_E589 ; no bits set or cleared overtly
		clr	count_DA

loc_E589:				; CODE XREF: __RESET+1C82j
		ld	a, lastFlags_4f
		cmpb	a, #08h
		bne	loc_E594
		clr	count_DC
		clr	count_DB

loc_E594:				; CODE XREF: __RESET+1C8Cj
		tbbs	bit5, flags_40,	loc_E5AD ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#3Ch, count_DA
		bcs	loc_E5AD
		cmp	#0Ah, count_DB
		bcs	loc_E5AD
		ld	a, word_98
		mul	a, #10h
		add	d, #00CDh
		cmp	d, unk_1AC
		ble	loc_E5AF

loc_E5AD:				; CODE XREF: __RESET:loc_E594j
					; __RESET+1C98j ...
		clr	count_DC

loc_E5AF:				; CODE XREF: __RESET+1CA9j
		ld	d, word_1C5
		add	d, #0400h
		cmp	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ble	loc_E5CB
		cmp	#0Ah, count_DC
		bcs	loc_E5CB
		tbs	bit1, flags_4F
		bne	loc_E5CB
		clr	a
		tbbs	bit6, flags_40,	loc_E5C8 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, #4Dh

loc_E5C8:				; CODE XREF: __RESET+1CC1j
		st	a, unk_1A5

loc_E5CB:				; CODE XREF: __RESET+1CB5j
					; __RESET+1CBAj ...
		bra	loc_E5FB
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E5CD:				; CODE XREF: __RESET+2E4p
		ld	a, unk_1EE
		tbbc	bit2, flags_40,	loc_E5DB ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmpb	a, #02h
		beq	loc_E5DF
		setb	bit4, flags_40
		bra	locret_E5E1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E5DB:				; CODE XREF: sub_E5CD+3j
		clr	b
		st	b, unk_1A4

loc_E5DF:				; CODE XREF: sub_E5CD+8j
		clrb	bit4, flags_40

locret_E5E1:				; CODE XREF: sub_E5CD+Cj
		ret
; End of function sub_E5CD


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E5E2:				; CODE XREF: __RESET+1F22p
		ld	a, unk_1A4
		cmp	a, #05h
		bcs	locret_E5FA
		ld	a, unk_F5
		cmp	a, #4Dh
		bgt	locret_E5FA
		ld	a, unk_1A5
		sub	a, #02h
		bcc	loc_E5F7
		clr	a

loc_E5F7:				; CODE XREF: sub_E5E2+12j
		st	a, unk_1A5

locret_E5FA:				; CODE XREF: sub_E5E2+5j sub_E5E2+Bj
		ret
; End of function sub_E5E2

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_E5FB:				; CODE XREF: __RESET:loc_E5CBj
		ld	a, flags_4F
		st	a, unk_1EE
		tbbs	bit5, flags_40,	loc_E646 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, flags_1F6	; another flags_4f copy
		cmpb	a, #04h
		beq	loc_E646
		ld	a, unk_118
		tbbc	bit3, PORTA, loc_E616 ;	Port A Data Register
		cmp	a, #50h
		bcc	loc_E62F
		bra	loc_E625
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E616:				; CODE XREF: __RESET+1D0Bj
		cmp	#78h, byte_E5	; average of e3, e4
		bcs	loc_E621
		cmp	a, #14h
		bcc	loc_E62F
		bra	loc_E625
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E621:				; CODE XREF: __RESET+1D17j
		cmp	a, #3Ch
		bcc	loc_E62F

loc_E625:				; CODE XREF: __RESET+1D12j
					; __RESET+1D1Dj
		cmp	#51h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_E62F
		cmp	#3Dh, count_B7
		bcc	loc_E631

loc_E62F:				; CODE XREF: __RESET+1D10j
					; __RESET+1D1Bj ...
		clr	count_CD

loc_E631:				; CODE XREF: __RESET+1D2Bj
		ld	a, #4Ch
		cmp	#78h, byte_E5	; average of e3, e4
		bcc	loc_E63A
		ld	a, #0Fh

loc_E63A:				; CODE XREF: __RESET+1D34j
		cmp	a, count_CD
		bgt	loc_E644
		setb	bit3, PORTA
		ld	#0FEh, count_CD
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E644:				; CODE XREF: __RESET+1D3Aj
		clrb	bit3, PORTA

loc_E646:				; CODE XREF: __RESET+1CFEj
					; __RESET+1D06j
		ld	a, flags_1EB	; copy of flags_4f
		st	a, flags_4F
		tbbc	bit4, flags_49,	loc_E671 ; no bits set or cleared overtly
		tbbs	bit5, flags_40,	loc_E655 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbs	bit0, flags_4F
		bne	loc_E673

loc_E655:				; CODE XREF: __RESET+1D4Cj
		tbbc	bit5, flags_49,	loc_E673 ; no bits set or cleared overtly
		tbbs	bit5, flags_40,	loc_E660 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0FFh, count_B2
		bne	loc_E673

loc_E660:				; CODE XREF: __RESET+1D56j
		cmp	#0FEh, byte_E5	; average of e3, e4
		bcs	loc_E673
		cmp	#00h, VTA	; writ in adc vec 1, probably VTA (TPS)
		bgt	loc_E673
		tbbs	bit3, flags_49,	loc_E678 ; no bits set or cleared overtly
		setb	bit5, flags_40
		bra	loc_E675
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E671:				; CODE XREF: __RESET+1D49j
		clrb	bit0, flags_4F

loc_E673:				; CODE XREF: __RESET+1D51j
					; __RESET:loc_E655j ...
		clrb	bit5, flags_40

loc_E675:				; CODE XREF: __RESET+1D6Dj
		jmp	loc_E802
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E678:				; CODE XREF: __RESET+1D68j
		di
		clr	a
		clr	b
		st	d, IMASK	; Interrupt Request Mask MSB
		st	d, IRQL		; Interrupt Request Flag MSB
		st	a, DOM		; DOUT Control Register
		setb	bit7, PORTB
		setb	bit7, PORTB
		clrb	bit7, PORTB
		tbbc	bit2, flags_49,	loc_E69F ; no bits set or cleared overtly
		ld	#0B6h, DOUT	; DOUT Data Register
		ld	#11h, PORTB	; Port B Data Register
		clrb	bit2, DOUT
		div	d, #00h
		div	d, #00h
		div	d, #00h
		div	d, #00h
		setb	bit2, DOUT
		jmp	loc_E6DC
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E69F:				; CODE XREF: __RESET+1D85j
					; __RESET+1DD8j
		jsr	sub_E761
		tbbs	bit2, PORTB, loc_E6A8 ;	Port B Data Register
		setb	bit4, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E6A8:				; CODE XREF: __RESET+1DA0j
		clrb	bit4, PORTB
		ld	a, SMRC_SIR	; Serial Master	Register Control
		cmpb	a, #04h
		beq	loc_E6B3
		clrb	bit2, PORTA
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E6B3:				; CODE XREF: __RESET+1DACj
		setb	bit2, PORTA
		tbbc	bit0, PORTD_ASRIN, loc_E6BB ; Port D Data Register / ASR Input Data
		setb	bit3, PORTA
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E6BB:				; CODE XREF: __RESET+1DB3j
		clrb	bit3, PORTA
		tbbs	bit2, PORTC, loc_E6C6 ;	Port C Data Register
		clrb	bit3, PORTB
		setb	bit3, DOUT
		bra	loc_E6CA
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E6C6:				; CODE XREF: __RESET+1DBBj
		setb	bit3, PORTB
		clrb	bit3, DOUT

loc_E6CA:				; CODE XREF: __RESET+1DC2j
		tbbc	bit4, PORTD_ASRIN, loc_E6D0 ; Port D Data Register / ASR Input Data
		clrb	bit5, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E6D0:				; CODE XREF: __RESET:loc_E6CAj
		setb	bit5, PORTB
		tbbs	bit1, PORTD_ASRIN, loc_E6D8 ; Port D Data Register / ASR Input Data
		clrb	bit0, DOUT
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E6D8:				; CODE XREF: __RESET+1DD0j
		setb	bit0, DOUT
		bra	loc_E69F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E6DC:				; CODE XREF: __RESET+1D9Aj
		ld	b, #3Fh

loc_E6DE:				; CODE XREF: __RESET+1DDDj
		dec	b
		bne	loc_E6DE
		ld	b, #55h
		tbbs	bit0, IRQLL, loc_E741 ;	Interrupt Request Flag LSB
		tbbc	bit1, PORTC, loc_E741 ;	Port C Data Register
		tbbs	bit0, PORTC, loc_E741 ;	Port C Data Register

loc_E6EC:				; CODE XREF: __RESET+1E5Cj
		clrb	bit5, PORTB
		clrb	bit0, PORTB
		clr	a

loc_E6F1:				; CODE XREF: __RESET+1E11j
		mov	a, b
		ld	y, #0040h

loc_E6F5:				; CODE XREF: __RESET+1DF8j
		st	a, [y]
		inc	a
		cmp	y, #0300h
		bcs	loc_E6F5
		tbs	bit7, PORTB	; Port B Data Register
		beq	loc_E702
		clrb	bit7, PORTB

loc_E702:				; CODE XREF: __RESET+1DFCj
		ld	y, #0040h

loc_E705:				; CODE XREF: __RESET+1E0Bj
		ld	a, [y]
		cmp	a, b
		bne	loc_E740
		inc	b
		cmp	y, #0300h
		bcs	loc_E705
		bsr	sub_E775
		inc	b
		mov	b, a
		bne	loc_E6F1
		ld	x, #0C000h
		clr	a
		clr	b

loc_E71A:				; CODE XREF: __RESET+1E27j
		ld	y, #0100h

loc_E71D:				; CODE XREF: __RESET+1E20j
		add	d, x + 00h
		inc	x
		inc	x
		dec	y
		bne	loc_E71D
		bsr	sub_E775
		cmp	x, #0000h
		bne	loc_E71A
		cmp	d, #0AA55h
		bne	loc_E740
		tbbc	bit0, IRQLL, loc_E741 ;	Interrupt Request Flag LSB
		tbbs	bit1, PORTC, loc_E741 ;	Port C Data Register
		tbbc	bit0, PORTC, loc_E741 ;	Port C Data Register
		shl	b
		setb	bit5, PORTB
		ld	a, #19h
		bra	loc_E74F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E740:				; CODE XREF: __RESET+1E05j
					; __RESET+1E2Cj
		clr	b

loc_E741:				; CODE XREF: __RESET+1DE1j
					; __RESET+1DE4j ...
		tbbs	bit5, PORTB, loc_E747 ;	Port B Data Register
		setb	bit5, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E747:				; CODE XREF: __RESET:loc_E741j
		clrb	bit5, PORTB
		ld	a, #7Dh
		cmpz	b
		beq	loc_E74F
		shl	a

loc_E74F:				; CODE XREF: __RESET+1E3Cj
					; __RESET+1E4Aj ...
		ld	x, #0F7ABh

loc_E752:				; CODE XREF: __RESET+1E51j
		inc	x
		bne	loc_E752
		bsr	sub_E775
		dec	a
		bne	loc_E74F
		cmp	b, #0AAh
		bne	loc_E741
		jmp	loc_E6EC
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E761:				; CODE XREF: __RESET:loc_E69Fp
		ld	x, #0F7ABh

loc_E764:				; CODE XREF: sub_E761+4j
		inc	x
		bne	loc_E764
		push	a
		bsr	sub_E786
		ld	a, SMRC_SIR	; Serial Master	Register Control
		cmpb	a, #08h
		bne	loc_E78D
		tbbc	bit1, PORTA, loc_E78D ;	Port A Data Register
		pull	a
		ret
; End of function sub_E761


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E775:				; CODE XREF: __RESET+1E0Dp
					; __RESET+1E22p ...

; FUNCTION CHUNK AT E78D SIZE 0000002B BYTES

		push	a
		bsr	sub_E786
		ld	a, SMRC_SIR	; Serial Master	Register Control
		cmpb	a, #08h
		bne	loc_E78D
		tbbc	bit0, PORTD_ASRIN, loc_E78D ; Port D Data Register / ASR Input Data
		tbbc	bit1, PORTD_ASRIN, loc_E78D ; Port D Data Register / ASR Input Data
		pull	a
		ret
; End of function sub_E775


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E786:				; CODE XREF: sub_E761+7p sub_E775+1p ...
		tbs	bit7, PORTB	; Port B Data Register
		beq	locret_E78C
		clrb	bit7, PORTB

locret_E78C:				; CODE XREF: sub_E786+2j
		ret
; End of function sub_E786

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR sub_E775

loc_E78D:				; CODE XREF: sub_E761+Dj sub_E761+Fj ...
		setb	bit1, PORTB
		ld	y, #0040h
		clr	a
		clr	b

loc_E794:				; CODE XREF: sub_E775+23j
		st	d, [y]
		cmp	y, #02FFh
		ble	loc_E794
		bsr	sub_E786
		ld	#00h, PORTA	; Port A Data Register
		ld	#0BBh, PORTB	; Port B Data Register
		ld	#00h, PORTD_ASRIN ; Port D Data	Register / ASR Input Data
		ld	#06h, DOUT	; DOUT Data Register
		ld	x, #0F595h

loc_E7AB:				; CODE XREF: sub_E775+37j
		inc	x
		bne	loc_E7AB
		bsr	sub_E786
		ld	s, #02FFh
		clrb	bit3, IRQLL
		jmp	loc_C94B
; END OF FUNCTION CHUNK	FOR sub_E775

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


toggleA0B5:				; CODE XREF: ROM:F1E9p
		tbbs	bit5, PORTA, loc_E7C1 ;	G1 flag	bit
		clrb	bit0, PORTA
		setb	bit5, PORTB
		bra	locret_E7CB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E7C1:				; CODE XREF: toggleA0B5j
		tbbs	bit2, PORTD_ASRIN, loc_E7C6 ; G1 flag bit
		setb	bit0, PORTA

loc_E7C6:				; CODE XREF: toggleA0B5:loc_E7C1j
		tbbs	bit3, PORTD_ASRIN, locret_E7CB ; G2 flag bit
		clrb	bit5, PORTB

locret_E7CB:				; CODE XREF: toggleA0B5+7j
					; toggleA0B5:loc_E7C6j
		ret
; End of function toggleA0B5


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E7CC:				; CODE XREF: __RESET+1FC3p
		ld	a, SMRC_SIR	; Serial Master	Register Control
		cmpb	a, #04h		; test state of	SIN4 bit
		beq	loc_E7E6	; PD0
		clr	b
		ld	a, unk_113	; msN: adc vector 7 | lsN: adc vector 6
		tbbs	bit7, flags_4A,	loc_E7DF
		and	a, #0Fh
		shr	d
		shr	d
		bra	loc_E7EF
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E7DF:				; CODE XREF: sub_E7CC+Aj
		and	a, #0F0h
		jsr	divDby64
		bra	loc_E7EF
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E7E6:				; CODE XREF: sub_E7CC+4j
		tbbc	bit0, PORTD_ASRIN, loc_E7ED ; PD0
		ld	d, #0400h
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E7ED:				; CODE XREF: sub_E7CC:loc_E7E6j
		clr	a
		clr	b

loc_E7EF:				; CODE XREF: sub_E7CC+11j sub_E7CC+18j
		st	d, word_F6
		tbbc	bit4, PORTA, loc_E7F7 ;	Port A Data Register
		setb	bit3, PORTA
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E7F7:				; CODE XREF: sub_E7CC+25j
		clrb	bit3, PORTA
		tbbc	bit7, PORTA, loc_E7FF ;	Port A Data Register
		setb	bit4, PORTB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E7FF:				; CODE XREF: sub_E7CC+2Dj
		clrb	bit4, PORTB
		ret
; End of function sub_E7CC

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_E802:				; CODE XREF: __RESET:loc_E675j
		ld	a, flags_4F
		st	a, flags_1EB	; copy of flags_4f

loc_E807:				; CODE XREF: __RESET+1B23j
		tbs	bit5, flags_41	; b1 set under 1200RPM
		beq	loc_E80E
		jmp	loc_E814
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E80E:				; CODE XREF: __RESET+1F07j
		ld	d, #0D801h
		jsr	Satcount_A	; increments B bytes starting at pointer 00+A, bytes increment to FF then saturate

loc_E814:				; CODE XREF: __RESET+1F09j
		jsr	sub_D41C
		cmp	#0F4h, count_A3
		bcs	loc_E82A
		clr	count_A3
		ld	d, #0D909h
		jsr	Satcount_A	; increments B bytes starting at pointer 00+A, bytes increment to FF then saturate
		jsr	sub_E5E2
		jsr	sub_CF01

loc_E82A:				; CODE XREF: __RESET+1F18j
		tbs	bit6, flags_41	; b1 set under 1200RPM
		beq	loc_E831
		jmp	loc_E8C2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E831:				; CODE XREF: __RESET+1F2Aj
		cmp	#0D1h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcc	loc_E840
		clr	a
		st	a, unk_EF
		st	a, unk_F0
		st	a, unk_F1
		jmp	loc_E8C2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E840:				; CODE XREF: __RESET+1F32j
		ld	y, #0C8A3h
		clr	temp_64
		clr	unk_65
		cmp	#05h, unk_EF
		bcs	loc_E85B
		ld	a, unk_305
		cmp	a, y + 00h
		bcs	loc_E855
		inc	temp_64

loc_E855:				; CODE XREF: __RESET+1F4Fj
		cmp	a, y + 03h
		bgt	loc_E85B
		inc	unk_65

loc_E85B:				; CODE XREF: __RESET+1F48j
					; __RESET+1F55j
		cmp	#05h, unk_F0
		bcs	loc_E86F
		ld	a, unk_306
		cmp	a, y + 01h
		bcs	loc_E869
		inc	temp_64

loc_E869:				; CODE XREF: __RESET+1F63j
		cmp	a, y + 04h
		bgt	loc_E86F
		inc	unk_65

loc_E86F:				; CODE XREF: __RESET+1F5Cj
					; __RESET+1F69j
		cmp	#05h, unk_F1
		bcs	loc_E883
		ld	a, unk_307
		cmp	a, y + 02h
		bcs	loc_E87D
		inc	temp_64

loc_E87D:				; CODE XREF: __RESET+1F77j
		cmp	a, y + 05h
		bgt	loc_E883
		inc	unk_65

loc_E883:				; CODE XREF: __RESET+1F70j
					; __RESET+1F7Dj
		cmp	#02h, temp_64
		bcc	loc_E8AC
		cmp	#05h, unk_EF
		bcs	loc_E898
		ld	a, unk_305
		cmp	a, y + 00h
		bcc	loc_E8AC
		cmp	a, y + 03h
		ble	loc_E89D

loc_E898:				; CODE XREF: __RESET+1F89j
		cmp	#02h, unk_65
		bcs	loc_E8C2

loc_E89D:				; CODE XREF: __RESET+1F94j
		ld	a, unk_1AA
		cmp	a, #01h
		bcc	loc_E8B6
		clrb	bit7, flags_43
		ld	b, word_9A
		and	b, #0FEh
		bra	loc_E8BC
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E8AC:				; CODE XREF: __RESET+1F84j
					; __RESET+1F90j
		tbbs	bit7, flags_43,	loc_E8B6
		ld	a, unk_1AA
		inc	a
		st	a, unk_1AA

loc_E8B6:				; CODE XREF: __RESET+1FA0j
					; __RESET:loc_E8ACj
		setb	bit7, flags_43
		ld	b, word_9A
		or	b, #01h

loc_E8BC:				; CODE XREF: __RESET+1FA8j
		ld	x, #009Ah
		jsr	sub_D2A3	; play swith magic memory specified by x

loc_E8C2:				; CODE XREF: __RESET+1F2Cj
					; __RESET+1F3Bj ...
		tbbc	bit5, flags_40,	loc_E8CB ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		jsr	sub_E7CC
		jmp	loc_EDD7
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E8CB:				; CODE XREF: __RESET:loc_E8C2j
		ld	a, lastFlags_4f
		st	a, flags_4F
		ld	a, flags_1E7	; any bits fitting mask	1C or 1F can cut fuel (during crank?)
		cmpb	a, #01h
		bne	loc_E8D9
		clr	count_C0

loc_E8D9:				; CODE XREF: __RESET+1FD3j
		jsr	sub_ED3E
		ld	b, word_98
		ld	y, #0C8D1h
		jsr	y + 1Ah
		bcc	loc_E8E8
		jsr	sub_CAC1

loc_E8E8:				; CODE XREF: __RESET+1FE1j
		ld	a, word_98
		tbbs	bit0, flags_42,	loc_E8EF ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	a, #69h

loc_E8EF:				; CODE XREF: __RESET+1FE8j
		st	a, unk_68
		tbbs	bit0, flags_40,	loc_E908 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0E4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		ble	loc_E908
		cmp	#02h, byte_E5	; average of e3, e4
		bcc	loc_E908
		tbbs	bit3, flags_45,	loc_E908
		tbbs	bit4, flags_49,	loc_E908 ; no bits set or cleared overtly
		setb	bit1, flags_4F
		bra	loc_E90A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E908:				; CODE XREF: __RESET+1FEFj
					; __RESET+1FF5j ...
		clrb	bit1, flags_4F

loc_E90A:				; CODE XREF: __RESET+2004j
		tbbc	bit2, flags_40,	loc_E913 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit3, flags_47,	loc_E913
		tbbc	bit5, flags_49,	loc_E915 ; no bits set or cleared overtly

loc_E913:				; CODE XREF: __RESET:loc_E90Aj
					; __RESET+200Bj
		clr	count_BF

loc_E915:				; CODE XREF: __RESET+200Ej
		tbbc	bit0, flags_40,	loc_E922 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, unk_68
		mul	a, #10h
		add	d, #0052h
		st	d, unk_1AC

loc_E922:				; CODE XREF: __RESET:loc_E915j
		jsr	sub_EC34
		tbs	bit7, flags_41	; b1 set under 1200RPM
		bne	loc_E943
		jsr	loc_EA70
		bra	loc_E943
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_E92E:				; CODE XREF: IVc:loc_F8FEp
		ld	d, word_F6
		bne	loc_E937
		ld	d, #0FFFFh
		bra	loc_E940
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E937:				; CODE XREF: sub_E92E+2j
		ld	d, #0400h
		sub	d, word_F6
		bcc	loc_E940
		clr	a
		clr	b

loc_E940:				; CODE XREF: sub_E92E+7j sub_E92E+Ej
		st	d, ASR1N	; ASR1 neg edge	counter	value MSB
		ret
; End of function sub_E92E

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_E943:				; CODE XREF: __RESET+2025j
					; __RESET+202Aj
		tbbs	bit3, flags_47,	loc_E949
		tbbs	bit4, flags_49,	loc_E94B ; no bits set or cleared overtly

loc_E949:				; CODE XREF: __RESET:loc_E943j
		clr	count_D8

loc_E94B:				; CODE XREF: __RESET+2044j
		clr	a
		clr	b
		cmp	#3Dh, count_B2
		bcc	loc_E977
		ld	b, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		ld	y, #0C86Eh
		jsr	other2D_a
		jsr	divDby64
		st	d, word_1D0
		tbbc	bit4, flags_49,	loc_E97A ; no bits set or cleared overtly
		cmp	#0D1h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_E97A
		tbbc	bit2, flags_40,	loc_E97A ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, #0200h
		cmp	#26h, count_D8
		bcs	loc_E977
		ld	a, unk_68
		mul	a, #04h

loc_E977:				; CODE XREF: __RESET+204Ej
					; __RESET+206Fj
		jmp	loc_EA35
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E97A:				; CODE XREF: __RESET+205Ej
					; __RESET+2064j ...
		tbbc	bit7, flags_42,	loc_E98E ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	b, unk_68
		clr	a
		add	b, unk_1B8
		addc	a, #00h
		shl	d
		shl	d
		shl	d
		shl	d
		add	d, unk_1B6
		bra	loc_E994
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_E98E:				; CODE XREF: __RESET:loc_E97Aj
		ld	d, unk_1AC
		add	d, #0800h

loc_E994:				; CODE XREF: __RESET+208Aj
		add	d, unk_1B4
		shr	d
		st	d, temp_66
		ld	b, unk_1B9
		clr	a
		add	b, unk_1B2
		addc	a, #00h
		shl	d
		shl	d
		shl	d
		add	d, temp_66
		shr	d
		mov	d, x
		clr	a
		tbbs	bit2, flags_49,	loc_E9B1 ; no bits set or cleared overtly
		tbbc	bit3, flags_49,	loc_E9B9 ; no bits set or cleared overtly

loc_E9B1:				; CODE XREF: __RESET+20A9j
		ld	y, #0C866h
		tbbc	bit7, flags_42,	loc_E9B8 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		inc	y

loc_E9B8:				; CODE XREF: __RESET+20B2j
		ld	a, [y]

loc_E9B9:				; CODE XREF: __RESET+20ACj
		add	x, a
		ld	a, unk_1BB
		add	x, a
		mov	x, d
		sub	d, #0250h
		bcc	loc_E9C6
		clr	a
		clr	b

loc_E9C6:				; CODE XREF: __RESET+20C0j
		cmp	#0E4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcc	loc_E9D3
		tbbc	bit0, flags_4F,	loc_EA17
		cmp	#0DFh, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_EA17

loc_E9D3:				; CODE XREF: __RESET+20C7j
		cmp	#02h, count_C0
		bcs	loc_EA17
		setb	bit0, flags_4F
		ld	b, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		ld	y, #0C868h
		jsr	other2D_a
		st	a, temp_66
		clr	a
		ld	b, unk_68
		shl	d
		add	b, temp_66
		addc	a, #00h
		shl	d
		shl	d
		shl	d
		st	d, temp_66
		tbbc	bit7, flags_42,	loc_EA14 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		add	d, unk_1B6
		bcc	loc_E9FC
		ld	d, #0FFFFh

loc_E9FC:				; CODE XREF: __RESET+20F5j
		sub	d, #0800h
		bcc	loc_EA03
		clr	a
		clr	b

loc_EA03:				; CODE XREF: __RESET+20FDj
		st	d, temp_66
		clr	a
		ld	b, unk_1B8
		shl	d
		shl	d
		shl	d
		shl	d
		add	d, temp_66
		bcc	loc_EA14
		ld	d, #0FFFFh

loc_EA14:				; CODE XREF: __RESET+20EFj
					; __RESET+210Dj
		shr	d
		shr	d
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EA17:				; CODE XREF: __RESET+20C9j
					; __RESET+20CFj ...
		clrb	bit0, flags_4F
		cmp	d, word_1D0
		bcc	loc_EA21
		ld	d, word_1D0

loc_EA21:				; CODE XREF: __RESET+211Aj
		st	d, temp_66
		ld	a, unk_1B1
		mul	a, #04h
		cmp	d, temp_66
		ble	loc_EA2E
		ld	d, temp_66

loc_EA2E:				; CODE XREF: __RESET+2128j
		ld	x, word_9A
		bpz	loc_EA35
		ld	d, #039Ah

loc_EA35:				; CODE XREF: __RESET:loc_E977j
					; __RESET+212Ej
		st	d, word_F6
		bra	loc_EA43
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_EA39:				; CODE XREF: __RESET+1B35p
		ld	y, #0C874h
		jsr	TwoD_THW
		st	a, unk_1B1
		ret
; End of function sub_EA39

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_EA43:				; CODE XREF: __RESET+2135j
		jmp	loc_EDD2
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_EA46:				; CODE XREF: __RESET+1B38p
		ld	y, #0C826h
		jsr	TwoD_THW
		ld	b, unk_1BA
		bne	loc_EA65
		tbbc	bit2, flags_40,	loc_EA6C ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit0, flags_42,	loc_EA6C ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	x, word_9A
		bpz	loc_EA6C
		cmp	#010, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_EA6C
		ld	b, #0FFh
		st	b, unk_1BA

loc_EA65:				; CODE XREF: sub_EA46+9j
		mul	a, #9Ah
		shl	d
		bcc	loc_EA6C
		ld	a, #0FFh

loc_EA6C:				; CODE XREF: sub_EA46+Bj sub_EA46+Ej ...
		st	a, unk_1B9
		ret
; End of function sub_EA46

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EA70:				; CODE XREF: __RESET+2027p
		cmp	#3Dh, count_B7
		bcc	loc_EA88
		ld	y, #0C837h
		jsr	TwoD_THW
		cmp	#0D7h, THA	; adc vector 2,	negation of bits, probably THA
		ble	loc_EA83

loc_EA80:
		ld	d, #147Bh

loc_EA83:				; CODE XREF: ROM:EA7Ej
		jsr	divDby16
		bra	loc_EA92
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EA88:				; CODE XREF: ROM:EA73j
		ld	d, unk_1B4
		sub	d, #0001h
		bcc	loc_EA92
		clr	a
		clr	b

loc_EA92:				; CODE XREF: ROM:EA86j	ROM:EA8Ej
		st	d, unk_1B4
		cmp	#0Ch, count_A4
		bcc	loc_EAA2
		cmp	#05h, byte_E5	; average of e3, e4
		bcs	loc_EAA2
		setb	bit2, flags_4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EAA2:				; CODE XREF: ROM:EA98j	ROM:EA9Dj
		clrb	bit2, flags_4F
		tbbc	bit2, flags_4F,	loc_EAC2
		cmp	#9Dh, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_EACD
		ld	a, #66h
		ld	x, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	x, #1400h
		bcs	loc_EAB8
		tbbs	bit4, flags_45,	loc_EACA

loc_EAB8:				; CODE XREF: ROM:EAB3j
		ld	b, unk_54
		ld	y, #0C840h
		jsr	other2D_a
		bra	loc_EACA
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EAC2:				; CODE XREF: ROM:EAA4j
		ld	a, unk_1B2
		sub	a, #01h
		bcc	loc_EACA
		clr	a

loc_EACA:				; CODE XREF: ROM:EAB5j	ROM:EAC0j ...
		st	a, unk_1B2

loc_EACD:				; CODE XREF: ROM:EAAAj
		cmp	#3Dh, count_B7
		bcc	loc_EAD7
		ld	d, #0300h
		bra	loc_EAE1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EAD7:				; CODE XREF: ROM:EAD0j
		ld	d, word_1C9
		sub	d, #0004h
		bcc	loc_EAE1
		clr	a
		clr	b

loc_EAE1:				; CODE XREF: ROM:EAD5j	ROM:EADDj
		st	d, word_1C9
		ld	x, #0C846h
		tbbc	bit3, flags_49,	loc_EAEB ; no bits set or cleared overtly
		inc	x

loc_EAEB:				; CODE XREF: ROM:EAE7j
		ld	a, x + 04h
		mul	a, #10h
		st	d, temp_66
		clr	a
		clr	b
		tbbc	bit7, flags_42,	loc_EB13 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	d, word_1CD
		tbbs	bit2, flags_49,	loc_EB05 ; no bits set or cleared overtly
		sub	d, #0002h
		bcc	loc_EB0D
		clr	a
		clr	b
		bra	loc_EB13
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EB05:				; CODE XREF: ROM:EAF9j
		add	d, #0002h
		bcc	loc_EB0D
		ld	d, #0FFFFh

loc_EB0D:				; CODE XREF: ROM:EAFFj	ROM:EB08j
		cmp	d, temp_66
		ble	loc_EB13
		ld	d, temp_66

loc_EB13:				; CODE XREF: ROM:EAF3j	ROM:EB03j ...
		st	d, word_1CD
		tbbc	bit7, flags_42,	loc_EB31 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		div	d, #10h
		mov	b, a
		add	a, x + 02h
		bcc	loc_EB22
		ld	a, #0FFh

loc_EB22:				; CODE XREF: ROM:EB1Ej
		sub	a, x + 00h
		bcc	loc_EB27
		clr	a

loc_EB27:				; CODE XREF: ROM:EB24j
		mul	a, #10h
		st	d, word_1CB
		ld	a, x + 02h
		tbbs	bit7, flags_42,	loc_EB33 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)

loc_EB31:				; CODE XREF: ROM:EB16j
		ld	a, x + 00h

loc_EB33:				; CODE XREF: ROM:EB2Ej
		mul	a, #10h
		add	d, word_1C9
		add	d, word_1CD
		st	d, temp_64
		ld	b, unk_113	; msN: adc vector 7 | lsN: adc vector 6
		cmpb	b, #80h
		beq	loc_EB50
		ld	d, #0100h
		tbbs	bit6, flags_42,	loc_EB4D ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	d, #009Ah

loc_EB4D:				; CODE XREF: ROM:EB47j
		add	d, temp_64
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EB50:				; CODE XREF: ROM:EB42j
		ld	d, temp_64
		cmp	d, word_1C5
		beq	loc_EB59
		clr	count_C5

loc_EB59:				; CODE XREF: ROM:EB55j
		st	d, word_1C5
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		sub	d, word_1C5
		bcc	loc_EB65
		clr	a
		clr	b

loc_EB65:				; CODE XREF: ROM:EB61j
		jsr	divby16satB
		st	b, word_1C7
		ld	d, unk_1AC
		st	d, temp_64
		tbbs	bit0, flags_40,	loc_EB8A ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit7, flags_42,	loc_EB7E ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		tbbc	bit1, flags_4F,	loc_EB7E
		cmp	#5Ch, count_BF
		bcc	loc_EB90

loc_EB7E:				; CODE XREF: ROM:EB73j	ROM:EB76j
		clrb	bit3, flags_4F
		ld	a, unk_68
		mul	a, #10h
		cmp	d, temp_64
		bcs	loc_EB8A
		st	d, temp_64

loc_EB8A:				; CODE XREF: ROM:EB70j	ROM:EB86j
		clr	count_C5
		clr	count_C1
		bra	loc_EBA8
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EB90:				; CODE XREF: ROM:EB7Cj
		setb	bit3, flags_4F
		ld	y, #0C84Bh
		ld	b, word_1C7

loc_EB98:				; CODE XREF: ROM:EB9Bj
		inc	y
		cmp	b, y + 00h
		bgt	loc_EB98
		ld	b, y + 05h
		clr	a
		add	d, unk_1AC
		sub	d, #0080h
		st	d, temp_64

loc_EBA8:				; CODE XREF: ROM:EB8Ej
		ld	a, unk_68
		mul	a, #10h
		mov	d, x
		sub	d, #0052h
		cmp	d, temp_64
		bcc	loc_EBC4
		mov	x, d
		add	d, #00CDh
		tbbc	bit4, flags_40,	loc_EBBE ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, #0A8Fh

loc_EBBE:				; CODE XREF: ROM:EBB8j
		cmp	d, temp_64
		bcs	loc_EBC4
		ld	d, temp_64

loc_EBC4:				; CODE XREF: ROM:EBB2j	ROM:EBC0j
		st	d, unk_1AC
		tbbc	bit7, flags_42,	loc_EBEB ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	y, #0C862h
		jsr	other2D_THW
		st	a, temp_64
		ld	y, #0C860h
		ld	d, word_1CB
		shr	d
		shr	d
		cmpz	a
		bne	loc_EBE1
		jsr	other2Dd
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EBE1:				; CODE XREF: ROM:EBDBj
		ld	a, y + 01h
		sub	a, temp_64
		bcc	loc_EBE8
		clr	a

loc_EBE8:				; CODE XREF: ROM:EBE5j
		st	a, unk_1B8

loc_EBEB:				; CODE XREF: ROM:EBC7j
		tbbc	bit7, flags_42,	loc_EC32 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	d, unk_1B6
		tbbc	bit1, flags_4F,	loc_EC11
		cmp	#5Ch, count_BF
		bcs	loc_EC11
		ld	y, #0C855h
		ld	b, word_1C7

loc_EBFF:				; CODE XREF: ROM:EC02j
		inc	y
		cmp	b, y + 00h
		bgt	loc_EBFF
		ld	b, y + 05h
		clr	a
		add	d, unk_1B6
		sub	d, #0080h
		bcc	loc_EC11
		clr	a
		clr	b

loc_EC11:				; CODE XREF: ROM:EBF1j	ROM:EBF7j ...
		ld	y, #0C8D3h
		jsr	y + 21h
		mov	d, x
		ld	a, unk_1B8
		mul	a, #10h
		st	d, temp_64
		ld	d, #08A4h
		sub	d, temp_64
		bcc	loc_EC27
		clr	a
		clr	b

loc_EC27:				; CODE XREF: ROM:EC23j
		st	d, temp_64
		cmp	x, temp_64
		bcc	loc_EC2F
		ld	x, temp_64

loc_EC2F:				; CODE XREF: ROM:EC2Bj
		st	x, unk_1B6

loc_EC32:				; CODE XREF: ROM:loc_EBEBj
		bra	loc_EC48

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_EC34:				; CODE XREF: __RESET:loc_E922p
		tbbs	bit0, flags_40,	loc_EC41 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#28h, byte_E5	; average of e3, e4
		bcc	loc_EC41
		cmp	#0A0h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	locret_EC47

loc_EC41:				; CODE XREF: sub_EC34j	sub_EC34+6j
		ld	d, #08F6h
		st	d, unk_1B6

locret_EC47:				; CODE XREF: sub_EC34+Bj
		ret
; End of function sub_EC34

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EC48:				; CODE XREF: ROM:loc_EC32j
		tbbs	bit7, flags_42,	loc_EC74 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		tbbc	bit1, flags_4F,	loc_EC74
		cmp	#5Ch, count_BF
		bcs	loc_EC74
		ld	a, unk_68
		cmp	a, #69h
		bcc	loc_EC74
		mul	a, #10h
		add	d, #00CDh
		cmp	d, unk_1AC
		bgt	loc_EC74
		ld	d, word_1C5
		add	d, #0700h
		tbbc	bit6, flags_42,	loc_EC6F ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		sub	d, #0100h

loc_EC6F:				; CODE XREF: ROM:EC69j
		cmp	d, word_14A	; RPM type variable, filtered if value is between 450 and 1250 RPM
		bgt	loc_EC76

loc_EC74:				; CODE XREF: ROM:loc_EC48j ROM:EC4Bj ...
		clr	count_C1

loc_EC76:				; CODE XREF: ROM:EC72j
		cmp	#5Ch, count_C1
		bcs	loc_EC7E
		jsr	sub_ED2B

loc_EC7E:				; CODE XREF: ROM:EC79j
		tbbs	bit4, flags_40,	loc_EC95 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0E7h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_EC95
		ld	a, unk_14F
		bne	loc_EC95
		ld	d, unk_1B4
		bne	loc_EC95
		cmp	#93h, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		bcc	loc_EC97

loc_EC95:				; CODE XREF: ROM:loc_EC7Ej ROM:EC84j ...
		clr	count_C5

loc_EC97:				; CODE XREF: ROM:EC93j
		cmp	#5Ch, count_C5
		bcs	loc_ECC4
		ld	a, unk_68
		mul	a, #10h
		mov	d, x
		add	d, #007Bh
		cmp	d, unk_1AC
		bcs	loc_ECC4
		sub	d, #0048h
		cmp	d, unk_1AC
		bgt	loc_ECC4
		ld	d, word_1C5
		add	d, #0800h
		sub	d, word_14A	; RPM type variable, filtered if value is between 450 and 1250 RPM
		bcc	loc_ECBF
		jsr	NegD

loc_ECBF:				; CODE XREF: ROM:ECBAj
		cmp	d, #0060h
		ble	loc_ECC6

loc_ECC4:				; CODE XREF: ROM:EC9Aj	ROM:ECA7j ...
		clr	count_DD

loc_ECC6:				; CODE XREF: ROM:ECC2j
		cmp	#05h, count_DD
		bcs	loc_ECD3
		ld	b, unk_300
		and	b, #0FEh
		st	b, unk_300

loc_ECD3:				; CODE XREF: ROM:ECC9j
		clr	a
		cmp	#5Ch, count_C5
		bcs	loc_ED26
		ld	a, unk_1CF
		beq	loc_ECE9
		ld	b, unk_300
		cmpb	b, #01h
		beq	loc_ED22
		and	a, #3Fh
		bne	loc_ED22

loc_ECE9:				; CODE XREF: ROM:ECDCj
		ld	a, word_1C7
		ld	b, unk_68
		cmp	x, unk_1AC
		beq	loc_ED06
		bgt	loc_ECFE
		cmp	a, #86h
		bgt	loc_ED06
		inc	b
		bne	loc_ED06
		bra	loc_ED05
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_ECFE:				; CODE XREF: ROM:ECF3j
		cmpz	b
		beq	loc_ED05
		cmp	a, #7Ah
		bcs	loc_ED06

loc_ED05:				; CODE XREF: ROM:ECFCj	ROM:ECFFj
		dec	b

loc_ED06:				; CODE XREF: ROM:ECF1j	ROM:ECF7j ...
		ld	a, unk_1B3
		add	a, #08h
		st	a, temp_64
		sub	a, #0Bh
		st	a, unk_65
		ld	y, #0064h
		jsr	BoundAccB	; bounding sub:	bounds and flags data that exceeds range specified by pointer in Y. carry is set if saturation occurs
		ld	y, #0C8D1h
		jsr	y + 1Ah
		ld	x, #0098h
		jsr	sub_D2A3	; play swith magic memory specified by x

loc_ED22:				; CODE XREF: ROM:ECE3j	ROM:ECE7j
		ld	a, unk_1CF
		inc	a

loc_ED26:				; CODE XREF: ROM:ECD7j
		st	a, unk_1CF
		bra	loc_ED66

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_ED2B:				; CODE XREF: sub_CAC1+2Ep ROM:EC7Bp
		ld	d, #6996h
		st	d, word_98
		st	a, unk_1B3
		clr	count_DD
		ld	b, unk_300
		or	b, #01h
		st	b, unk_300
		ret
; End of function sub_ED2B


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_ED3E:				; CODE XREF: __RESET:loc_E8D9p
		tbbc	bit4, flags_49,	loc_ED4B ; no bits set or cleared overtly
		ld	a, unk_300
		or	a, #01h
		st	a, unk_300
		clr	count_DD

loc_ED4B:				; CODE XREF: sub_ED3Ej
		tbs	bit4, flags_4F
		beq	loc_ED5B
		cmp	#11h, byte_E5	; average of e3, e4
		bcc	loc_ED5B
		ld	a, unk_300
		cmpb	a, #01h
		beq	locret_ED65

loc_ED5B:				; CODE XREF: sub_ED3E+Fj sub_ED3E+14j
		ld	b, word_98
		tbbs	bit0, flags_42,	loc_ED62 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	b, #69h

loc_ED62:				; CODE XREF: sub_ED3E+1Fj
		st	b, unk_1B3

locret_ED65:				; CODE XREF: sub_ED3E+1Bj
		ret
; End of function sub_ED3E

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_ED66:				; CODE XREF: ROM:ED29j
		ld	y, #01BEh
		ld	x, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	b, #20h
		jsr	loc_C1F0	; iir filter input X, y_-1 in Y, ratio for input in B
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	x, unk_1C0
		st	x, temp_64
		st	d, unk_1C0
		ld	a, #50h
		cmp	#3Dh, count_B7
		bcs	loc_EDCE
		tbbc	bit2, flags_40,	loc_EDCE ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#03h, byte_E5	; average of e3, e4
		bcs	loc_EDA2
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	d, #1400h
		bcc	loc_ED9D
		cmp	d, #0D00h
		bcs	loc_EDA2
		add	d, #0200h
		cmp	d, unk_1BE
		ble	loc_EDA2

loc_ED9D:				; CODE XREF: ROM:ED8Ej
		ld	d, #0100h
		bra	loc_EDAD
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EDA2:				; CODE XREF: ROM:ED87j	ROM:ED93j ...
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		add	d, #0100h
		sub	d, temp_64
		bcc	loc_EDAD
		clr	a
		clr	b

loc_EDAD:				; CODE XREF: ROM:EDA0j	ROM:EDA9j
		shl	d
		shl	d
		mov	d, x
		ld	a, word_1C7
		tbbc	bit1, flags_4F,	loc_EDB9
		tbbs	bit5, flags_44,	loc_EDBB

loc_EDB9:				; CODE XREF: ROM:EDB3j
		ld	a, #80h

loc_EDBB:				; CODE XREF: ROM:EDB6j
		clr	b
		ld	y, #0C53Dh
		jsr	ThreeDtableby16	; Table	pointer	in Y, inputs in	D and X, D divided by 16
		tbbc	bit1, flags_4F,	loc_EDC8
		tbbs	bit5, flags_44,	loc_EDCE

loc_EDC8:				; CODE XREF: ROM:EDC2j
		cmp	a, #50h
		bcc	loc_EDCE
		ld	a, #50h

loc_EDCE:				; CODE XREF: ROM:ED7Fj	ROM:ED81j ...
		st	a, unk_1BB
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR __RESET

loc_EDD2:				; CODE XREF: __RESET:loc_EA43j
		ld	a, flags_4F
		st	a, lastFlags_4f

loc_EDD7:				; CODE XREF: __RESET+1FC6j
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		jmp	MAIN
; END OF FUNCTION CHUNK	FOR __RESET

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_EDE4:				; CODE XREF: __RESET+36Cp
					; __RESET+1207p ...

; FUNCTION CHUNK AT EF44 SIZE 0000016A BYTES
; FUNCTION CHUNK AT F0D4 SIZE 00000040 BYTES
; FUNCTION CHUNK AT F124 SIZE 000000BE BYTES

		ld	a, unk_1EC
		st	a, flags_4F
		cmp	#5Ch, count_B7
		bcs	loc_EE09
		cmp	#0A0h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_EE09
		cmp	#28h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_EE09
		cmp	#05h, byte_E5	; average of e3, e4
		bcs	loc_EE09
		cmp	#0C4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_EE09
		cmp	#93h, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		bcs	loc_EE09
		setb	bit4, flags_4F

loc_EE09:				; CODE XREF: sub_EDE4+8j sub_EDE4+Dj ...
		tbbc	bit2, flags_40,	loc_EE11 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clr	a
		st	a, count_C6
		clrb	bit4, flags_4F

loc_EE11:				; CODE XREF: sub_EDE4:loc_EE09j
		tbbc	bit6, flags_47,	loc_EE1F
		clrb	bit6, flags_4F
		clrb	bit7, flags_4F
		ld	a, #0FFh
		st	a, unk_18F
		bra	loc_EE60
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EE1F:				; CODE XREF: sub_EDE4:loc_EE11j
		ld	b, unk_129
		ld	a, unk_128
		cmp	a, #0FDh
		blta	loc_EE60
		tbbs	bit7, flags_4F,	loc_EE38
		cmp	a, #02h
		blta	loc_EE38
		cmp	b, #35h
		bcs	loc_EE38
		clr	count_A7
		setb	bit7, flags_4F

loc_EE38:				; CODE XREF: sub_EDE4+45j sub_EDE4+4Aj ...
		ld	y, #0C815h
		push	d
		ld	b, unk_197
		jsr	other2D_a
		cmp	a, count_A7
		pull	d
		bcs	loc_EE60
		tbbc	bit4, flags_4F,	loc_EE62
		tbbs	bit6, flags_4F,	loc_EE62
		cmp	a, #02h
		blta	loc_EE62
		cmp	b, #3Dh
		bcs	loc_EE62
		ld	a, count_C6
		cmp	a, #0Fh
		bcc	loc_EE62
		setb	bit5, flags_4F
		setb	bit6, flags_4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EE60:				; CODE XREF: sub_EDE4+39j sub_EDE4+43j ...
		clrb	bit5, flags_4F

loc_EE62:				; CODE XREF: sub_EDE4+63j sub_EDE4+66j ...
		tbbc	bit2, flags_44,	loc_EE68
		tbbc	bit2, flags_40,	loc_EE76 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag

loc_EE68:				; CODE XREF: sub_EDE4:loc_EE62j
		ld	a, unk_128
		ld	b, unk_129
		cmp	a, #02h
		blta	loc_EE81
		cmp	b, #3Dh
		bcs	loc_EE81

loc_EE76:				; CODE XREF: sub_EDE4+81j
		clr	a
		st	a, count_BC
		st	a, unk_191
		ld	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		st	a, unk_196

loc_EE81:				; CODE XREF: sub_EDE4+8Cj sub_EDE4+90j
		jmp	loc_EF44
; End of function sub_EDE4


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_EE84:				; CODE XREF: sub_EDE4:loc_F124p
		ld	a, unk_1EC
		st	a, flags_4F
		tbbc	bit5, flags_4F,	loc_EE98
		ld	b, unk_181
		ld	y, #0C80Eh
		jsr	other2D_a
		st	a, unk_18F

loc_EE98:				; CODE XREF: sub_EE84+5j
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	d, #5400h
		bcc	loc_EEA2
		jsr	CalcRPM

loc_EEA2:				; CODE XREF: sub_EE84+19j
		st	d, word_192
		mov	d, x
		sub	d, word_194
		bcs	loc_EEB0
		jsr	divby2satB
		bra	loc_EEB6
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EEB0:				; CODE XREF: sub_EE84+25j
		clr	b
		ld	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		st	a, unk_196

loc_EEB6:				; CODE XREF: sub_EE84+2Aj
		st	b, unk_190
		st	x, word_194
		tbbs	bit2, flags_40,	loc_EEDF ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		sub	a, unk_196
		bcc	loc_EEC7
		clr	a

loc_EEC7:				; CODE XREF: sub_EE84+40j
		cmp	a, #20h
		bcc	loc_EEDF
		tbbc	bit4, flags_4F,	loc_EEDF
		ld	a, unk_197
		cmp	a, #2Dh
		bcs	loc_EEDF
		cmp	a, #80h
		bcc	loc_EEDF
		ld	a, count_C6
		cmp	a, #99h
		bcs	loc_EEE7

loc_EEDF:				; CODE XREF: sub_EE84+38j sub_EE84+45j ...
		ld	d, #0FFFEh
		st	a, unk_191
		st	b, count_BC

loc_EEE7:				; CODE XREF: sub_EE84+59j
		ld	b, unk_190
		sub	b, unk_191
		bcc	loc_EEF0
		clr	b

loc_EEF0:				; CODE XREF: sub_EE84+69j
		ld	y, #0C81Bh
		jsr	other2D_a
		push	d
		ld	y, #0C822h
		ld	b, VTA		; writ in adc vec 1, probably VTA (TPS)
		jsr	other2D_b
		mov	a, b
		pull	x
		jsr	satMulBbyX	; return upper 16b in D, copy of D in X, saturate d if it overflows
		sub	a, unk_181
		bcs	loc_EF0A
		clr	a

loc_EF0A:				; CODE XREF: sub_EE84+83j
		neg	a
		cmp	a, unk_18F
		ble	loc_EF13
		ld	a, unk_18F

loc_EF13:				; CODE XREF: sub_EE84+8Aj
		cmp	a, #00h
		bcc	loc_EF19
		ld	a, #00h

loc_EF19:				; CODE XREF: sub_EE84+91j
		st	a, unk_180
		ret
; End of function sub_EE84


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_EF1D:				; CODE XREF: IV6-B9p
		ld	a, unk_1EC
		cmpb	a, #20h
		bne	locret_EF30
		ld	b, #04h
		add	b, unk_18F
		bcc	loc_EF2D
		ld	b, #0FFh

loc_EF2D:				; CODE XREF: sub_EF1D+Cj
		st	b, unk_18F

locret_EF30:				; CODE XREF: sub_EF1D+5j
		ret
; End of function sub_EF1D


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_EF31:				; CODE XREF: __RESET+1AB0p
		clr	a
		cmp	#14h, count_BC
		bcs	loc_EF40
		ld	a, unk_191
		add	a, #04h
		bcc	loc_EF40
		ld	a, #0FFh

loc_EF40:				; CODE XREF: sub_EF31+4j sub_EF31+Bj
		st	a, unk_191
		ret
; End of function sub_EF31

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR sub_EDE4

loc_EF44:				; CODE XREF: sub_EDE4:loc_EE81j
		ld	a, flags_4F
		st	a, unk_1EC
		tbs	bit0, flags_41	; b1 set under 1200RPM
		beq	loc_EF50
		jmp	locret_F1E1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EF50:				; CODE XREF: sub_EDE4+167j
		jsr	filterIdleRPM	; for RPM type variable	word_14A
		jsr	sub_D353
		ld	a, #55h
		tbbs	bit2, flags_43,	loc_EF7D
		tbbc	bit2, flags_40,	loc_EF7D ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#5Ch, count_B7
		bcs	loc_EF7D
		cmp	#99h, count_BD
		bcs	loc_EF7D
		ld	d, word_14A	; RPM type variable, filtered if value is between 450 and 1250 RPM
		add	d, #0100h
		sub	d, RPM		; probably standard toyota format: 50's and fractions of 50
		bcc	loc_EF74
		clr	a
		clr	b

loc_EF74:				; CODE XREF: sub_EDE4+18Cj
		jsr	divby2satB
		ld	y, #0C7CEh
		jsr	other2D_a

loc_EF7D:				; CODE XREF: sub_EDE4+174j
					; sub_EDE4+177j ...
		st	a, byte_17A
		clr	a
		tbbc	bit7, flags_43,	loc_EF9E
		tbbs	bit2, flags_40,	loc_EF9E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	d, word_12E
		ld	y, #0C6DCh
		jsr	divDby32
		mov	d, x
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		cmp	a, #20h
		bcs	loc_EF9B
		add	a, #20h
		rorc	a
		rorc	b

loc_EF9B:				; CODE XREF: sub_EDE4+1B1j
		jsr	ThreeDtableby16	; Table	pointer	in Y, inputs in	D and X, D divided by 16

loc_EF9E:				; CODE XREF: sub_EDE4+19Dj
					; sub_EDE4+1A0j
		st	a, byte_17D
		ld	d, word_12E
		jsr	divDby16
		mov	d, x
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		ld	y, #0C700h
		jsr	ThreeDtableby8	; Table	pointer	in Y, inputs in	D and X, D divided by 8
		st	a, temp_64
		clr	a
		tbbc	bit3, flags_40,	loc_EFBE ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	b, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		ld	y, #0C7F4h
		jsr	other2D

loc_EFBE:				; CODE XREF: sub_EDE4+1CFj
		st	a, unk_17E
		ld	b, temp_64
		ld	a, #01h
		sub	b, byte_17D
		subc	a, #00h
		tbbs	bit2, flags_40,	loc_EFF7 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		add	b, unk_17E
		addc	a, #00h
		tbbc	bit3, flags_40,	loc_EFEB ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#1Ch, count_AA
		bgt	loc_EFEB
		cmp	#38h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_EFEB
		cmp	#90h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_EFEB
		sub	d, #002Bh
		bcc	loc_EFEB
		clr	a
		clr	b

loc_EFEB:				; CODE XREF: sub_EDE4+1EEj
					; sub_EDE4+1F4j ...
		dec	a
		beq	loc_EFF4
		bmi	loc_EFF3
		ld	b, #0FFh
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  41h ; A		; brn 2	byte nop effectivly
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EFF3:				; CODE XREF: sub_EDE4+20Aj
		clr	b

loc_EFF4:				; CODE XREF: sub_EDE4+208j
		mov	b, a
		bra	loc_F027
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_EFF7:				; CODE XREF: sub_EDE4+1E6j
		dec	a
		beq	loc_EFFC
		clr	a
		clr	b

loc_EFFC:				; CODE XREF: sub_EDE4+214j
		shl	d
		add	d, #0055h
		sub	b, byte_17A
		subc	a, #00h
		bcc	loc_F009
		clr	a
		clr	b

loc_F009:				; CODE XREF: sub_EDE4+221j
		jsr	divby2satB
		st	b, temp_64
		ld	y, #0C7E9h
		jsr	TwoD_lilRPM
		ld	x, #0C7F0h
		tbbc	bit7, flags_42,	loc_F01B ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		inc	x

loc_F01B:				; CODE XREF: sub_EDE4+233j
		cmp	a, x + 00h
		bcc	loc_F021
		ld	a, x + 00h

loc_F021:				; CODE XREF: sub_EDE4+239j
		cmp	a, temp_64
		ble	loc_F027
		ld	a, temp_64

loc_F027:				; CODE XREF: sub_EDE4+211j
					; sub_EDE4+23Fj
		st	a, unk_178
		ld	a, #80h
		ld	b, THW		; set in adc vec 3, not	of bits	read from adc, probably	THW
		cmp	b, #0DCh
		bcc	loc_F05E
		push	b
		ld	y, #0C7FCh
		jsr	other2D_a
		pull	b
		tbbs	bit2, flags_40,	loc_F05E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		st	a, temp_67
		ld	y, #0C805h
		jsr	other2D_a
		st	a, temp_66
		ld	d, unk_54
		cmp	a, #8Bh
		bcc	loc_F05C
		sub	a, #42h
		bcc	loc_F053
		clr	a
		clr	b

loc_F053:				; CODE XREF: sub_EDE4+26Bj
		div	d, #49h
		ld	y, #0066h
		jsr	other2Dd
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F05C:				; CODE XREF: sub_EDE4+267j
		ld	a, temp_67

loc_F05E:				; CODE XREF: sub_EDE4+24Cj
					; sub_EDE4+256j
		st	a, unk_179
		tbs	bit7, flags_4B
		bne	loc_F06A
		ld	d, #0000h
		bra	loc_F0A2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F06A:				; CODE XREF: sub_EDE4+27Fj
		ld	d, unk_17B
		cmp	a, #0FEh
		bcc	loc_F0A7
		cmp	#90h, byte_63	; difference in	RPM between immedate and word_14C, 6.25	RPM / bit
		bgt	loc_F0A7
		cmp	#24h, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcs	loc_F0A7
		tbbc	bit2, flags_40,	loc_F091 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	d, #0010h
		bcc	loc_F08A
		add	d, #0001h
		bcs	loc_F0A7
		bra	loc_F0A2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F08A:				; CODE XREF: sub_EDE4+29Dj
		add	d, #0006h
		bcs	loc_F0A7
		bra	loc_F0A2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F091:				; CODE XREF: sub_EDE4+297j
		cmp	d, #0056h
		bcc	loc_F09D
		add	d, #0022h
		bcs	loc_F0A7
		bra	loc_F0A2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F09D:				; CODE XREF: sub_EDE4+2B0j
		add	d, #0009h
		bcs	loc_F0A7

loc_F0A2:				; CODE XREF: sub_EDE4+284j
					; sub_EDE4+2A4j ...
		st	d, unk_17B
		bra	loc_F0AC
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F0A7:				; CODE XREF: sub_EDE4+28Bj
					; sub_EDE4+290j ...
		ld	a, #0FEh
		st	a, unk_17B

loc_F0AC:				; CODE XREF: sub_EDE4+2C1j
		bra	loc_F0D4
; END OF FUNCTION CHUNK	FOR sub_EDE4

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F0AE:				; CODE XREF: __RESET+372p
		ld	a, flags_1E7	; any bits fitting mask	1C or 1F can cut fuel (during crank?)
		and	a, #1Fh
		ld	b, flags_1F3
		and	b, #0E0h
		add	a, b
		st	a, flags_4F
		tbbs	bit0, flags_4F,	locret_F0D3
		tbbc	bit7, flags_4F,	locret_F0D3
		tbbc	bit6, flags_4F,	locret_F0D3
		tbbc	bit2, flags_40,	locret_F0D3 ; b0 - lilRPM not running flag, b1 - deltaNE based not running flag
		cmp	#05h, byte_E5	; average of e3, e4
		bcs	locret_F0D3
		cmp	#0C4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	locret_F0D3
		clrb	bit7, flags_4B

locret_F0D3:				; CODE XREF: sub_F0AE+Dj sub_F0AE+10j	...
		ret
; End of function sub_F0AE

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR sub_EDE4

loc_F0D4:				; CODE XREF: sub_EDE4:loc_F0ACj
		tbbc	bit2, flags_43,	loc_F0FA
		ld	y, #0C7D7h
		jsr	TwoD_THW
		ld	b, unk_118
		cmp	a, b
		bgt	loc_F0FA
		ld	y, #0C7DEh
		jsr	TwoDmovBA
		push	a
		ld	a, #1Ch
		sub	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_F0F1
		clr	a

loc_F0F1:				; CODE XREF: sub_EDE4+30Aj
		mul	a, #0ABh
		jsr	duvby32satB
		pull	a
		add	a, b
		bcc	loc_F0FC

loc_F0FA:				; CODE XREF: sub_EDE4:loc_F0D4j
					; sub_EDE4+2FDj
		ld	a, #0FFh

loc_F0FC:				; CODE XREF: sub_EDE4+314j
		st	a, unk_17F
		ld	b, unk_178
		bsr	sub_F114
		jsr	divby2satB
		cmp	b, unk_17F
		ble	loc_F10F
		ld	b, unk_17F

loc_F10F:				; CODE XREF: sub_EDE4+326j
		st	b, unk_181
		bra	loc_F124
; END OF FUNCTION CHUNK	FOR sub_EDE4

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F114:				; CODE XREF: sub_EDE4+31Ep
		ld	y, #0C8CDh
		clr	a
		add	b, unk_179
		addc	a, #00h
		shl	d
		jsr	y + 27h
		sub	d, #0109h
		ret
; End of function sub_F114

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR sub_EDE4

loc_F124:				; CODE XREF: sub_EDE4+32Ej
		jsr	sub_EE84
		ld	b, #04h
		tbbc	bit2, flags_43,	loc_F12E
		ld	b, #02h

loc_F12E:				; CODE XREF: sub_EDE4+345j
		add	b, unk_76
		bcc	loc_F134
		ld	b, #0FFh

loc_F134:				; CODE XREF: sub_EDE4+34Cj
		cmp	b, unk_181
		bcs	loc_F13C
		ld	b, unk_181

loc_F13C:				; CODE XREF: sub_EDE4+353j
		tbbc	bit5, flags_49,	loc_F145 ; no bits set or cleared overtly
		cmp	b, #40h
		bcs	loc_F145
		ld	b, #40h

loc_F145:				; CODE XREF: sub_EDE4:loc_F13Cj
					; sub_EDE4+35Dj
		st	b, unk_76
		cmp	b, unk_180
		bcs	loc_F14F
		ld	b, unk_180

loc_F14F:				; CODE XREF: sub_EDE4+366j
		clr	a
		shl	d
		st	d, temp_66
		clr	a
		ld	b, unk_181
		shl	d
		sub	b, unk_182
		subc	a, #00h
		bcc	loc_F161
		clr	a
		clr	b

loc_F161:				; CODE XREF: sub_EDE4+379j
		cmp	d, temp_66
		bcs	loc_F167
		ld	d, temp_66

loc_F167:				; CODE XREF: sub_EDE4+37Fj
		cmp	d, unk_17B
		bcs	loc_F16F
		ld	d, unk_17B

loc_F16F:				; CODE XREF: sub_EDE4+386j
		add	b, byte_17A
		addc	a, #00h
		sub	d, #0055h
		bcc	loc_F17B
		clr	a
		clr	b

loc_F17B:				; CODE XREF: sub_EDE4+393j
		tbbs	bit3, flags_4B,	loc_F190
		tbbc	bit2, flags_40,	loc_F18D ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit4, flags_49,	loc_F18D ; no bits set or cleared overtly
		ld	a, #3Fh
		st	a, unk_76
		ld	d, #0080h
		bra	loc_F197
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F18D:				; CODE XREF: sub_EDE4+39Aj
					; sub_EDE4+39Dj
		tbbc	bit1, flags_40,	loc_F197 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag

loc_F190:				; CODE XREF: sub_EDE4:loc_F17Bj
		ld	a, #042
		st	a, unk_76
		ld	d, #0056h

loc_F197:				; CODE XREF: sub_EDE4+3A7j
					; sub_EDE4:loc_F18Dj
		cmp	d, #0000h
		bcc	loc_F19F
		ld	d, #0000h

loc_F19F:				; CODE XREF: sub_EDE4+3B6j
		cmp	d, #01CDh
		ble	loc_F1A7
		ld	d, #01CDh

loc_F1A7:				; CODE XREF: sub_EDE4+3BEj
		st	d, unk_176
		tbbs	bit5, flags_49,	loc_F1B0 ; no bits set or cleared overtly
		tbbc	bit1, flags_40,	loc_F1B8 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag

loc_F1B0:				; CODE XREF: sub_EDE4+3C6j
		ld	a, #05h
		push	a
		ld	d, #00178	; 712us
		bra	loc_F1D8	; write	word_184
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F1B8:				; CODE XREF: sub_EDE4+3C9j
		ld	d, #01373
		sub	d, unk_176
		push	a
		ld	x, word_106	; time for 60 deg crank	rotation
		jsr	mulBbyX		; return upper 16b in D, copy of D in X
		mov	s, x
		shr	d

loc_F1C7:				; CODE XREF: sub_EDE4+3F2j
		cmp	d, #00178
		bcc	loc_F1D8	; write	word_184
		st	d, temp_64
		ld	d, word_108	; time for 60 deg crank	rotation
		shr	d
		add	d, temp_64
		dec	x + 00h
		bne	loc_F1C7

loc_F1D8:				; CODE XREF: sub_EDE4+3D2j
					; sub_EDE4+3E6j
		di			; write	word_184
		st	d, word_184	; probably dwell?
		pull	a
		st	a, byte_183
		ei

locret_F1E1:				; CODE XREF: sub_EDE4+169j
		ret
; END OF FUNCTION CHUNK	FOR sub_EDE4
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

		; public IVe
IVe:					; DATA XREF: ROM:FFFAo
		clrb	bit6, IRQLL	; ASR2 (/NE) interrupt
		push	x
		push	y
		tbbc	bit5, flags_40,	IVe1 ; b0 - lilRPM not running flag, b1	- deltaNE based	not running flag
		jsr	toggleA0B5

IVe1:					; CODE XREF: ROM:F1E6j
		cmp	#3Fh, count_B0
		bcs	loc_F20B
		ld	a, byte_1A2	; set to zero on G2 flagged NE (10deg BTDC #1)
		tbbc	bit5, PORTAL, IVe2 ; G2	flag
		inc	a		; increment 1A2
		bne	IVe2		; G2 flag
		dec	a

IVe2:					; CODE XREF: ROM:F1F4j	ROM:F1F8j
		tbbs	bit2, PORTD_ASRIN, loc_F20C ; G2 flag
		cmp	a, #002
		beq	IVe3
		cmp	a, #006
		bcs	loc_F20B
		setb	bit3, flags_4D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	three byte nop
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

IVe3:					; CODE XREF: ROM:F200j
		clrb	bit3, flags_4D

loc_F20B:				; CODE XREF: ROM:F1EFj	ROM:F204j
		clr	a

loc_F20C:				; CODE XREF: ROM:IVe2j
		st	a, byte_1A2	; set to zero on G2 flagged NE (10deg BTDC #1)
		clrb	bit5, PORTAL
		ld	b, motorPhaseNE	; writ in IVe
		st	b, byte_111	; last unk_50
		tbbc	bit3, PORTD_ASRIN, IVe_G2flag ;	G2 flag
		tbbc	bit2, PORTD_ASRIN, IVe_G1flag ;	G1 flag
		cmpz	b
		bmi	loc_F252
		mov	b, a
		inc	b		; increment NE counter
		and	a, #0Fh
		cmp	a, #05h
		bcs	loc_F252
		and	b, #0F0h
		add	b, #10h
		mov	b, a
		cmp	b, #20h
		beq	loc_F247
		cmp	b, #40h
		bne	loc_F252
		clr	a
		bra	loc_F247
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

IVe_G2flag:				; CODE XREF: ROM:F216j
		clr	a
		cmp	b, #053
		beq	iVe_asgnPhase
		bra	loc_F244
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

IVe_G1flag:				; CODE XREF: ROM:F219j
		ld	a, #032
		cmp	b, #021
		beq	iVe_asgnPhase

loc_F244:				; CODE XREF: ROM:F23Cj
		cmpz	b
		bmi	iVe_asgnPhase

loc_F247:				; CODE XREF: ROM:F22Ej	ROM:F235j
		tbbc	bit7, flags_40,	iVe_asgnPhase ;	b0 - lilRPM not	running	flag, b1 - deltaNE based not running flag
		tbbs	bit0, flags_40,	iVe_asgnPhase ;	b0 - lilRPM not	running	flag, b1 - deltaNE based not running flag
		setb	bit3, flags_4E
		setb	bit6, flags_4C

iVe_asgnPhase:				; CODE XREF: ROM:F23Aj	ROM:F242j ...
		mov	a, b

loc_F252:				; CODE XREF: ROM:F21Dj	ROM:F225j ...
		st	b, motorPhaseNE	; writ in IVe
		tbbc	bit0, flags_42,	loc_F27F ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	a, word_9A
		bpz	loc_F27F
		ld	a, byte_111	; last unk_50
		bpz	loc_F27F
		ld	y, #0C6D6h
		cmp	b, #20h
		bne	loc_F26C
		ld	y, #0C6D9h
		bra	loc_F270
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F26C:				; CODE XREF: ROM:F265j
		cmp	b, #00h
		bne	loc_F27F

loc_F270:				; CODE XREF: ROM:F26Aj
		ld	d, y + 00h
		st	a, unk_175	; engine phase information
		st	b, unk_110
		ld	a, y + 02h
		st	a, unk_10E
		setb	bit0, flags_46

loc_F27F:				; CODE XREF: ROM:F254j	ROM:F259j ...
		bra	IVE_reti

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; init engine phase and	timing variables

tweak106:				; CODE XREF: __RESET+81p __RESET+238p
		ld	d, #5500h
		ld	y, #0106h
		st	d, [y]		; i feel like that will	double increment y
		st	d, [y]
		st	d, [y]
		ld	d, #0FFFFh
		st	d, sixDeltaNE	; time for 180 deg crank rotation
		st	a, motorPhaseNE	; re-init
		st	a, motorPhase	; re-init
		ret
; End of function tweak106


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F295:				; CODE XREF: IV6-C5p
		tbbc	bit5, flags_49,	loc_F2A9 ; no bits set or cleared overtly
		tbs	bit4, flags_47
		bne	locret_F2B0
		cmp	#012, count_A0
		bcs	locret_F2B0
		ld	a, #0FFh
		st	a, motorPhaseNE	; set to FF
		st	a, motorPhase	; set to FF
		bra	locret_F2B0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F2A9:				; CODE XREF: sub_F295j
		tbbc	bit4, flags_47,	locret_F2B0
		clrb	bit4, flags_47
		clr	count_A0

locret_F2B0:				; CODE XREF: sub_F295+5j sub_F295+Aj ...
		ret
; End of function sub_F295

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

IVE_reti:				; CODE XREF: ROM:loc_F27Fj
		jsr	IVEendsub
		clrb	bit3, flags_42
		setb	bit1, IRQLL	; trigger IV6 (IVE_reti	call)
		pull	y
		pull	x
		reti

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


IVEendsub:				; CODE XREF: ROM:IVE_retip
		ld	a, unk_1A6
		ld	b, motorPhaseNE	; writ in IVe
		cmp	b, #00h
		bne	loc_F2C8
		clrb	bit1, PORTB
		bra	loc_F2D0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F2C8:				; CODE XREF: IVEendsub+7j
		and	b, #07h
		cmp	b, #00h
		bne	loc_F2D3
		setb	bit1, PORTB

loc_F2D0:				; CODE XREF: IVEendsub+Bj
		jmp	loc_F357
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F2D3:				; CODE XREF: IVEendsub+11j
		cmp	b, #01h
		bne	loc_F2DA
		jmp	loc_F353
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F2DA:				; CODE XREF: IVEendsub+1Aj
		cmp	b, #02h
		beq	loc_F2E1
		jmp	locret_F36B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F2E1:				; CODE XREF: IVEendsub+21j
		tbbs	bit1, flags_40,	loc_F350 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit2, DOUT, loc_F350 ; DOUT Data Register
		mov	a, b
		tbbs	bit0, IRQLL, loc_F2ED ;	strange	IRL signal
		add	b, #04h

loc_F2ED:				; CODE XREF: IVEendsub+2Dj
		shr	b
		shr	b
		shr	b
		rorc	b
		bvc	loc_F316
		bcs	loc_F345
		tbbc	bit4, flags_42,	loc_F350 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		cmp	#040, RPM	; 2000 RPM
		bcs	loc_F350
		cmp	#120, RPM	; 6000 RPM
		bcc	loc_F350
		cmp	#28h, unk_ED
		bcc	loc_F30B
		inc	unk_ED
		bra	loc_F350
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F30B:				; CODE XREF: IVEendsub+4Aj
		setb	bit4, flags_4B
		setb	bit2, flags_4D
		ld	b, #0FFh
		st	b, unk_1AB
		bra	loc_F350
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F316:				; CODE XREF: IVEendsub+36j
		cmp	#0Eh, RPM	; probably standard toyota format: 50's and fractions of 50
		bcs	loc_F350
		cmp	#78h, RPM	; probably standard toyota format: 50's and fractions of 50
		bcc	loc_F350
		and	a, #0F0h
		add	a, #10h
		cmp	a, #0C0h
		bcs	loc_F333
		ld	b, word_82
		cmpb	b, #08h
		bne	loc_F330
		setb	bit4, flags_4D

loc_F330:				; CODE XREF: IVEendsub+71j
		clr	a
		bra	loc_F337
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F333:				; CODE XREF: IVEendsub+6Bj
		cmp	a, #60h
		bne	loc_F351

loc_F337:				; CODE XREF: IVEendsub+76j
		clrb	bit2, DOUT
		div	d, #00h		; delay	for sure
		div	d, #00h
		div	d, #00h
		setb	bit2, DOUT
		setb	bit4, flags_4B
		bra	loc_F351
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F345:				; CODE XREF: IVEendsub+38j
		ld	b, unk_1AB
		bne	loc_F34C
		clrb	bit4, flags_4B

loc_F34C:				; CODE XREF: IVEendsub+8Dj
		clrb	bit4, flags_4D
		clr	unk_ED

loc_F350:				; CODE XREF: IVEendsub:loc_F2E1j
					; IVEendsub+29j ...
		clr	a

loc_F351:				; CODE XREF: IVEendsub+7Aj
					; IVEendsub+88j
		bra	loc_F368
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F353:				; CODE XREF: IVEendsub+1Cj
		setb	bit0, PORTB
		bra	locret_F36B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F357:				; CODE XREF: IVEendsub:loc_F2D0j
		tbbs	bit0, IRQLL, loc_F35C ;	Interrupt Request Flag LSB
		or	a, #08h

loc_F35C:				; CODE XREF: IVEendsub:loc_F357j
		clrb	bit0, PORTB
		tbbs	bit1, PORTC, loc_F363 ;	Port C Data Register
		or	a, #02h

loc_F363:				; CODE XREF: IVEendsub+A3j
		tbbs	bit0, PORTC, loc_F368 ;	Port C Data Register
		or	a, #01h

loc_F368:				; CODE XREF: IVEendsub:loc_F351j
					; IVEendsub:loc_F363j
		st	a, unk_1A6

locret_F36B:				; CODE XREF: IVEendsub+23j
					; IVEendsub+9Aj
		ret
; End of function IVEendsub


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


IV6sub1:				; CODE XREF: IV6-B6p IV6-A8p ...

; FUNCTION CHUNK AT F3F8 SIZE 00000160 BYTES
; FUNCTION CHUNK AT F643 SIZE 0000011C BYTES

		tbs	bit3, flags_42	; b2 set during	init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		beq	loc_F373	; this sub wont	run until we've received at least ONE NE pulse
		jmp	locret_F75E	; bomb out
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F373:				; CODE XREF: IV6sub1+2j
		jsr	doInj_10ms	; throw	a 10ms pulse on	all injectors if some flags are	okay
		tbbs	bit7, flags_40,	loc_F37B ; time	of particular NE edge
		clrb	bit6, flags_4C

loc_F37B:				; CODE XREF: IV6sub1+Aj
		ld	x, ASR2		; time of particular NE	edge
		st	x, NEtime	; an asr2 time
		clr	a
		ld	b, motorPhaseNE	; writ in IVe
		bpz	loc_F387	; clear	if motorPhaseNE	COULD make sense, otherwise set	to 8
		ld	a, #08h

loc_F387:				; CODE XREF: IV6sub1+17j
		xch	a, count_B2	; clear	if motorPhaseNE	COULD make sense, otherwise set	to 8
		xch	b, motorPhase	; writ here as copy of byte_50
		cmpz	b
		bmi	loc_F3AA
		ld	b, motorPhase	; writ in IV6 (4ms periodic)
		and	b, #07h
		cmpb	b, #01h
		bne	loc_F3BC	; only evaluate	on even	NE counts. Bounce on odd
		ld	y, #0106h
		add	y, b
		cmp	a, #08h
		bcc	loc_F3A6	; this would be	a badness
		mov	x, d
		sub	d, LastNEtime	; last asr2 time for calculating average (even ne count?)
		cmp	a, #085		; 57.4 RPM
		bcs	loc_F3A9

loc_F3A6:				; CODE XREF: IV6sub1+30j
		ld	d, #5500h	; default value, not good to use.

loc_F3A9:				; CODE XREF: IV6sub1+38j
		st	d, [y]

loc_F3AA:				; CODE XREF: IV6sub1+20j
		st	x, LastNEtime	; last asr2 time for calculating average (even ne count?)
		ld	d, word_106	; time for 60 deg crank	rotation
		add	d, word_108	; time for 60 deg crank	rotation
		add	d, word_10A	; time for 60 deg crank	rotation
		st	d, sixDeltaNE	; time for 180 deg crank rotation
		jsr	chkRevLimit

loc_F3BC:				; CODE XREF: IV6sub1+28j
		ld	d, sixDeltaNE	; time for 180 deg crank rotation
		cmp	d, #15000	; 500 rpm
		bcc	loc_F3C6	; 300 rpm
		clrb	bit1, flags_40

loc_F3C6:				; CODE XREF: IV6sub1+56j
		cmp	d, #25000	; 300 rpm
		bcs	loc_F3CD
		setb	bit1, flags_40

loc_F3CD:				; CODE XREF: IV6sub1+5Dj
		ld	a, motorPhase	; writ in IV6 (4ms periodic)
		bpz	loc_F3D4
		jmp	IV6SUB1_100	; is not good
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F3D4:				; CODE XREF: IV6sub1+63j
		and	a, #07h
		cmp	a, #02h
		beq	loc_F3DD
		jmp	IV6SUB1_100
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F3DD:				; CODE XREF: IV6sub1+6Cj
		clr	a
		st	a, unk_18C
		beq	loc_F3E5
		clr	unk_E2

loc_F3E5:				; CODE XREF: IV6sub1+75j
		ld	b, unk_1A7
		shr	b
		cmp	a, b
		bcc	loc_F3ED
		mov	b, a

loc_F3ED:				; CODE XREF: IV6sub1+7Ej
		st	a, unk_182
		jmp	IV6SUB1_100
; End of function IV6sub1


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F3F3:				; CODE XREF: IV6-BFp
		clrb	bit5, flags_4D
		clrb	bit5, flags_4B
		ret
; End of function sub_F3F3

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR IV6sub1

IV6SUB1_100:				; CODE XREF: IV6sub1+65j IV6sub1+6Ej ...
		ld	b, motorPhase	; writ in IV6 (4ms periodic)
		and	b, #07h
		bne	loc_F400
		clrb	bit0, flags_41

loc_F400:				; CODE XREF: IV6sub1+90j
		ld	b, motorPhase	; writ in IV6 (4ms periodic)
		bmi	loc_F46C
		and	b, #07h
		cmp	b, #01h
		bne	loc_F416
		ld	a, byte_183
		st	a, byte_186	; last 183
		ld	x, word_184	; probably dwell?
		st	x, word_187	; last 184

loc_F416:				; CODE XREF: IV6sub1+9Cj
		cmp	b, byte_186	; last 183
		bne	loc_F43E
		ld	d, word_187	; last 184
		sub	d, #00053	; 212us
		add	d, NEtime	; an asr2 time
		sub	d, #0008h
		cmp	d, TIMER	; Timer	MSB (bit11~bit18)
		bpz	loc_F42D
		ld	d, TIMER	; Timer	MSB (bit11~bit18)

loc_F42D:				; CODE XREF: IV6sub1+BDj
		add	d, #00008
		st	d, CPR0		; Timer	comparison #0 MSB
		setb	bit0, DOM
		setb	bit0, DOUT	; set IGT
		add	d, #16250	; 65ms
		st	d, IGToffTime	; igt related
		bra	loc_F46C
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F43E:				; CODE XREF: IV6sub1+ADj
		dec	b
		bpz	loc_F443
		ld	b, #05h

loc_F443:				; CODE XREF: IV6sub1+D3j
		cmp	b, byte_186	; last 183
		bne	loc_F46C
		ld	d, word_187	; last 184
		sub	d, #00053
		add	d, NEtime	; an asr2 time
		sub	d, #0008h
		cmp	d, TIMER	; Timer	MSB (bit11~bit18)
		bpz	loc_F45A
		ld	d, TIMER	; Timer	MSB (bit11~bit18)

loc_F45A:				; CODE XREF: IV6sub1+EAj
		add	d, #0008h
		di
		tbbc	bit0, LDOUT, loc_F466 ;	Latch DOUT
		st	d, CPR0		; Timer	comparison #0 MSB
		clrb	bit0, DOUT
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F466:				; CODE XREF: IV6sub1+F2j
		setb	bit1, flags_46
		st	d, IGToffTime	; igt related
		ei

loc_F46C:				; CODE XREF: IV6sub1+96j IV6sub1+D0j ...
		ld	a, motorPhase	; writ in IV6 (4ms periodic)
		bpz	loc_F473
		jmp	loc_F643
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F473:				; CODE XREF: IV6sub1+102j
		ld	d, Pulsewidth
		ld	x, word_9A
		bmi	loc_F47D
		tbbs	bit0, flags_40,	loc_F4A2 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag

loc_F47D:				; CODE XREF: IV6sub1+10Cj
		tbbs	bit0, flags_46,	loc_F4C4
		ld	x, word_9A
		bmi	loc_F48E
		cmp	#024, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	loc_F48E
		cmp	#1Fh, count_B7
		bcs	loc_F4A2

loc_F48E:				; CODE XREF: IV6sub1+116j IV6sub1+11Bj
		cmp	#13h, motorPhase ; writ	in IV6 (4ms periodic)
		bne	loc_F4A2
		shr	d
		setb	bit0, flags_46
		ld	x, #0F558h	; injector masks
		jsr	DoInjectors	; do #1
		inc	x
		jsr	DoInjectors	; do #3
		bra	loc_F4B8
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F4A2:				; CODE XREF: IV6sub1+10Ej IV6sub1+120j ...
		clrb	bit0, flags_46
		cmp	#03h, motorPhase ; writ	in IV6 (4ms periodic)
		beq	loc_F4B1
		cmp	#23h, motorPhase ; writ	in IV6 (4ms periodic)
		beq	loc_F4B1
		jmp	loc_F533
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F4B1:				; CODE XREF: IV6sub1+13Bj IV6sub1+140j
		tbbc	bit3, flags_44,	loc_F4B5
		shr	d

loc_F4B5:				; CODE XREF: IV6sub1:loc_F4B1j
		jsr	doAllInj_2

loc_F4B8:				; CODE XREF: IV6sub1+134j IV6sub1+15Ej ...
		ld	a, #02h
		st	a, unk_175	; engine phase information
		ld	a, #10h
		st	a, unk_110
		bra	loc_F514
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F4C4:				; CODE XREF: IV6sub1:loc_F47Dj
		ld	b, unk_10E
		mov	b, a
		cmp	b, #35h
		bgt	loc_F4B8
		and	b, #0Fh
		cmp	b, #05h
		bgt	loc_F4B8
		cmp	a, motorPhase	; writ in IV6 (4ms periodic)
		bne	loc_F533
		ld	b, unk_175	; engine phase information
		and	b, #03h
		ld	x, #0F558h	; injector masks
		add	x, b		; add offset to	get correct cylinder
		ld	d, Pulsewidth
		jsr	DoInjectors	; the real injection call
		ld	a, unk_175	; engine phase information
		inc	a
		and	a, #03h
		st	a, unk_175	; engine phase information
		ld	d, unk_10F
		sub	a, b
		bcs	loc_F4FC
		cmp	a, #05h
		ble	loc_F510
		ld	a, #05h
		bra	loc_F510
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F4FC:				; CODE XREF: IV6sub1+186j
		cmp	a, #0FDh
		bcc	loc_F50A
		push	b
		ld	b, unk_175	; engine phase information
		shr	b
		pull	b
		bcs	loc_F50A
		clrb	bit7, flags_45

loc_F50A:				; CODE XREF: IV6sub1+192j IV6sub1+19Aj
		cmp	a, #0FBh
		bcc	loc_F510
		ld	a, #0FBh

loc_F510:				; CODE XREF: IV6sub1+18Aj IV6sub1+18Ej ...
		add	a, b
		st	a, unk_110

loc_F514:				; CODE XREF: IV6sub1+156j
		ld	a, unk_175	; engine phase information
		mul	a, #06h
		add	b, unk_110
		sub	b, #0Ch
		bcc	loc_F522
		add	b, #18h

loc_F522:				; CODE XREF: IV6sub1+1B2j
		cmp	b, #18h
		bcs	loc_F528
		sub	b, #18h

loc_F528:				; CODE XREF: IV6sub1+1B8j
		clr	a
		div	d, #06h
		shl	b
		shl	b
		shl	b
		shl	b
		add	a, b
		st	a, unk_10E

loc_F533:				; CODE XREF: IV6sub1+142j IV6sub1+168j
		tbbc	bit0, flags_46,	loc_F553
		ld	a, unk_10E
		mov	a, b
		and	a, #07h
		and	b, #30h
		sub	a, #03h
		bcc	loc_F548
		sub	b, #10h
		and	b, #30h
		add	a, #06h

loc_F548:				; CODE XREF: IV6sub1+1D4j
		add	a, b
		cmp	a, motorPhase	; writ in IV6 (4ms periodic)
		bne	loc_F555
		ld	a, unk_175	; engine phase information
		shr	a
		bcs	loc_F555

loc_F553:				; CODE XREF: IV6sub1:loc_F533j
		clrb	bit7, flags_45

loc_F555:				; CODE XREF: IV6sub1+1DFj IV6sub1+1E5j
		jmp	loc_F643
; END OF FUNCTION CHUNK	FOR IV6sub1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  20h		; data for injection, #1
		.db  40h ; @		; #3
		.db  80h ; Ђ		; #4
		.db  10h		; #2
		.db 0DFh ; Я		; inverse masks	for #1
		.db 0BFh ; ї		; #3
		.db  7Fh ; 		; #4
		.db 0EFh ; п		; #2
		.db  3Ah ; :		; CPR5,	#1
		.db  3Ch ; <		; CPR6,	#3
		.db  3Eh ; >		; CPR7,	#4
		.db  38h ; 8		; CPR4,	#2
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F564:				; CODE XREF: ROM:DE5Dp
		cmp	#0E4h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		ble	loc_F57A
		tbbc	bit3, flags_40,	loc_F57A ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	b, #136
		tbbc	bit6, flags_44,	loc_F573
		ld	b, #132

loc_F573:				; CODE XREF: ROM:F56Ej
		cmp	b, RPM		; probably standard toyota format: 50's and fractions of 50
		bgt	loc_F57A
		setb	bit6, flags_44
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F57A:				; CODE XREF: ROM:F567j	ROM:F569j ...
		clrb	bit6, flags_44
		ld	d, Pulsewidth
		add	d, #0591h
		rorc	a
		rorc	b
		jsr	divDby16
		mov	d, x
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		jsr	divDby16
		jsr	mulDbyX		; return upper 32 in X:Y
		div	d, #31h
		ld	a, #09h
		tbbs	bit2, flags_40,	loc_F59E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, #03h
		tbbs	bit2, PORTA, loc_F59E ;	Port A Data Register
		ld	a, #02h

loc_F59E:				; CODE XREF: ROM:F594j	ROM:F599j
		add	a, b
		ld	b, #10h
		tbbc	bit6, flags_44,	loc_F5A6
		ld	b, #0Eh

loc_F5A6:				; CODE XREF: ROM:F5A1j
		cmp	a, b
		ble	loc_F5AA
		mov	b, a

loc_F5AA:				; CODE XREF: ROM:F5A7j
		sub	a, #18h
		neg	a
		st	a, unk_10F
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  03h		; jmp F643
		.dw 0F643h

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


doAllInj_2:				; CODE XREF: IV6sub1:loc_F4B5p
		jsr	chk4fuelCut	; returns carry	if fuel	is to be cut
		bra	loc_F5BC
; End of function doAllInj_2


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


doAllinjectors:				; CODE XREF: __RESET+429p sub_CED3+3p	...
		jsr	chk4fuelCut2	; returns carry	if fuel	is to be cut

loc_F5BC:				; CODE XREF: doAllInj_2+3j
		bcs	locret_F62A	; bomb out
		ld	x, #0F558h	; injector masks

loc_F5C1:				; CODE XREF: doAllinjectors+Ej
		bsr	DoInjector2
		inc	x
		cmp	x, #0F55Bh
		ble	loc_F5C1
		bra	locret_F62A	; bomb out
; End of function doAllinjectors


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


DoInjectors:				; CODE XREF: IV6sub1+12Dp IV6sub1+131p ...
		bsr	chk4fuelCut	; returns carry	if fuel	is to be cut
		bcs	locret_F62A	; carry	prevents injection
; End of function DoInjectors


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


DoInjector2:				; CODE XREF: doAllinjectors:loc_F5C1p
		cmp	d, #00013
		bcs	locret_F62A	; prevent injection
		push	d
		clr	a
		ld	b, x + 08h	; get address of compare register to use
		mov	d, y
		di
		ld	a, LDOUT	; Latch	DOUT
		cmpb	a, x + 00h
		bne	loc_F5E8
		pull	d
		push	d
		add	d, word_145	; adc vec4 through table C589
		push	x
		bra	loc_F5F6
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F5E8:				; CODE XREF: DoInjector2+Fj
		ld	d, y + 00h
		sub	d, TIMER	; Timer	MSB (bit11~bit18)
		cmp	a, #0FFh	; checking for overruns	and adding the remainder
		bne	loc_F5F2
		clr	a
		clr	b

loc_F5F2:				; CODE XREF: DoInjector2+1Fj
		push	x
		mov	s, x
		add	d, x + 02h

loc_F5F6:				; CODE XREF: DoInjector2+17j
		bcc	loc_F5FB
		ld	d, #0FFFFh

loc_F5FB:				; CODE XREF: DoInjector2:loc_F5F6j
		push	d
		mov	s, x
		ld	d, sixDeltaNE	; time for 180 deg crank rotation
		cmp	d, #15625
		ble	loc_F608
		ld	d, #15625

loc_F608:				; CODE XREF: DoInjector2+34j
		shl	d
		shl	d		; time for 1 otto cycle
		cmp	d, x + 00h
		bcs	loc_F610
		ld	d, x + 00h

loc_F610:				; CODE XREF: DoInjector2+3Dj
		pull	x
		pull	x		; tidy stack
		add	d, TIMER	; Timer	MSB (bit11~bit18)
		st	d, y + 00h	; write	out pulsewidth
		ld	d, DOUT		; DOUT Data Register
		or	a, x + 00h
		and	b, x + 04h
		st	d, DOUT		; DOUT Data Register
		ld	d, DOUT		; DOUT Data Register
		and	a, x + 04h
		or	b, x + 00h
		st	b, DOM		; DOUT Control Register
		st	a, DOUT		; injector pulsewidth set
		pull	d		; tidy stack
		ei

locret_F62A:				; CODE XREF: doAllinjectors:loc_F5BCj
					; doAllinjectors+10j ...
		ret			; bomb out
; End of function DoInjector2


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; returns carry	if fuel	is to be cut

chk4fuelCut2:				; CODE XREF: doAllinjectorsp
		mov	d, y
		ld	a, #1Ch
		bra	loc_F633
; End of function chk4fuelCut2


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; returns carry	if fuel	is to be cut

chk4fuelCut:				; CODE XREF: sub_D15Ep	doAllInj_2p ...
		mov	d, y
		ld	a, #1Fh

loc_F633:				; CODE XREF: chk4fuelCut2+3j
		and	a, flags_1E7	; any bits fitting mask	1C or 1F can cut fuel (during crank?)
		bne	cutfuel
		tbbs	bit1, flags_4B,	cutfuel
		tbbs	bit6, flags_48,	cutfuel	; bit 0	set under 1200 RPM
		clrc
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  41h ; A		; brn
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

cutfuel:				; CODE XREF: chk4fuelCut+6j
					; chk4fuelCut+8j ...
		setc
		mov	y, d		; restore d
		ret
; End of function chk4fuelCut

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR IV6sub1

loc_F643:				; CODE XREF: IV6sub1+104j
					; IV6sub1:loc_F555j
		jsr	sub_D15E
		cmp	#0FFh, motorPhase ; writ in IV6	(4ms periodic)
		beq	loc_F64F
		clr	count_D0
		clrb	bit5, flags_4C

loc_F64F:				; CODE XREF: IV6sub1+2DDj
		ld	a, motorPhase	; writ in IV6 (4ms periodic)
		and	a, #17h
		cmp	a, #01h
		bne	loc_F659
		clrb	bit6, flags_41

loc_F659:				; CODE XREF: IV6sub1+2E9j
		and	a, #07h
		bne	loc_F65F
		clrb	bit7, flags_41

loc_F65F:				; CODE XREF: IV6sub1+2EFj
		ld	b, motorPhase	; writ in IV6 (4ms periodic)
		and	b, #07h
		beq	loc_F668
		jmp	locret_F75E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F668:				; CODE XREF: IV6sub1+2F7j
		ld	a, unk_EC
		bmi	loc_F66E
		inc	unk_EC

loc_F66E:				; CODE XREF: IV6sub1+2FEj
		ld	y, #0C883h
		tbbc	bit7, flags_43,	loc_F677
		ld	y, #0C88Ah

loc_F677:				; CODE XREF: IV6sub1+305j
		jsr	TwoD_lilRPM
		clr	b
		cmp	a, word_12C
		bcs	loc_F684
		clrb	bit4, flags_42
		bra	loc_F6A0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F684:				; CODE XREF: IV6sub1+312j
		inc	b
		setb	bit4, flags_42
		ld	x, #0C89Fh

loc_F68A:				; CODE XREF: IV6sub1+328j
		ld	a, x + 00h
		cmp	a, RPM		; probably standard toyota format: 50's and fractions of 50
		bgt	loc_F696
		inc	x
		inc	b
		cmp	b, #05h
		bcs	loc_F68A

loc_F696:				; CODE XREF: IV6sub1+322j
		cmp	b, #02h
		bcs	loc_F6A0
		cmp	b, #04h
		bgt	loc_F6A0
		or	b, #10h

loc_F6A0:				; CODE XREF: IV6sub1+316j IV6sub1+32Cj ...
		cmp	b, unk_EE
		beq	loc_F6DE
		xch	b, unk_EE
		mov	b, a
		sub	a, #12h
		bcs	loc_F6DC
		ld	y, #00EFh
		add	y, a
		ld	a, y + 00h
		inc	a
		beq	loc_F6B6
		st	a, y + 00h

loc_F6B6:				; CODE XREF: IV6sub1+346j
		cmp	#0D1h, THW	; set in adc vec 3, not	of bits	read from adc, probably	THW
		bcs	loc_F6DC
		sub	b, #12h
		ld	y, #0305h
		add	y, b
		ld	a, count_B6
		add	a, #0FAh
		rorc	a
		st	a, unk_6A
		ld	a, y + 00h
		mul	a, #0FAh
		push	d
		ld	a, count_B6
		mul	a, unk_1A7
		mov	s, x
		add	d, x + 00h
		rorc	a
		rorc	b
		div	d, unk_6A
		st	b, y + 00h
		pull	x

loc_F6DC:				; CODE XREF: IV6sub1+33Dj IV6sub1+34Dj
		clr	count_B6

loc_F6DE:				; CODE XREF: IV6sub1+336j
		ld	b, unk_EE
		cmp	b, #01h
		bcc	loc_F6EC
		clrb	bit7, flags_46
		clr	count_B5
		clr	a
		jmp	loc_F75B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F6EC:				; CODE XREF: IV6sub1+376j
		ld	y, #0305h
		and	b, #0Fh
		sub	b, #02h
		bcc	loc_F6F8
		clr	b
		bra	loc_F6FD
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F6F8:				; CODE XREF: IV6sub1+387j
		cmp	b, #03h
		bcs	loc_F6FD
		dec	b

loc_F6FD:				; CODE XREF: IV6sub1+38Aj IV6sub1+38Ej
		add	y, b
		ld	a, y + 00h
		cmp	#05h, byte_E5	; average of e3, e4
		ble	loc_F70A
		sub	a, #11h
		bcc	loc_F70A
		clr	a

loc_F70A:				; CODE XREF: IV6sub1+397j IV6sub1+39Bj
		tbs	bit7, flags_46
		beq	loc_F711
		ld	a, unk_1A7

loc_F711:				; CODE XREF: IV6sub1+3A0j
		tbbc	bit4, flags_4B,	loc_F718
		clr	count_B5
		bra	loc_F758
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F718:				; CODE XREF: IV6sub1:loc_F711j
		ld	b, flags_1F6	; another flags_4f copy
		cmpb	b, #01h
		bne	loc_F72A
		ld	a, y + 00h
		tbbc	bit2, flags_40,	loc_F725 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clr	a

loc_F725:				; CODE XREF: IV6sub1+3B5j
		shr	a
		clr	count_B5
		bra	loc_F753
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F72A:				; CODE XREF: IV6sub1+3B1j
		ld	b, unk_1A6
		and	b, #03h
		beq	loc_F745
		dec	b
		ld	y, #0C891h
		add	y, b
		ld	b, y + 00h
		cmp	#04h, unk_EC
		bcc	loc_F73E
		nop

loc_F73E:				; CODE XREF: IV6sub1+3CFj
		clr	unk_EC
		add	a, b
		bcc	loc_F753
		bra	loc_F758
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F745:				; CODE XREF: IV6sub1+3C3j
		cmp	#3Dh, count_B5
		bcs	loc_F753
		clr	count_B5
		sub	a, #08h
		bgt	loc_F753
		clr	a
		bra	loc_F75B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F753:				; CODE XREF: IV6sub1+3BCj IV6sub1+3D5j ...
		cmp	a, unk_1A8
		bcs	loc_F75B

loc_F758:				; CODE XREF: IV6sub1+3AAj IV6sub1+3D7j
		ld	a, unk_1A8

loc_F75B:				; CODE XREF: IV6sub1+37Dj IV6sub1+3E5j ...
		st	a, unk_1A7

locret_F75E:				; CODE XREF: IV6sub1+4j IV6sub1+2F9j
		ret
; END OF FUNCTION CHUNK	FOR IV6sub1

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; cpr0 interrupt

		; public IV9
IV9:					; DATA XREF: ROM:FFF0o

; FUNCTION CHUNK AT F7D5 SIZE 00000002 BYTES

		clrb	bit0, IRQL
		di
		tbbc	bit0, LDOUT, loc_F7D5 ;	Latch DOUT
		ld	d, IGToffTime	; igt related
		st	d, CPR0		; Timer	comparison #0 MSB
		clrb	bit0, DOUT	; clear	IGt
		sub	d, TIMER	; Timer	MSB (bit11~bit18)
		bmi	loc_F772
		bne	loc_F774

loc_F772:				; CODE XREF: IV9+Fj
		clrb	bit0, DOM

loc_F774:				; CODE XREF: IV9+11j
		clrb	bit1, flags_46
		ei
		jsr	sub_DF72
		tbbs	bit6, PORTAL, loc_F7AD ; Port A	Latch
		ld	a, unk_78
		cmp	a, #01h
		bgt	loc_F785
		clr	count_AE

loc_F785:				; CODE XREF: IV9+22j
		inc	a
		bne	loc_F789
		dec	a

loc_F789:				; CODE XREF: IV9+27j
		cmp	a, #03h
		bcs	loc_F78F
		setb	bit1, flags_4B

loc_F78F:				; CODE XREF: IV9+2Cj
		tbbc	bit1, PORTA, loc_F79B ;	Port A Data Register
		cmp	#3Fh, count_AF
		bcc	loc_F79B
		clr	count_AE
		bra	loc_F7B3
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F79B:				; CODE XREF: IV9:loc_F78Fj IV9+36j
		cmp	a, #05h
		bcs	loc_F7B5
		tbbc	bit5, RAMST, loc_F7B5 ;	Built-in RAM status
		cmp	#3Fh, count_AE
		bcs	loc_F7B5
		setb	bit0, flags_4C
		setb	bit2, flags_4B
		bra	loc_F7B5
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F7AD:				; CODE XREF: IV9+1Bj
		clrb	bit6, PORTAL
		clrb	bit0, flags_4C
		clrb	bit1, flags_4B

loc_F7B3:				; CODE XREF: IV9+3Aj
		ld	a, #01h

loc_F7B5:				; CODE XREF: IV9+3Ej IV9+40j ...
		st	a, unk_78
		bra	loc_F7D5
; End of function IV9


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F7B9:				; CODE XREF: IV6-C2p
		tbbc	bit1, PORTA, loc_F7C3 ;	Port A Data Register
		tbs	bit0, flags_47
		bne	locret_F7C5
		clr	count_B0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F7C3:				; CODE XREF: sub_F7B9j
		clrb	bit0, flags_47

locret_F7C5:				; CODE XREF: sub_F7B9+5j
		ret
; End of function sub_F7B9


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F7C6:				; CODE XREF: ROM:E15Ap
		tbbs	bit2, flags_4B,	loc_F7CB
		clr	count_D3

loc_F7CB:				; CODE XREF: sub_F7C6j
		and	b, #0FEh
		cmp	#2Eh, count_D3
		ble	locret_F7D4
		or	b, #01h

locret_F7D4:				; CODE XREF: sub_F7C6+Aj
		ret
; End of function sub_F7C6

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR IV9

loc_F7D5:				; CODE XREF: IV9+3j IV9+58j
		ei
		reti
; END OF FUNCTION CHUNK	FOR IV9

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


		; public IVc
IVc:					; DATA XREF: ROM:FFF6o

; FUNCTION CHUNK AT F8FE SIZE 00000025 BYTES

		clrb	bit4, IRQL
		push	x
		push	y
		ld	a, TIMER	; Timer	MSB (bit11~bit18)
		shr	a
		bcs	loc_F80A
		shr	a
		bcs	loc_F80D
		shr	a
		bcs	loc_F804
		shr	a
		bcs	loc_F7FE
		shr	a
		bcs	loc_F7FA
		shr	a
		bcs	loc_F7F6
		shr	a
		bcc	loc_F80A
		clrb	bit5, flags_41
		bra	loc_F80A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F7F6:				; CODE XREF: IVc+16j
		clrb	bit4, flags_41
		bra	loc_F80A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F7FA:				; CODE XREF: IVc+13j
		clrb	bit3, flags_41
		bra	loc_F80A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F7FE:				; CODE XREF: IVc+10j
		clrb	bit2, flags_41
		clrb	bit7, flags_44
		bra	loc_F80A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F804:				; CODE XREF: IVc+Dj
		tbbc	bit7, flags_4A,	loc_F80A
		jsr	sub_E548

loc_F80A:				; CODE XREF: IVc+7j IVc+19j ...
		jmp	loc_F905
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F80D:				; CODE XREF: IVc+Aj
		tbbs	bit4, PORTAL, loc_F81B ; Port A	Latch
		setb	bit3, flags_43
		ld	x, unk_100
		inc	x
		beq	loc_F81B
		st	x, unk_100

loc_F81B:				; CODE XREF: IVc:loc_F80Dj IVc+3Fj
		tbbs	bit7, PORTAL, loc_F829 ; Port A	Latch
		setb	bit4, flags_43
		ld	x, unk_102
		inc	x
		beq	loc_F829
		st	x, unk_102

loc_F829:				; CODE XREF: IVc:loc_F81Bj IVc+4Dj
		tbbc	bit4, PORTAL, loc_F838 ; Port A	Latch
		tbbc	bit7, PORTAL, loc_F838 ; Port A	Latch
		ld	a, unk_FC
		inc	a
		beq	loc_F843
		st	a, unk_FC
		bra	loc_F843
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F838:				; CODE XREF: IVc:loc_F829j IVc+55j
		clr	unk_FC
		setb	bit5, flags_43
		ld	a, unk_FD
		inc	a
		beq	loc_F843
		st	a, unk_FD

loc_F843:				; CODE XREF: IVc+5Bj IVc+5Fj ...
		clrb	bit4, PORTAL
		clrb	bit7, PORTAL
		jmp	loc_F8FE
; End of function IVc


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F84A:				; CODE XREF: IV6-CAp
		ld	d, word_F6
		cmp	d, #039Ah
		bgt	loc_F894
		cmp	d, #0066h
		bcs	loc_F894
		cmp	#80h, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		bcs	loc_F894
		tbs	bit0, flags_43
		beq	loc_F896
		cmp	#7Ah, unk_FC
		bcs	loc_F871
		clrb	bit2, flags_43
		clrb	bit5, flags_43
		clrb	bit3, flags_43
		clrb	bit4, flags_43
		tbbs	bit7, flags_40,	loc_F871 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit4, flags_4C

loc_F871:				; CODE XREF: sub_F84A+18j sub_F84A+22j
		tbbc	bit5, flags_43,	loc_F88E
		cmp	#0Ch, count_A8
		bcs	loc_F892
		clrb	bit5, flags_43
		cmp	#0Ah, unk_FD
		bcs	loc_F88E
		setb	bit2, flags_43
		tbbc	bit7, flags_40,	loc_F88E ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0Fh, count_B7
		bcs	loc_F88E
		setb	bit4, flags_4C
		setb	bit3, flags_4E

loc_F88E:				; CODE XREF: sub_F84A:loc_F871j
					; sub_F84A+34j	...
		clr	count_A8
		clr	unk_FD

loc_F892:				; CODE XREF: sub_F84A+2Dj
		bra	loc_F89E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F894:				; CODE XREF: sub_F84A+5j sub_F84A+Aj ...
		clrb	bit0, flags_43

loc_F896:				; CODE XREF: sub_F84A+13j
		clrb	bit5, flags_43
		clr	count_A8
		clr	unk_FD
		clr	unk_FC

loc_F89E:				; CODE XREF: sub_F84A:loc_F892j
		ld	d, word_F6
		cmp	d, #039Ah
		bgt	loc_F8B5
		cmp	d, #0066h
		bcs	loc_F8B5
		cmp	#80h, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		bcs	loc_F8B5
		tbs	bit1, flags_43
		beq	loc_F8B7
		bra	loc_F8BB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F8B5:				; CODE XREF: sub_F84A+59j sub_F84A+5Ej ...
		clrb	bit1, flags_43

loc_F8B7:				; CODE XREF: sub_F84A+67j
		clrb	bit3, flags_43
		clrb	bit4, flags_43

loc_F8BB:				; CODE XREF: sub_F84A+69j
		tbbs	bit5, flags_40,	loc_F8D3 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit7, flags_40,	loc_F8D3 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit3, flags_43,	loc_F8D3
		cmp	#99h, count_D6
		bcs	loc_F8DC
		ld	d, unk_100
		cmp	d, #07D0h
		bcs	loc_F8D3
		setb	bit4, flags_4C

loc_F8D3:				; CODE XREF: sub_F84A:loc_F8BBj
					; sub_F84A+74j	...
		clrb	bit3, flags_43
		clr	a
		clr	b
		st	d, unk_100
		clr	count_D6

loc_F8DC:				; CODE XREF: sub_F84A+7Dj
		tbbs	bit5, flags_40,	loc_F8F4 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit7, flags_40,	loc_F8F4 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbc	bit4, flags_43,	loc_F8F4
		cmp	#99h, count_D7
		bcs	locret_F8FD
		ld	d, unk_102
		cmp	d, #07D0h
		bcs	loc_F8F4
		setb	bit4, flags_4C

loc_F8F4:				; CODE XREF: sub_F84A:loc_F8DCj
					; sub_F84A+95j	...
		clrb	bit4, flags_43
		clr	a
		clr	b
		st	d, unk_102
		clr	count_D7

locret_F8FD:				; CODE XREF: sub_F84A+9Ej
		ret
; End of function sub_F84A

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR IVc

loc_F8FE:				; CODE XREF: IVc+70j
		jsr	sub_E92E
		clrb	bit2, flags_42
		setb	bit1, IRQLL	; trigger IV6 (IVc call)

loc_F905:				; CODE XREF: IVc:loc_F80Aj
		ld	a, unk_77	; stores timer of an adc request
		add	a, #04h
		cmp	a, TIMER	; Timer	MSB (bit11~bit18)
		bmi	loc_F910
		di
		clrb	bit2, flags_48

loc_F910:				; CODE XREF: IVc+134j
		inc	unk_E8
		tbs	bit2, flags_48	; bit 0	set under 1200 RPM
		beq	loc_F919
		ei
		bra	loc_F91E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F919:				; CODE XREF: IVc+13Dj
		ei
		jsr	sub_F923
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmp x, three byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F91E:				; CODE XREF: IVc+140j
		clrb	bit3, flags_48
		pull	y
		pull	x
		reti
; END OF FUNCTION CHUNK	FOR IVc

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F923:				; CODE XREF: IVc+143p SIN0sub+11p
		setb	bit2, flags_48
		clrb	bit4, flags_48
		ld	a, #00h
; End of function sub_F923


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F929:				; CODE XREF: SIN0sub:SIN0sub10p
		di
		st	a, unk_112	; last ADC conversion vector
		setb	bit1, SSD
		st	a, SIDR_SODR	; Serial Input/Output Data Register
		ld	a, TIMER	; Timer	MSB (bit11~bit18)
		st	a, unk_77	; stores timer of an adc request
		ei
		ret
; End of function sub_F929


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F937:				; CODE XREF: __RESET:loc_C9EFp
					; __RESET+F0p ...
		clr	a
		ld	b, SMRC_SIR	; Serial Master	Register Control
		cmpb	b, #04h
		bne	loc_F940
		or	a, #01h

loc_F940:				; CODE XREF: sub_F937+5j
		tbbs	bit2, PORTB, loc_F945 ;	Port B Data Register
		or	a, #02h

loc_F945:				; CODE XREF: sub_F937:loc_F940j
		tbbc	bit0, PORTD_ASRIN, loc_F94A ; Port D Data Register / ASR Input Data
		or	a, #04h

loc_F94A:				; CODE XREF: sub_F937:loc_F945j
		tbbc	bit1, PORTD_ASRIN, loc_F94F ; Port D Data Register / ASR Input Data
		or	a, #08h

loc_F94F:				; CODE XREF: sub_F937:loc_F94Aj
		cmpb	b, #08h
		bne	loc_F955
		or	a, #10h

loc_F955:				; CODE XREF: sub_F937+1Aj
		tbbc	bit1, PORTA, loc_F95A ;	Port A Data Register
		or	a, #20h

loc_F95A:				; CODE XREF: sub_F937:loc_F955j
		ld	b, SMRC_SIR	; Serial Master	Register Control
		cmpb	b, #02h
		bne	loc_F962
		or	a, #40h

loc_F962:				; CODE XREF: sub_F937+27j
		ld	x, #0049h
		ld	y, #0140h
		mov	a, b
		xor	a, x + 00h
		and	a, y + 00h
		st	b, y + 00h
		and	b, x + 00h
		add	a, b
		st	a, x + 00h
		ret
; End of function sub_F937

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR IV6

IV6main:				; CODE XREF: IV6+Bj
		bsr	sub_F937
		jsr	sub_F84A
		setb	bit2, flags_46
		jsr	sub_F295
		jsr	sub_F7B9
		jsr	sub_F3F3
		jsr	sub_D97E
		jsr	sub_EF1D
		jsr	IV6sub1
		ld	x, #00A0h
		ld	b, #12h
		jsr	Satcount	; increments B bytes starting at pointer X, bytes increment to FF then saturate
		jsr	sub_D0C6
		jsr	IV6sub1
		inc	unk_FB
		ld	a, unk_FB
		shr	a
		bcc	loc_F9B1
		ld	x, #00B2h
		ld	b, #02h
		jsr	Satcount	; increments B bytes starting at pointer X, bytes increment to FF then saturate
		jsr	sub_DB74
		jsr	sub_DF00

loc_F9B1:				; CODE XREF: IV6-A0j
		jsr	sub_DF13
		cmp	#56h, count_AB
		bcs	loc_F9C1
		clr	count_AB
		jsr	sub_F9DE
		jsr	sub_F9F1

loc_F9C1:				; CODE XREF: IV6-8Aj
		jsr	IV6sub1
		ld	a, TIMER	; Timer	MSB (bit11~bit18)
		cmpb	a, #04h
		bne	loc_F9D8
		cmpb	a, #08h
		bne	loc_F9D6
		and	a, #70h
		cmp	a, #70h
		bne	loc_F9DB
		bra	loc_F9DB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F9D6:				; CODE XREF: IV6-75j
		bra	loc_F9DB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_F9D8:				; CODE XREF: IV6-79j
		jsr	loc_E4F4

loc_F9DB:				; CODE XREF: IV6-6Fj IV6-6Dj ...
		jmp	IV6_reti
; END OF FUNCTION CHUNK	FOR IV6

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F9DE:				; CODE XREF: IV6-86p
		clr	a
		xch	a, byte_E3
		xch	a, byte_E4
		add	a, byte_E4
		bcc	loc_F9E9
		ld	a, #0FFh

loc_F9E9:				; CODE XREF: sub_F9DE+7j
		cmp	a, #03h
		bcc	loc_F9EE
		clr	a

loc_F9EE:				; CODE XREF: sub_F9DE+Dj
		st	a, byte_E5	; average of e3, e4
		ret
; End of function sub_F9DE


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_F9F1:				; CODE XREF: IV6-83p
		ld	d, RPM		; probably standard toyota format: 50's and fractions of 50
		shr	d
		shr	d
		div	d, byte_E5	; average of e3, e4
		bcc	loc_F9FB
		ld	b, #0FFh

loc_F9FB:				; CODE XREF: sub_F9F1+6j
		st	b, unk_197
		ret
; End of function sub_F9F1


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; ASR3 interrupt

		; public IV4
IV4:					; DATA XREF: ROM:FFE6o
		clrb	bit7, IRQLL
		push	x
		div	d, #00h		; the fuck?
		or	a, x + 00h	; and whyyyy?
		tbbs	bit5, TAIT, loc_FA0E ; bounce if ASR3 high
		tbbc	bit7, PORTD_ASRIN, loc_FA13 ; bounce if	ASR3 low
		bra	loc_FA11
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FA0E:				; CODE XREF: IV4+7j
		tbbs	bit7, PORTD_ASRIN, loc_FA13 ; bounce if	ASR3 high

loc_FA11:				; CODE XREF: IV4+Dj
		bra	loc_FA3F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FA13:				; CODE XREF: IV4+Aj IV4:loc_FA0Ej
		tbs	bit5, TAIT	; Timer	ASR Control
		beq	loc_FA19
		clrb	bit5, TAIT

loc_FA19:				; CODE XREF: IV4+16j
		tbbs	bit5, TAIT, loc_FA20 ; Timer ASR Control
		ld	d, unk_34
		bra	loc_FA22
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FA20:				; CODE XREF: IV4:loc_FA19j
		ld	d, ASR3		; ASR3 edge counter value MSB

loc_FA22:				; CODE XREF: IV4+1Fj
		mov	d, x
		cmp	#086, count_B3
		ble	loc_FA2C
		clr	byte_E5		; average of e3, e4
		bra	loc_FA3B
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FA2C:				; CODE XREF: IV4+27j
		sub	d, word_E6	; last ASR3 time
		cmp	d, #00250
		ble	loc_FA3F
		ld	a, byte_E3	; when gap between ASR3	events is larger than 1ms
		inc	a
		cmpz	a
		beq	loc_FA3B
		inc	byte_E3		; when gap between ASR3	events is larger than 1ms

loc_FA3B:				; CODE XREF: IV4+2Bj IV4+38j
		st	x, word_E6	; last ASR3 time
		clr	count_B3

loc_FA3F:				; CODE XREF: IV4:loc_FA11j IV4+32j
		pull	x
		reti
; End of function IV4


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


		; public IV6
IV6:					; DATA XREF: ROM:FFEAo

; FUNCTION CHUNK AT F975 SIZE 00000069 BYTES

		clrb	bit1, IRQLL
		push	x
		push	y
		jsr	IV6sub1
		tbs	bit2, flags_42	; b2 set during	init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		bne	IV6_reti
		jmp	IV6main
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

IV6_reti:				; CODE XREF: IV6:loc_F9DBj IV6+9j
		pull	y
		pull	x
		reti
; End of function IV6


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; sin0 interrupt

		; public IV1
IV1:					; DATA XREF: ROM:FFE0o

; FUNCTION CHUNK AT FB25 SIZE 00000003 BYTES

		clrb	bit3, IRQLL
		push	x
		push	y
		tbbs	bit6, SSD, IV1err ; Serial Status Data Register
		ld	a, SIDR_SODR	; Serial Input/Output Data Register
		setb	bit1, SSD
		ld	#80h, SIDR_SODR	; tx 0x80
		ld	b, #017

IV1Delay:				; CODE XREF: IV1+14j
		tbbs	bit7, SSD, loc_FA6F ; branch if	received byte
		dec	b
		bne	IV1Delay	; branch if received byte

IV1err:					; CODE XREF: IV1+4j IV1+1Fj ...
		ld	a, SIDR_SODR	; Serial Input/Output Data Register
		jsr	SIN0sub		; decides what request to send to ADC, and sends it
		bra	loc_FAA4
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FA6F:				; CODE XREF: IV1:IV1Delayj
		clrb	bit3, IRQLL	; received byte	caused anbother	flag - fix
		tbbs	bit6, SSD, IV1err ; branch if error
		cmp	#18h, count_A6
		bcc	loc_FA84
		tbbc	bit2, flags_46,	loc_FA84
		tbs	bit7, PORTB	; Port B Data Register
		beq	loc_FA82
		clrb	bit7, PORTB

loc_FA82:				; CODE XREF: IV1+2Cj
		clrb	bit2, flags_46

loc_FA84:				; CODE XREF: IV1+25j IV1+27j
		ld	b, SIDR_SODR	; Serial Input/Output Data Register
		and	b, #0C0h
		mov	d, x		; x now	contains the conversion	and the	adcs response to 0x80
		mov	a, b
		ld	a, unk_112	; last ADC conversion vector
		shl	a
		push	d
		jsr	SIN0sub		; decides what request to send to ADC, and sends it
		pull	d
		and	a, #1Eh
		ld	y, #0FAA6h
		add	y, a
		cmp	y, #0FAC4h
		bcc	IV1err
		ld	y, y + 00h
		jsr	y + 00h
		setb	bit1, flags_42

loc_FAA4:				; CODE XREF: IV1+1Bj
		bra	intSIN0ret
; End of function IV1

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.dw 0FD2Bh		; vector 0
		.dw 0FB28h		; vector 1
		.dw 0FE81h		; vector 2
		.dw 0FE3Ah		; vector 3
		.dw 0FEB3h		; vector 4
		.dw 0FED1h		; vector 5
		.dw 0FEE0h		; vector 6
		.dw 0FEEEh		; vector 7
		.dw 0FD2Ah		; null sub
		.dw 0FEFAh		; vector 9
		.dw 0FD2Ah
		.dw 0FD2Ah
		.dw 0FD2Ah
		.dw 0FD2Ah
		.dw 0FD2Ah

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; decides what request to send to ADC, and sends it

SIN0sub:				; CODE XREF: IV1+18p IV1+3Dp
		tbbc	bit1, flags_42,	SIN0subRET ; b2	set during init, cleared in IV6, b3 set	during init, cleared during IVE	(NE interrupt)
		di
		tbs	bit3, flags_48	; bit 0	set under 1200 RPM
		beq	SIN0sub1
		tbs	bit4, flags_48	; bit 0	set under 1200 RPM
		beq	SIN0sub2
		clrb	bit2, flags_48
		bra	SIN0sub9
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

SIN0sub1:				; CODE XREF: SIN0sub+6j
		ei
		jsr	sub_F923
		bra	SIN0subRET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

SIN0sub2:				; CODE XREF: SIN0sub+Aj
		ld	b, unk_E8
		shr	b
		bcs	SIN0sub5
		ld	a, #05h
		tbbc	bit0, flags_40,	SIN0sub3 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		ld	a, #04h

SIN0sub3:				; CODE XREF: SIN0sub+1Dj
		shr	b
		bcc	SIN0sub4
		ld	a, #01h

SIN0sub4:				; CODE XREF: SIN0sub+23j
		bra	SIN0sub10
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

SIN0sub5:				; CODE XREF: SIN0sub+19j
		shr	b
		bcs	SIN0sub6
		jsr	DebugTX
		bra	SIN0subRET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

SIN0sub6:				; CODE XREF: SIN0sub+2Aj
		ld	a, #09h
		shr	b
		bcc	SIN0sub10
		shr	b
		bcs	SIN0sub8
		ld	a, #02h
		shr	b
		bcs	SIN0sub7
		ld	a, #04h
		tbbc	bit0, flags_40,	SIN0sub10 ; b0 - lilRPM	not running flag, b1 - deltaNE based not running flag
		ld	a, #05h

SIN0sub7:				; CODE XREF: SIN0sub+3Cj
		bra	SIN0sub10
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

SIN0sub8:				; CODE XREF: SIN0sub+37j
		ld	a, #03h
		shr	b
		bcc	SIN0sub10
		ld	a, #06h
		shr	b
		bcc	SIN0sub9
		ld	a, #06h
		shr	b
		bcc	SIN0sub10
		ld	a, #07h
		bra	SIN0sub10
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

SIN0sub9:				; CODE XREF: SIN0sub+Ej SIN0sub+4Fj
		bra	SIN0subRET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

SIN0sub10:				; CODE XREF: SIN0sub:SIN0sub4j
					; SIN0sub+34j ...
		jsr	sub_F929

SIN0subRET:				; CODE XREF: SIN0subj SIN0sub+14j ...
		ei
		ret
; End of function SIN0sub

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; START	OF FUNCTION CHUNK FOR IV1

intSIN0ret:				; CODE XREF: IV1:loc_FAA4j
		pull	y
		pull	x
		reti
; END OF FUNCTION CHUNK	FOR IV1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1:
		ld	y, #0C8D7h
		jsr	y + 14h		; C8EB
		ld	b, flags_1A0	; upper	nibble VTA, low	nibble PIM
		bcs	ADCvec1_2	; carry	set when data saturated
		and	b, #11101111b
		tbbs	bit7, flags_40,	ADCvec1_1 ; b0 - lilRPM	not running flag, b1 - deltaNE based not running flag
		clrb	bit0, flags_4D

ADCvec1_1:				; CODE XREF: ROM:FB34j
		cmpb	b, #00100000b
		beq	ADCvec1_7
		push	b
		mov	x, d
		mov	a, b
		ld	y, #0C8D9h
		jsr	y + 12h		; C8EB
		pull	b
		bcs	ADCvec1_6	; carry	set when data was saturated
		ld	a, unk_1A3
		inc	a
		st	a, unk_1A3
		cmp	a, #002
		bcs	ADCvec1_7
		and	b, #11011111b
		bra	ADCvec1_7
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_2:				; CODE XREF: ROM:FB30j
		cmpb	b, #00010000b
		bne	ADCvec1_3
		or	b, #00010000b
		clr	count_C7

ADCvec1_3:				; CODE XREF: ROM:FB59j
		tbbs	bit7, flags_40,	ADCvec1_4 ; b0 - lilRPM	not running flag, b1 - deltaNE based not running flag
		cmp	#015, count_C7
		bcs	ADCvec1_5
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_4:				; CODE XREF: ROM:ADCvec1_3j
		setb	bit3, flags_4E
		setb	bit0, flags_4D

ADCvec1_5:				; CODE XREF: ROM:FB65j
		or	b, #00100000b
		jsr	sub_FC60	; play with magic memories in 300~307 and 80 to	9f

ADCvec1_6:				; CODE XREF: ROM:FB46j
		clr	a
		st	a, unk_1A3

ADCvec1_7:				; CODE XREF: ROM:FB3Bj	ROM:FB51j ...
		st	b, flags_1A0	; upper	nibble VTA, low	nibble PIM
		tbbs	bit6, flags_47,	ADCvec1_8
		clr	count_C8

ADCvec1_8:				; CODE XREF: ROM:FB78j
		cmp	#0Fh, byte_E5	; average of e3, e4
		bcs	ADCvec1_9
		setb	bit1, flags_48

ADCvec1_9:				; CODE XREF: ROM:FB80j
		ld	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		cmpb	a, #20h
		beq	ADCvec1_10
		ld	d, #0000h
		st	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		jmp	ADCvec1_27
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_10:				; CODE XREF: ROM:FB89j
		cmp	#00h, byte_E5	; average of e3, e4
		bgt	ADCvec1_12
		ld	a, unk_155
		add	a, #0Eh
		bcs	ADCvec1_11
		cmp	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		ble	ADCvec1_12

ADCvec1_11:				; CODE XREF: ROM:FB9Dj
		cmp	#0Fh, count_B7
		bcs	ADCvec1_12
		ld	a, unk_301
		and	a, #0FEh
		st	a, unk_301

ADCvec1_12:				; CODE XREF: ROM:FB96j	ROM:FBA1j ...
		ld	a, #0B4h
		mov	a, b
		tbbs	bit5, flags_40,	ADCvec1_22 ; b0	- lilRPM not running flag, b1 -	deltaNE	based not running flag
		tbbs	bit0, flags_42,	ADCvec1_13 ; b2	set during init, cleared in IV6, b3 set	during init, cleared during IVE	(NE interrupt)
		jmp	ADCvec1_24
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_13:				; CODE XREF: ROM:FBB6j
		cmp	#00h, byte_E5	; average of e3, e4
		bgt	ADCvec1_14
		tbbc	bit1, flags_48,	ADCvec1_14 ; bit 0 set under 1200 RPM
		ld	a, word_9A
		bmi	ADCvec1_14
		ld	a, unk_301
		cmpb	a, #01h
		bne	ADCvec1_14
		tbbs	bit3, flags_45,	ADCvec1_14
		and	a, #0FDh
		st	a, unk_301

ADCvec1_14:				; CODE XREF: ROM:FBBFj	ROM:FBC1j ...
		mov	x, d
		shl	d
		bcs	ADCvec1_15
		shl	d
		bcc	ADCvec1_16

ADCvec1_15:				; CODE XREF: ROM:FBD9j
		ld	a, #0FFh

ADCvec1_16:				; CODE XREF: ROM:FBDCj
		ld	b, word_94
		cmp	a, b
		ble	ADCvec1_20
		cmp	#00h, byte_E5	; average of e3, e4
		bgt	ADCvec1_20
		tbbs	bit3, flags_45,	ADCvec1_20
		cmp	#0FCh, count_C8
		bcs	ADCvec1_17
		inc	b
		ld	#02h, count_C8

ADCvec1_17:				; CODE XREF: ROM:FBF0j
		tbbc	bit1, flags_48,	ADCvec1_19 ; bit 0 set under 1200 RPM
		tbbs	bit7, flags_48,	ADCvec1_19 ; bit 0 set under 1200 RPM
		ld	a, unk_155
		add	a, #1Eh
		bcs	ADCvec1_18
		cmp	a, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		ble	ADCvec1_19

ADCvec1_18:				; CODE XREF: ROM:FC01j
		add	b, #04h

ADCvec1_19:				; CODE XREF: ROM:ADCvec1_17j ROM:FBF9j ...
		clrb	bit7, flags_48
		clrb	bit1, flags_48
		bra	ADCvec1_22
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_20:				; CODE XREF: ROM:FBE3j	ROM:FBE8j ...
		sub	a, word_94
		bcc	ADCvec1_22
		neg	a
		cmp	a, #01h
		ble	ADCvec1_22
		cmp	a, #8Ch
		bcc	ADCvec1_22
		cmp	#02h, count_C8
		bcc	ADCvec1_21
		ld	a, unk_301
		cmpb	a, #01h
		beq	ADCvec1_22

ADCvec1_21:				; CODE XREF: ROM:FC1Fj
		tbs	bit4, flags_44
		beq	ADCvec1_23
		dec	b
		bra	ADCvec1_23
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_22:				; CODE XREF: ROM:FBB3j	ROM:FC0Dj ...
		clrb	bit4, flags_44

ADCvec1_23:				; CODE XREF: ROM:FC2Aj	ROM:FC2Dj
		ld	y, #0C8DBh
		jsr	y + 10h		; C8EB
		xch	x, y
		ld	x, #0094h
		jsr	sub_D2A3	; play swith magic memory specified by x
		xch	x, y

ADCvec1_24:				; CODE XREF: ROM:FBB9j
		clr	b
		shr	d
		shr	d
		push	d
		mov	x, d
		mov	s, x
		sub	d, x + 00h
		bcc	ADCvec1_25	; finally trash	x
		clr	a
		clr	b

ADCvec1_25:				; CODE XREF: ROM:FC46j
		ld	x, VTA		; finally trash	x
		st	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		pull	y
		ld	b, #75h
		tbbs	bit3, flags_40,	ADCvec1_26 ; b0	- lilRPM not running flag, b1 -	deltaNE	based not running flag
		ld	b, #7Bh

ADCvec1_26:				; CODE XREF: ROM:FC51j
		cmp	a, b
		bcs	ADCvec1_27
		setb	bit3, flags_40
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	a 3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_27:				; CODE XREF: ROM:FB90j	ROM:FC57j
		clrb	bit3, flags_40
		bra	ADCvec1_28

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

; play with magic memories in 300~307 and 80 to	9f

sub_FC60:				; CODE XREF: sub_CAC1+46p ROM:FB6Ep
		ld	y, #0B44Bh
		st	y, word_94
		di
		ld	a, unk_301
		or	a, #03h
		st	a, unk_301
		ei
		ret
; End of function sub_FC60

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_28:				; CODE XREF: ROM:FC5Ej
		clr	b
		tbbc	bit7, flags_47,	ADCvec1_29
		dec	b

ADCvec1_29:				; CODE XREF: ROM:FC71j
		ld	y, VTA		; writ in adc vec 1, probably VTA (TPS)
		cmp	y, #00FCh
		bcc	ADCvec1_30
		setb	bit7, flags_47
		cmpz	b
		beq	ADCvec1_31
		setb	bit7, flags_48
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	three byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_30:				; CODE XREF: ROM:FC7Aj
		clrb	bit7, flags_47

ADCvec1_31:				; CODE XREF: ROM:FC7Fj
		ld	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		cmpb	a, #20h
		bne	ADCvec1_32
		cmpz	b
		beq	ADCvec1_32
		tbbc	bit7, flags_47,	ADCvec1_32
		ld	a, unk_301
		cmpb	a, #01h
		beq	ADCvec1_33

ADCvec1_32:				; CODE XREF: ROM:FC8Bj	ROM:FC8Ej ...
		clrb	bit6, flags_47
		clr	count_A4
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_33:				; CODE XREF: ROM:FC98j
		setb	bit6, flags_47
		ld	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		cmpb	a, #20h
		beq	ADCvec1_34
		clr	a
		st	a, unk_5A	; VTA flags I bet
		clrb	bit4, flags_46
		setb	bit3, flags_46
		bra	ADCvec1_45
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_34:				; CODE XREF: ROM:FCA6j
		ld	d, VTA		; writ in adc vec 1, probably VTA (TPS)
		push	x
		mov	s, x
		sub	d, x + 00h
		pull	x
		bcc	ADCvec1_37
		neg	a
		neg	b
		subc	a, #00h
		cmp	d, #3D71h
		bcs	ADCvec1_35
		setb	bit3, flags_46

ADCvec1_35:				; CODE XREF: ROM:FCC1j
		cmpb	a, #0E0h
		bne	ADCvec1_36
		shl	d
		shl	d
		neg	a
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_36:				; CODE XREF: ROM:FCC7j
		ld	a, #80h
		bra	ADCvec1_39
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_37:				; CODE XREF: ROM:FCB8j
		cmpb	a, #0E0h
		bne	ADCvec1_38
		shl	d
		shl	d
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_38:				; CODE XREF: ROM:FCD3j
		ld	a, #7Fh

ADCvec1_39:				; CODE XREF: ROM:FCCFj
		ld	b, unk_126
		bpz	ADCvec1_40
		neg	b

ADCvec1_40:				; CODE XREF: ROM:FCDDj
		cmp	b, #01h
		bcc	ADCvec1_41
		clrb	bit3, flags_46

ADCvec1_41:				; CODE XREF: ROM:FCE2j
		ld	b, unk_5A	; VTA flags I bet
		st	a, unk_5A	; VTA flags I bet
		tbbs	bit2, flags_40,	ADCvec1_44 ; b0	- lilRPM not running flag, b1 -	deltaNE	based not running flag
		add	a, b
		bvs	ADCvec1_43
		cmpz	a
		beq	ADCvec1_44
		bpz	ADCvec1_42
		neg	a

ADCvec1_42:				; CODE XREF: ROM:FCF3j
		cmp	a, #002
		bcs	ADCvec1_45

ADCvec1_43:				; CODE XREF: ROM:FCEEj
		setb	bit4, flags_46
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_44:				; CODE XREF: ROM:FCEAj	ROM:FCF1j
		clrb	bit4, flags_46

ADCvec1_45:				; CODE XREF: ROM:FCAFj	ROM:FCF8j
		ld	a, unk_5A	; VTA flags I bet
		bpz	ADCvec1_46
		clrb	bit2, flags_47
		bra	ADCvec1_RET
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec1_46:				; CODE XREF: ROM:FD01j
		cmp	a, #0Ah
		bcs	ADCvec1_RET
		cmp	#8Ch, lilRPM	; 0 to 6400 rpm	as fraction, 25	RPM per	bit
		bcc	ADCvec1_RET
		cmp	#0Ah, VTA	; writ in adc vec 1, probably VTA (TPS)
		bcs	ADCvec1_RET
		tbbs	bit0, flags_40,	ADCvec1_RET ; b0 - lilRPM not running flag, b1 - deltaNE based not running flag
		tbbs	bit2, flags_47,	ADCvec1_RET
		ld	y, #0C605h
		jsr	TwoD_THW
		setb	bit2, flags_47
		jsr	divDby32
		jsr	doAllinjectors

ADCvec1_RET:				; CODE XREF: ROM:FD05j	ROM:FD09j ...
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCnoProc:
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec0:
		ld	y, #0C8E1h
		jsr	y + 0Ah		; C8EB - saturates data	to one value or	another, only used return was carry bit?
		ld	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		bcc	PIM_ok		; branch if data was not saturated (should be normal program path)
		tbbc	bit7, flags_40,	loc_FD3C ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		setb	bit3, flags_4C	; flag PIM bad?
		setb	bit3, flags_4E	; flag PIM bad?

loc_FD3C:				; CODE XREF: ROM:FD35j
		cmpb	a, #00000001b
		bne	loc_FD46
		or	a, #01h
		clr	count_C7
		bra	loc_FD4F
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FD46:				; CODE XREF: ROM:FD3Ej
		cmp	#0Fh, count_C7
		bcs	loc_FD4D
		setb	bit3, flags_4C

loc_FD4D:				; CODE XREF: ROM:FD49j
		setb	bit3, flags_4B

loc_FD4F:				; CODE XREF: ROM:FD44j
		ld	x, #6666h
		bra	loc_FD5D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

PIM_ok:					; CODE XREF: ROM:FD33j
		and	a, #0FEh
		tbbs	bit7, flags_40,	loc_FD5B ; unflag PIM?
		clrb	bit3, flags_4C	; unflag PIM?

loc_FD5B:				; CODE XREF: ROM:FD56j
		clrb	bit3, flags_4B	; unflag PIM?

loc_FD5D:				; CODE XREF: ROM:FD52j
		st	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		mov	x, d
		sub	d, #1EC0h
		bcc	loc_FD68
		clr	a
		clr	b

loc_FD68:				; CODE XREF: ROM:FD64j
		tbbs	bit5, flags_40,	loc_FDBB ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		tbbs	bit0, flags_44,	loc_FD7F
		cmp	#012, TIMER	; Timer	MSB (bit11~bit18)
		bcs	loc_FDBB
		setb	bit0, flags_44
		st	a, unk_12B
		tbbc	bit5, flags_49,	loc_FDBB ; no bits set or cleared overtly

loc_FD7B:				; CODE XREF: ROM:FD95j
		setb	bit1, flags_44
		bra	loc_FDBB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FD7F:				; CODE XREF: ROM:FD6Bj
		sub	d, PIM		; adc vector 0,	probably PIM (map signal)
		rorc	a
		rorc	b
		jsr	shrDx2
		add	d, PIM		; adc vector 0,	probably PIM (map signal)
		mov	d, y
		tbbs	bit1, flags_44,	loc_FDA3
		sub	a, unk_12B
		bcc	loc_FD92
		neg	a

loc_FD92:				; CODE XREF: ROM:FD8Fj
		cmp	a, #01h
		mov	y, d
		bgt	loc_FD7B
		tbbc	bit5, flags_49,	loc_FDA3 ; no bits set or cleared overtly
		setb	bit1, flags_44
		cmp	#0FFh, count_B2
		bcs	loc_FDA3
		setb	bit6, flags_45

loc_FDA3:				; CODE XREF: ROM:FD89j	ROM:FD97j ...
		tbbc	bit6, flags_45,	loc_FDBB
		tbbc	bit5, RAMST, loc_FDBB ;	Built-in RAM status
		push	d
		ld	b, unk_12B
		ld	y, #0C8C7h
		jsr	y + 24h		; C8EB
		ld	x, #0096h
		jsr	sub_D2A3	; play swith magic memory specified by x
		clrb	bit6, flags_45
		pull	d

loc_FDBB:				; CODE XREF: ROM:loc_FD68j ROM:FD71j ...
		st	d, PIM		; adc vector 0,	probably PIM (map signal)
		jmp	locret_FE39	; so dumb! why not RET?

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_FDC0:				; CODE XREF: __RESET+1B3Ep
		ld	b, #9Ch
		tbbs	bit5, flags_40,	loc_FE07 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#128, lilRPM	; 3200 RPM
		bcc	locret_FE19
		cmp	#024, lilRPM	; 600 RPM
		bcs	locret_FE19
		cmp	#0Ah, byte_E5	; average of e3, e4
		bcs	locret_FE19
		ld	a, unk_126
		bpz	loc_FDDA
		neg	a

loc_FDDA:				; CODE XREF: sub_FDC0+17j
		cmp	a, #01h
		bgt	locret_FE19
		ld	b, word_96
		ld	a, unk_125
		cmp	a, #8Fh
		bcs	loc_FE01
		clrb	bit1, flags_45
		ld	a, unk_122
		ld	b, PIM		; adc vector 0,	probably PIM (map signal)
		cmp	a, b
		bcc	loc_FDF4
		setb	bit1, flags_45
		xch	a, b

loc_FDF4:				; CODE XREF: sub_FDC0+2Fj
		sub	a, b
		ld	b, word_96
		cmp	a, #01h
		bcs	loc_FE01
		tbbc	bit1, flags_45,	loc_FE00
		inc	b
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  41h ; A		; brn, 2 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FE00:				; CODE XREF: sub_FDC0+3Bj
		dec	b

loc_FE01:				; CODE XREF: sub_FDC0+25j sub_FDC0+39j
		ld	a, PIM		; adc vector 0,	probably PIM (map signal)
		cmp	a, b
		ble	loc_FE07
		mov	a, b

loc_FE07:				; CODE XREF: sub_FDC0+2j sub_FDC0+44j
		cmp	b, word_96
		beq	locret_FE19
		ld	y, #0C8C7h
		jsr	y + 24h
		ld	x, #0096h
		jsr	sub_D2A3	; play swith magic memory specified by x
		st	a, unk_12B

locret_FE19:				; CODE XREF: sub_FDC0+8j sub_FDC0+Dj ...
		ret
; End of function sub_FDC0


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


sub_FE1A:				; CODE XREF: __RESET+36Fp
		ld	b, word_96
		ld	y, #0C8C7h
		jsr	y + 24h		; C8EB - saturation
		bcc	loc_FE26
		jsr	sub_CAC1

loc_FE26:				; CODE XREF: sub_FE1A+7j
		ld	a, word_96
		tbbs	bit0, flags_42,	loc_FE2D ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		ld	a, #80h

loc_FE2D:				; CODE XREF: sub_FE1A+Ej
		clr	b
		shr	d
		div	d, #156
		bcc	loc_FE35
		ld	b, #0FFh

loc_FE35:				; CODE XREF: sub_FE1A+17j
		st	b, byte_130
		ret
; End of function sub_FE1A

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

locret_FE39:				; CODE XREF: ROM:FDBDj
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec3:
		ld	y, #0C8DDh
		jsr	y + 0Eh		; C8EB
		ld	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		bcc	loc_FE5E
		cmpb	a, #04h
		bne	loc_FE4C
		or	a, #04h
		clr	count_C7

loc_FE4C:				; CODE XREF: ROM:FE46j
		tbbs	bit7, flags_40,	loc_FE55 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0Fh, count_C7
		bcs	loc_FE59	; trashes x and	all the	stored data in it
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	three byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FE55:				; CODE XREF: ROM:loc_FE4Cj
		setb	bit3, flags_4E
		setb	bit1, flags_4C

loc_FE59:				; CODE XREF: ROM:FE52j
		ld	x, #1BFFh	; trashes x and	all the	stored data in it
		bra	loc_FE65
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FE5E:				; CODE XREF: ROM:FE42j
		tbbs	bit7, flags_40,	loc_FE63 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit1, flags_4C

loc_FE63:				; CODE XREF: ROM:loc_FE5Ej
		and	a, #0FBh

loc_FE65:				; CODE XREF: ROM:FE5Cj
		st	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		mov	x, d
		xor	a, #0FFh	; negate bits
		xor	b, #0FFh
		and	b, #0C0h
		st	d, THW		; set in adc vec 3, not	of bits	read from adc, probably	THW
		tbbc	bit1, flags_42,	loc_FE77 ; b2 set during init, cleared in IV6, b3 set during init, cleared during IVE (NE interrupt)
		tbbs	bit0, flags_40,	locret_FE80 ; b0 - lilRPM not running flag, b1 - deltaNE based not running flag

loc_FE77:				; CODE XREF: ROM:FE71j
		cmp	a, #0C4h
		bcs	loc_FE7E
		setb	bit6, flags_4A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FE7E:				; CODE XREF: ROM:FE79j
		clrb	bit6, flags_4A

locret_FE80:				; CODE XREF: ROM:FE74j
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec2:
		ld	y, #0C8DFh
		jsr	y + 0Ch		; C8EB
		ld	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		bcc	loc_FEA4
		cmpb	a, #08h
		bne	loc_FE93
		or	a, #08h
		clr	count_C7

loc_FE93:				; CODE XREF: ROM:FE8Dj
		tbbs	bit7, flags_40,	loc_FE9C ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		cmp	#0Fh, count_C7
		bcs	loc_FEA0
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FE9C:				; CODE XREF: ROM:loc_FE93j
		setb	bit3, flags_4E
		setb	bit2, flags_4C

loc_FEA0:				; CODE XREF: ROM:FE99j
		ld	b, #79h
		bra	loc_FEAB
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FEA4:				; CODE XREF: ROM:FE89j
		tbbs	bit7, flags_40,	loc_FEA9 ; b0 -	lilRPM not running flag, b1 - deltaNE based not	running	flag
		clrb	bit2, flags_4C

loc_FEA9:				; CODE XREF: ROM:loc_FEA4j
		and	a, #0F7h

loc_FEAB:				; CODE XREF: ROM:FEA2j
		st	a, flags_1A0	; upper	nibble VTA, low	nibble PIM
		xor	b, #0FFh
		st	b, THA		; adc vector 2,	negation of bits, probably THA
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec4:				; Built-in RAM status
		tbbc	bit5, RAMST, loc_FEC0
		cmp	b, #083		; 1.6V (6.48V battery voltage)
		bcs	loc_FEC0
		tbs	bit5, flags_46
		beq	loc_FEC0
		setb	bit2, DOUT

loc_FEC0:				; CODE XREF: ROM:ADCvec4j ROM:FEB8j ...
		st	b, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		ld	b, BVolts	; ADC Vector 4 - B= terminal voltage divided by	4 (use 20*BVolts/256)
		ld	y, #0C589h
		jsr	other2D_a
		jsr	divDby64
		st	d, word_145	; adc vec4 through table C589
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec5:
		mov	x, d
		shl	d
		bcs	loc_FED8	; carry	wouldve	been set if converted value was	>2.5V
		shl	d
		bcc	loc_FEDA	; carry	is clear if converted value was	<1.25V

loc_FED8:				; CODE XREF: ROM:FED3j
		ld	a, #0FFh

loc_FEDA:				; CODE XREF: ROM:FED6j
		st	a, OX		; adc vector 5 multiplied by 4 (ie voltage is 1.25*count/256), probably	OX (oxygen sensor)
		jsr	sub_D129
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec6:
		shr	b
		shr	b
		shr	b
		shr	b
		ld	a, unk_113	; msN: adc vector 7 | lsN: adc vector 6
		and	a, #0F0h
		add	a, b
		st	a, unk_113	; msN: adc vector 7 | lsN: adc vector 6
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec7:
		and	b, #0F0h
		ld	a, unk_113	; msN: adc vector 7 | lsN: adc vector 6
		and	a, #0Fh
		add	a, b
		st	a, unk_113	; msN: adc vector 7 | lsN: adc vector 6
		ret
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec9:
		push	b
		mov	b, a
		xor	a, unk_141	; crazy	filtered adc vector 9
		and	a, unk_142	; adc vector 9
		and	b, unk_141	; crazy	filtered adc vector 9
		add	a, b
		st	a, unk_141	; crazy	filtered adc vector 9
		pull	b
		st	b, unk_142	; adc vector 9
		cmpb	a, #80h
		beq	ADCvec9_ret
		clrb	bit7, flags_4A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  8Ch ; Њ		; cmpx,	3 byte NOP
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

ADCvec9_ret:				; CODE XREF: ROM:FF0Fj
		setb	bit7, flags_4A
		ret

; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ S U B	R O U T	I N E ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ


DebugTX:				; CODE XREF: SIN0sub+2Cp
		tbbc	bit1, flags_42,	locret_FF57 ; b2 set during init, cleared in IV6, b3 set during	init, cleared during IVE (NE interrupt)
		setb	bit2, flags_48
		di
		setb	bit1, SSD

loc_FF1F:				; send 0x1DA as	9b serial
		ld	#0DAh, SIDR_SODR
		ei
		ld	a, #017

loc_FF25:				; CODE XREF: DebugTX+12j
		tbbs	bit7, SSD, loc_FF2D ; Serial Status Data Register
		dec	a
		bne	loc_FF25
		bra	loc_FF30
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FF2D:				; CODE XREF: DebugTX:loc_FF25j
		tbbc	bit6, SSD, loc_FF34 ; Serial Status Data Register

loc_FF30:				; CODE XREF: DebugTX+14j
		ld	a, SIDR_SODR	; Serial Input/Output Data Register
		bra	loc_FF55	; bomb out
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_FF34:				; CODE XREF: DebugTX:loc_FF2Dj
		ld	b, SIDR_SODR	; Serial Input/Output Data Register
		ld	a, SSD		; get 9th bit into LSB of acca
		and	a, #01h
		shl	d
		cmp	d, #003Eh	; sending 1f yields 3E,	which is secret	code for mask rom revision
		bne	loc_FF43
		ld	d, #0FFDCh

loc_FF43:				; CODE XREF: DebugTX+27j
		mov	d, y
		ld	d, [y]
		clrb	bit1, SSD
		clrb	bit1, SSD
		st	a, SIDR_SODR	; debug	tx
		clrb	bit1, SSD
		clrb	bit1, SSD
		clrb	bit1, SSD
		st	b, SIDR_SODR	; debug	tx
		clrb	bit3, IRQLL

loc_FF55:				; CODE XREF: DebugTX+1Bj
		clrb	bit2, flags_48

locret_FF57:				; CODE XREF: DebugTXj
		ret
; End of function DebugTX

; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.db  5Fh ; _
		.dw 61D6h		; checksum force word
		.dw 9028h		; mask rom version
		.dw DefaultINT		; External interrupt 0
		.dw IV1			; 1 - SIN0
		.dw DefaultINT		; External interrupt 2
		.dw DefaultINT		; External interrupt 3
		.dw IV4			; 4 - ASR3
		.dw DefaultINT		; External interrupt 5
		.dw IV6			; 6 - swi?
		.dw DefaultINT		; External interrupt 7
		.dw DefaultINT		; External interrupt 8
		.dw IV9			; 9 - CPR0
		.dw DefaultINT		; External interrupt a
		.dw DefaultINT		; External interrupt b
		.dw IVc			; C - Periodic
		.dw DefaultINT		; External interrupt d
		.dw IVe			; E - ASR2, /NE
		.dw DefaultINT		; External interrupt f
		.dw __RESET		; Processor reset
; end of 'ROM'


		.end
